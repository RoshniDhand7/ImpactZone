"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[894],{2894:(e,i,s)=>{s.r(i),s.d(i,{default:()=>y});var n=s(5043),l=s(5050),a=s(5378),o=s(8945),c=s(6038),t=s(7994),d=s(1688),m=s(9456),r=s(8740),u=s(6911),A=s(8110),v=s(7602),h=s(6411),x=s(1584),p=s(1830),g=s(9273),w=s(1221),j=s(579);const y=()=>{var e;const i=(0,m.wA)(),{id:s}=(0,d.g)();(0,n.useEffect)((()=>{i((0,A.aM)()),i((0,x.mP)()),i((0,g.vR)())}),[i]);const[y,C]=(0,n.useState)({name:"",description:"",discountType:"None",accessRestriction:"false",accessSchedule:null,remotecheckin:"",transferToAnotherType:null,clubCreditAmount:"",specialRestriction:"",minimumAgeAllowed:0,maximumAgeAllowed:0,maximumDaysAllowed:0,maximumDistanceAllowed:0,club:[],services:[],isActive:!0}),{AccessScheduleDropdown:f}=(0,m.d4)((e=>e.accessSchedule));let{MembershipTypesDropdown:b}=(0,m.d4)((e=>e.membershipTypes));b=null===(e=b)||void 0===e?void 0:e.filter((e=>e.name!==(null===y||void 0===y?void 0:y.name)));const{catalogServiceFilterItems:R}=(0,m.d4)((e=>e.catalogItems));let{clubsDropdown:D}=(0,m.d4)((e=>e.clubs));const[T,k]=(0,n.useState)(!1),[B,S]=(0,n.useState)([]),P=(0,d.W6)(),{loading:E}=(0,m.d4)((e=>{var i;return null===e||void 0===e||null===(i=e.loader)||void 0===i?void 0:i.isLoading}));(0,n.useEffect)((()=>{s&&i((0,w.nK)(s,(e=>{C({name:e.name,description:e.description,discountType:e.discountType,accessRestriction:e.accessRestriction,accessSchedule:e.accessSchedule,remotecheckin:e.remotecheckin,transferToAnotherType:e.transferToAnotherType,clubCreditAmount:e.clubCreditAmount,specialRestriction:e.specialRestriction,minimumAgeAllowed:e.minimumAgeAllowed,maximumAgeAllowed:e.maximumAgeAllowed,maximumDaysAllowed:e.maximumDaysAllowed,maximumDistanceAllowed:e.maximumDistanceAllowed,club:e.club,services:e.services,isActive:!0})})))}),[s,i]);const F=e=>{let{name:i,value:s}=e;const n=(0,c.A)(i,s,y);C((e=>({...e,[i]:s,formErrors:n})))};(0,n.useEffect)((()=>{s&&T&&S(null===y||void 0===y?void 0:y.services)}),[null===y||void 0===y?void 0:y.services,T,s]);const I=r.$n;return(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)(l.A,{backText:"Membership Types",children:[(0,j.jsxs)(a.Ay,{col:"12",title:"General",children:[(0,j.jsx)(o.o4,{name:"isActive",data:y,onChange:F}),(0,j.jsxs)(a.a,{children:[(0,j.jsx)(o.wi,{name:"name",data:y,onChange:F,required:!0}),(0,j.jsx)(o.wi,{name:"description",data:y,onChange:F}),(0,j.jsx)(o.BR,{name:"discountType",options:I,onChange:F,data:y}),(0,j.jsx)(o.BR,{name:"accessRestriction",options:r.r4,onChange:F,data:y}),"true"===(null===y||void 0===y?void 0:y.accessRestriction)&&(0,j.jsx)(o.BR,{name:"accessSchedule",options:f,onChange:F,data:y}),(0,j.jsx)(o.BR,{name:"remotecheckin",options:r.r4,onChange:F,data:y}),(0,j.jsx)(o.BR,{name:"transferToAnotherType",options:b,onChange:F,data:y}),(0,j.jsx)(o.Bt,{prefix:"$",name:"clubCreditAmount",data:y,onChange:F,col:"4"}),(0,j.jsx)(o.BR,{name:"specialRestriction",options:r.So,onChange:F,data:y}),"By Age"===(null===y||void 0===y?void 0:y.specialRestriction)&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(o.Bt,{name:"minimumAgeAllowed",data:y,onChange:F,col:"4"}),(0,j.jsx)(o.Bt,{name:"maximumAgeAllowed",data:y,onChange:F,col:"4"})]}),"By Location"===(null===y||void 0===y?void 0:y.specialRestriction)&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(o.Bt,{name:"maximumDistanceAllowed",data:y,onChange:F,col:"4"})}),"By Days"===(null===y||void 0===y?void 0:y.specialRestriction)&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(o.Bt,{name:"maximumDaysAllowed",data:y,onChange:F,col:"4"})})]})]}),(0,j.jsx)(a.Ay,{col:"12",title:" Clubs",children:(0,j.jsx)(u.A,{name:"club",selected:null===y||void 0===y?void 0:y.club,sourceData:D,onPickListChange:F})}),(0,j.jsxs)(a.Ay,{col:"12",title:" Add Services",children:[(0,j.jsx)(a.Fq,{buttonTitle:"Add",onClick:()=>k(!0),extraClass:"justify-content-end gap-2",children:(0,j.jsx)("div",{children:(0,j.jsx)(t.Ay,{label:"Remove All",onClick:()=>{C((e=>({...e,services:[]}))),S([])}})})}),(0,j.jsx)(v.A,{data:null===y||void 0===y?void 0:y.services,columns:[{field:"name",header:"Item Name"},{field:"upc",header:"Item UPC"},{field:"unitPrice",header:"Price"}],showSelectionElement:!1,onDelete:e=>{(0,p.QV)((()=>{C((i=>{var s;return{...i,services:null===y||void 0===y||null===(s=y.services)||void 0===s?void 0:s.filter((i=>i._id!==(null===e||void 0===e?void 0:e._id)))}}))}),"Do you want to delete this Service ?","center")}})]}),(0,j.jsx)(h.A,{title:"Add Services",visible:T,onCancel:()=>{k("")},loading:E,onSave:()=>{C((e=>({...e,services:B}))),k(!1)},width:"auto",children:(0,j.jsx)(a.a,{children:T&&(0,j.jsx)(v.A,{convertToboolean:!1,data:T&&R,columns:[{selectionMode:"multiple",headerStyle:""},{field:"name",header:"Item Name"},{field:"upc",header:"Item UPC"},{field:"unitPrice",header:"Price"}],selectedRow:B,setSelectedRow:S})})}),(0,j.jsxs)(t.zp,{children:[(0,j.jsx)(t.Ay,{label:"Save",className:"mx-2",onClick:()=>{let e=[];switch(null===y||void 0===y?void 0:y.specialRestriction){case"By Age":e=["maximumDaysAllowed","maximumDistanceAllowed","services"];break;case"By Location":e=["minimumAgeAllowed","maximumAgeAllowed","maximumDaysAllowed","services"];break;case"By Days":e=["maximumAgeAllowed","minimumAgeAllowed","maximumDistanceAllowed","services"];break;default:e=["maximumDaysAllowed","maximumDistanceAllowed","minimumAgeAllowed","maximumAgeAllowed","services"]}(0,p.nV)(y,C,e)&&i(s?(0,w.TV)(s,{...y,services:(0,p.rO)(y.services)},P):(0,w.E1)({...y,services:(0,p.rO)(y.services)},(()=>P.goBack())))},loading:E}),(0,j.jsx)(t.Ti,{label:"Cancel",onClick:()=>P.goBack()})]})]})})}}}]);
//# sourceMappingURL=894.5b6bd630.chunk.js.map