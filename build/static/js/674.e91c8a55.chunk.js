"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[674],{4674:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var a=n(5043),r=n(5050),l=n(5378),o=n(6038),s=n(8945),i=n(1688),c=n(2399),u=n(9456),d=n(8110),m=n(1221),p=n(8740),v=n(7994),h=n(438),f=n(6911),g=n(7545),b=n(8701),y=n(2028),C=n(4504),x=n(1828),j=n(4052);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==E(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}var P=x.x.extend({defaultProps:{__TYPE:"Editor",id:null,value:null,style:null,className:null,placeholder:null,readOnly:!1,modules:null,formats:null,theme:"snow",showHeader:!0,headerTemplate:null,onTextChange:null,onSelectionChange:null,onLoad:null,maxLength:null,children:void 0}});function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){var a,r,l;a=e,r=t,l=n[t],(r=w(r))in a?Object.defineProperty(a,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[r]=l})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){try{return Quill}catch(e){return null}}(),T=a.memo(a.forwardRef((function(e,t){var r=a.useContext(j.UM),l=P.getProps(e,r),o=P.setMetaData({props:l}).ptm,s=a.useRef(null),i=a.useRef(null),c=a.useRef(null),u=a.useRef(null),d=a.useRef(!1);(0,y.uU)((function(){if(!d.current){var e={modules:S({toolbar:!!l.showHeader&&c.current},l.modules),placeholder:l.placeholder,readOnly:l.readOnly,theme:l.theme,formats:l.formats};A?(u.current=new Quill(i.current,e),m(),u.current&&u.current.getModule("toolbar")&&l.onLoad&&l.onLoad(u.current)):n.e(175).then(n.t.bind(n,4175,23)).then((function(t){t&&C.DV.isExist(i.current)&&(t.default?u.current=new t.default(i.current,e):u.current=new t(i.current,e),m())})).then((function(){u.current&&u.current.getModule("toolbar")&&l.onLoad&&l.onLoad(u.current)})),d.current=!0}}));var m=function(){l.value&&u.current.setContents(u.current.clipboard.convert(l.value)),u.current.on("text-change",(function(e,t,n){var a=i.current.children[0],r=a?a.innerHTML:null,o=u.current.getText();if("<p><br></p>"===r&&(r=null),"api"===n){var s=i.current.children[0],c=document.createElement("div");if(c.innerHTML=l.value||"",C.DV.isEqualElement(s,c))return}if(l.maxLength){var d=u.current.getLength();d>l.maxLength&&u.current.deleteText(l.maxLength,d)}l.onTextChange&&l.onTextChange({htmlValue:r,textValue:o,delta:e,source:n})})),u.current.on("selection-change",(function(e,t,n){l.onSelectionChange&&l.onSelectionChange({range:e,oldRange:t,source:n})}))};(0,y.w5)((function(){u.current&&!u.current.hasFocus()&&(l.value?u.current.setContents(u.current.clipboard.convert(l.value)):u.current.setText(""))}),[l.value]),a.useImperativeHandle(t,(function(){return{props:l,getQuill:function(){return u.current},getElement:function(){return s.current},getContent:function(){return i.current},getToolbar:function(){return c.current}}}));var p=(0,C.xW)("p-component p-editor-container",l.className),v=function(){var e=(0,C.v6)({ref:c,className:"p-editor-toolbar"},o("toolbar"));if(!1===l.showHeader)return null;if(l.headerTemplate)return a.createElement("div",e,l.headerTemplate);var t=function(e,t){return(0,C.v6)(e&&S({},e),o(t))},n=(0,C.v6)({className:"ql-formats"},o("formats"));return a.createElement("div",e,a.createElement("span",n,a.createElement("select",t({className:"ql-header",defaultValue:"0"},"select"),a.createElement("option",t({value:"1"},"option"),"Heading"),a.createElement("option",t({value:"2"},"option"),"Subheading"),a.createElement("option",t({value:"0"},"option"),"Normal")),a.createElement("select",t({className:"ql-font"},"select"),a.createElement("option",t(void 0,"option")),a.createElement("option",t({value:"serif"},"option")),a.createElement("option",t({value:"monospace"},"option")))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-bold","aria-label":"Bold"},"button")),a.createElement("button",t({type:"button",className:"ql-italic","aria-label":"Italic"},"button")),a.createElement("button",t({type:"button",className:"ql-underline","aria-label":"Underline"},"button"))),a.createElement("span",n,a.createElement("select",t({className:"ql-color"},"select")),a.createElement("select",t({className:"ql-background"},"select"))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"},"button")),a.createElement("button",t({type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"},"button")),a.createElement("select",t({className:"ql-align"},"select"),a.createElement("option",t({defaultValue:!0},"option")),a.createElement("option",t({value:"center"},"option")),a.createElement("option",t({value:"right"},"option")),a.createElement("option",t({value:"justify"},"option")))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-link","aria-label":"Insert Link"},"button")),a.createElement("button",t({type:"button",className:"ql-image","aria-label":"Insert Image"},"button")),a.createElement("button",t({type:"button",className:"ql-code-block","aria-label":"Insert Code Block"},"button"))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-clean","aria-label":"Remove Styles"},"button"))))}(),h=(0,C.v6)({ref:i,className:"p-editor-content",style:l.style},o("content")),f=a.createElement("div",h),g=(0,C.v6)({id:l.id,ref:s,className:p},P.getOtherProps(l),o("root"));return a.createElement("div",g,v,f)})));T.displayName="Editor";var N=n(3631),q=n(579);const D=e=>{let{name:t,data:n,value:a,onTextChange:r,height:l="320px",inputClass:o,col:s=12,label:i,required:c,extraClassName:u,errorMessage:d}=e;return(0,q.jsx)(N.A,{col:s,label:i,name:t,required:c,extraClassName:u,data:n,errorMessage:d,children:(0,q.jsx)("div",{className:"custom-editor",children:(0,q.jsx)(T,{value:a||(null===n||void 0===n?void 0:n[t]),onTextChange:e=>r&&r({...e,name:t,value:e.htmlValue}),style:{height:l},className:"w-full ".concat(o||""," ").concat(d?"p-invalid":"")})})})};var R=n(1830),_=n(2920);const k=()=>{const e=(0,i.W6)(),t=(0,u.wA)(),{id:n}=(0,i.g)(),y=(0,u.d4)((e=>e.loader.isLoading)),[C,x]=(0,a.useState)({category:"",subCategory:"",club:"",name:"",membershipType:"",agreementTemplate:"",assessedFee:[],services:[],autoPay:"",oftenClientCharged:"",timePeriod:0,noOfAutopays:"",whenClientCharged:"",date:"",afterSixPayments:"",sellOnline:"",onlineDescription:""});(0,a.useEffect)((()=>{t((0,c.TX)()),t((0,d.aM)()),t((0,m.i4)()),t((0,g.eA)())}),[t]),(0,a.useEffect)((()=>{t((0,h.eO)()),localStorage.removeItem("gjsProject")}),[t]);const{allAssessedFeesDropdown:j}=(0,u.d4)((e=>e.assessedFees)),{allAgreementTemplatesDropdown:E}=(0,u.d4)((e=>e.agreement));let{agreementCategoryDropdown:w,agreementSubCategoryDropdown:P,allAgreementCategories:O}=(0,u.d4)((e=>e.agreement));const[S,A]=(0,a.useState)([]),{clubsDropdown:T}=(0,u.d4)((e=>e.clubs)),{MembershipTypesDropdown:N}=(0,u.d4)((e=>e.membershipTypes)),k=e=>{let{name:t,value:n}=e;const a=(0,o.A)(t,n,C);if("category"===t){var r,l;x((e=>({...e,[t]:n,formErrors:a})));const e=(null===(r=O.find((e=>e._id===n)))||void 0===r||null===(l=r.subCategories)||void 0===l?void 0:l.map((e=>({name:e,value:e}))))||[];A(e),console.log(e,"subcategory")}x((e=>({...e,[t]:n,formErrors:a})))};return(0,a.useEffect)((()=>{n&&t((0,_.gZ)(n,(e=>{x({category:e.category,subCategory:e.subCategory,club:e.club,name:e.name,membershipType:e.membershipType,agreementTemplate:e.agreementTemplate,assessedFee:e.assessedFee,services:e.services,autoPay:e.autoPay,oftenClientCharged:e.oftenClientCharged,timePeriod:e.timePeriod,noOfAutopays:e.noOfAutopays,whenClientCharged:e.whenClientCharged,date:e.date,afterSixPayments:e.afterSixPayments,sellOnline:e.sellOnline,onlineDescription:e.onlineDescription})})))}),[n,t]),(0,q.jsx)(q.Fragment,{children:(0,q.jsxs)(r.A,{backText:"Agreement Plan",children:[(0,q.jsx)(l.Ay,{col:"12",title:"General",children:(0,q.jsxs)(l.a,{children:[(0,q.jsx)(s.BR,{name:"category",options:w,onChange:k,data:C,required:!0}),(0,q.jsx)(s.BR,{name:"subCategory",options:S,onChange:k,data:C,required:!0}),(0,q.jsx)(s.wi,{name:"name",data:C,onChange:k,required:!0}),(0,q.jsx)(s.BR,{name:"club",options:T,onChange:k,data:C,required:!0}),(0,q.jsx)(s.BR,{name:"membershipType",options:N,onChange:k,data:C,required:!0}),(0,q.jsx)(s.BR,{name:"agreementTemplate",options:E,onChange:k,data:C})]})}),(0,q.jsx)(l.Ay,{col:"12",title:"Assessed Fees",children:(0,q.jsx)(f.A,{name:"assessedFee",selected:null===C||void 0===C?void 0:C.assessedFee,sourceData:j,onPickListChange:k})}),(0,q.jsx)(b.A,{data:C,setData:x,id:n,loading:y}),(0,q.jsx)(l.Ay,{col:"12",title:"Contract Options",children:(0,q.jsxs)(l.a,{children:[(0,q.jsx)(s.BR,{name:"autoPay",options:p.iB,onChange:k,data:C}),"set_schedule"===(null===C||void 0===C?void 0:C.autoPay)&&(0,q.jsx)(s.BR,{name:"oftenClientCharged",label:"How Often will Clients Be Charged",options:p.eH,onChange:k,data:C}),(null===C||void 0===C?void 0:C.autoPay)&&(0,q.jsx)(s.Bt,{name:"timePeriod",data:C,onChange:k,col:"4",suffix:"Month"}),"no_of_autopays"===(null===C||void 0===C?void 0:C.oftenClientCharged)&&(0,q.jsx)(s.wi,{name:"noOfAutopays",label:"Number of AutoPays",data:C,onChange:k,col:"4",keyfilter:"int"}),"set_schedule"===(null===C||void 0===C?void 0:C.autoPay)&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(s.BR,{name:"whenClientCharged",label:"When will Clients Be Charged",options:p.Yl,onChange:k,data:C}),"specific_date"===(null===C||void 0===C?void 0:C.whenClientCharged)&&(0,q.jsx)(s.wN,{name:"date",data:C,onChange:k}),"no_of_autopays"===(null===C||void 0===C?void 0:C.oftenClientCharged)&&(0,q.jsx)(s.BR,{name:"afterSixPayments",label:" What happens after ".concat(null===C||void 0===C?void 0:C.noOfAutopays," payments"),options:p.Ol,onChange:k,data:C})]}),("pricing_options_run_out"===(null===C||void 0===C?void 0:C.autoPay)||"set_schedule"===(null===C||void 0===C?void 0:C.autoPay))&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(s.BR,{name:"sellOnline",options:p.r4,onChange:k,data:C}),"true"===(null===C||void 0===C?void 0:C.sellOnline)&&(0,q.jsx)(D,{name:"onlineDescription",onTextChange:k,data:C})]})]})}),(0,q.jsxs)(v.zp,{children:[(0,q.jsx)(v.Ay,{label:"Save",className:"mx-2",onClick:()=>{(0,R.nV)(C,x)&&t(n?(0,_.Y2)(n,C,e):(0,_.Rd)(C,e))},loading:y}),(0,q.jsx)(v.Ti,{label:"Cancel",onClick:()=>e.goBack()})]})]})})}},8701:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(5043),r=n(5378),l=n(1830),o=n(6411),s=n(7602),i=n(7994),c=n(9456),u=n(1584),d=n(579);const m=e=>{let{data:t,setData:n,id:m,loading:p}=e;const[v,h]=(0,a.useState)(!1),[f,g]=(0,a.useState)([]),b=(0,c.wA)();(0,a.useEffect)((()=>{b((0,u.mP)())}),[b]),(0,a.useEffect)((()=>{m&&v&&g(null===t||void 0===t?void 0:t.services)}),[null===t||void 0===t?void 0:t.services,v,m]);const{catalogServiceFilterItems:y}=(0,c.d4)((e=>e.catalogItems));return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r.Ay,{col:"12",title:" Add Services",children:[(0,d.jsx)(r.Fq,{buttonTitle:"Add",onClick:()=>h(!0),extraClass:"justify-content-end gap-2",children:(0,d.jsx)("div",{children:(0,d.jsx)(i.Ay,{label:"Remove All",onClick:()=>{n((e=>({...e,services:[]}))),g([])}})})}),(0,d.jsx)(s.A,{data:null===t||void 0===t?void 0:t.services,columns:[{field:"name",header:"Item Name"},{field:"upc",header:"Item UPC"},{field:"unitPrice",header:"Price"}],showSelectionElement:!1,onDelete:e=>{(0,l.QV)((()=>{n((n=>{var a;return{...n,services:null===t||void 0===t||null===(a=t.services)||void 0===a?void 0:a.filter((t=>t._id!==(null===e||void 0===e?void 0:e._id)))}}))}),"Do you want to delete this Service ?","center")}})]}),(0,d.jsx)(o.A,{title:"Add Services",visible:v,onCancel:()=>{h("")},loading:p,onSave:()=>{n((e=>({...e,services:f}))),h(!1)},width:"auto",children:(0,d.jsx)(r.a,{children:v&&(0,d.jsx)(s.A,{convertToboolean:!1,data:v&&y,columns:[{selectionMode:"multiple",headerStyle:""},{field:"name",header:"Item Name"},{field:"upc",header:"Item UPC"},{field:"unitPrice",header:"Price"}],selectedRow:f,setSelectedRow:g})})})]})}}}]);
//# sourceMappingURL=674.e91c8a55.chunk.js.map