{"version":3,"file":"static/js/993.ba45a28c.chunk.js","mappings":"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","sources":["views/Settings/Agreement/AssessedFees/AssessedFeesForm.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport FormPage from '../../../../shared/Layout/FormPage';\r\nimport CustomCard, { CustomGridLayout } from '../../../../shared/Cards/CustomCard';\r\nimport formValidation from '../../../../utils/validations';\r\nimport { CustomDropDown, CustomInput, CustomInputNumber, CustomInputSwitch } from '../../../../shared/Input/AllInputs';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { assessedTypeOptions, daysOptions, declineDaysOptions, monthDropdownOptions, preferedDueDay, yesNoOptions } from '../../../../utils/dropdownConstants';\r\nimport CustomPickList from '../../../../shared/Input/CustomPickList';\r\nimport PrimaryButton, { CustomButtonGroup, LightButton } from '../../../../shared/Button/CustomButton';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { showFormErrors } from '../../../../utils/commonFunctions';\r\nimport useGetClubs from '../../../../hooks/useGetClubs';\r\nimport { addAssessedFee, editAssessedFee, getAssesedFees, getAssessedFee } from '../../../../redux/actions/Settings/AgreementSetup/assessedFeeAction';\r\nimport { getProfitCenters } from '../../../../redux/actions/Settings/InventorySetup/profitCenterAction';\r\n\r\nconst AssessedFeesForm = () => {\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const { id } = useParams();\r\n    useEffect(() => {\r\n        dispatch(getProfitCenters());\r\n    }, [dispatch]);\r\n    const { clubsDropdown } = useGetClubs();\r\n\r\n    const { profitCenterDropdown } = useSelector((state) => state.profitCenter);\r\n    const { loading } = useSelector((state) => state?.loader?.isLoading);\r\n    const initialState = {\r\n        name: '',\r\n        isActive: true,\r\n        type: 'ANNUAL_FEE',\r\n        profitCenter: '',\r\n        amount: 0,\r\n        recurring: false,\r\n        membershipPlan: [],\r\n        dueDateDeterminedBy: 'MONTH_AND_DAY',\r\n        noOfDays: 0,\r\n        noOfMonths: 0,\r\n        clubs: [],\r\n    };\r\n\r\n    const [data, setData] = useState(initialState);\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            dispatch(\r\n                getAssessedFee(id, (data) => {\r\n                    setData({\r\n                        name: data.name,\r\n                        isActive: data.isActive,\r\n                        type: data.type,\r\n                        profitCenter: data.profitCenter,\r\n                        amount: data.amount,\r\n                        recurring: data.recurring,\r\n                        membershipPlan: data.membershipPlan,\r\n                        dueDateDeterminedBy: data.dueDateDeterminedBy,\r\n                        noOfDays: data.noOfDays,\r\n                        noOfMonths: data.noOfMonths,\r\n                        clubs: data.clubs,\r\n                    });\r\n                }),\r\n            );\r\n        }\r\n    }, [id, dispatch]);\r\n\r\n    const handleChange = ({ name, value }) => {\r\n        const formErrors = formValidation(name, value, data);\r\n        if (name === 'type') {\r\n            setData((prev) => ({\r\n                ...prev,\r\n                type: value,\r\n                profitCenter: '',\r\n                amount: 0,\r\n                recurring: false,\r\n                membershipPlan: [],\r\n                dueDateDeterminedBy: '',\r\n                noOfDays: 0,\r\n                noOfMonths: 0,\r\n                clubs: [],\r\n            }));\r\n        } else {\r\n            setData((prev) => ({ ...prev, [name]: value, formErrors }));\r\n        }\r\n    };\r\n\r\n    const onSave = () => {\r\n        let ignore = [];\r\n        switch (data?.type) {\r\n            case 'ANNUAL_FEE':\r\n                if (data?.dueDateDeterminedBy === 'DAYS_FROM_BEGIN_DATE') {\r\n                    ignore = ['noOfMonths'];\r\n                }\r\n                break;\r\n            case 'LATE_FEE':\r\n            case 'DECLINE_FEE':\r\n                ignore = ['noOfMonths'];\r\n                break;\r\n            default:\r\n                ignore = ['noOfDays', 'noOfMonths'];\r\n                break;\r\n        }\r\n\r\n        if (showFormErrors(data, setData, ignore)) {\r\n            if (id) {\r\n                dispatch(\r\n                    editAssessedFee(id, data, () => {\r\n                        dispatch(getAssesedFees());\r\n                        history.goBack();\r\n                    }),\r\n                );\r\n            } else {\r\n                dispatch(\r\n                    addAssessedFee(data, () => {\r\n                        dispatch(getAssesedFees());\r\n                        history.goBack();\r\n                    }),\r\n                );\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <FormPage backText=\"Assessed Fee\">\r\n                <CustomCard col=\"12\" title=\"General\">\r\n                    <CustomGridLayout>\r\n                        <CustomInput name=\"name\" data={data} onChange={handleChange} required />\r\n                        <CustomDropDown name=\"type\" options={assessedTypeOptions} onChange={handleChange} data={data} />\r\n                        <CustomDropDown name=\"profitCenter\" options={profitCenterDropdown} onChange={handleChange} data={data} required />\r\n                        <CustomInputNumber name=\"amount\" options={yesNoOptions} onChange={handleChange} data={data} required maxFractionDigits={4} />\r\n                        {(data?.type === 'ANNUAL_FEE' || data?.type === 'FREEZE_FEE') && (\r\n                            <CustomDropDown name=\"recurring\" options={yesNoOptions} onChange={handleChange} data={data} />\r\n                        )}\r\n                        <CustomInputSwitch name=\"isActive\" data={data} onChange={handleChange} />\r\n                    </CustomGridLayout>\r\n                </CustomCard>\r\n                {data?.type === 'ANNUAL_FEE' && (\r\n                    <CustomCard col=\"12\" title=\"Preferred Due Date\">\r\n                        <CustomGridLayout>\r\n                            <CustomDropDown\r\n                                name=\"dueDateDeterminedBy\"\r\n                                label=\"Choose how the prefered due day will be determined\"\r\n                                options={preferedDueDay}\r\n                                onChange={handleChange}\r\n                                data={data}\r\n                            />\r\n                            {data?.dueDateDeterminedBy === 'MONTH_AND_DAY' ? (\r\n                                <>\r\n                                    <CustomDropDown name=\"noOfMonths\" options={monthDropdownOptions} onChange={handleChange} data={data} />\r\n                                    <CustomDropDown name=\"noOfDays\" options={daysOptions} onChange={handleChange} data={data} />\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <CustomDropDown name=\"noOfDays\" options={daysOptions} onChange={handleChange} data={data} />\r\n                                </>\r\n                            )}\r\n                        </CustomGridLayout>\r\n                    </CustomCard>\r\n                )}\r\n                {(data?.type === 'LATE_FEE' || data?.type === 'DECLINE_FEE') && (\r\n                    <CustomCard col=\"12\" title=\"Preferred Due Date\">\r\n                        <CustomGridLayout>\r\n                            <CustomDropDown\r\n                                name=\"noOfDays\"\r\n                                label=\"Choose how the prefered due day will be determined\"\r\n                                options={data?.type === 'LATE_FEE' ? daysOptions : declineDaysOptions}\r\n                                onChange={handleChange}\r\n                                data={data}\r\n                            />\r\n                        </CustomGridLayout>\r\n                    </CustomCard>\r\n                )}\r\n                <CustomCard col=\"12\" title=\" Clubs\">\r\n                    <CustomPickList name=\"clubs\" selected={data?.clubs} sourceData={clubsDropdown} onPickListChange={handleChange} />\r\n                </CustomCard>\r\n                {data?.type === 'ANNUAL_FEE' && (\r\n                    <CustomCard col=\"12\" title=\"Membership Plans\">\r\n                        <CustomPickList name=\"membershipPlan\" selected={data?.membershipPlan} sourceData={[]} onPickListChange={handleChange} />\r\n                    </CustomCard>\r\n                )}\r\n\r\n                <CustomButtonGroup>\r\n                    <PrimaryButton label=\"Save\" className=\"mx-2\" onClick={onSave} loading={loading} />\r\n                    <LightButton label=\"Cancel\" onClick={() => history.goBack()} />\r\n                </CustomButtonGroup>\r\n            </FormPage>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default AssessedFeesForm;\r\n"],"names":["AssessedFeesForm","dispatch","useDispatch","history","useHistory","id","useParams","useEffect","getProfitCenters","clubsDropdown","useGetClubs","profitCenterDropdown","useSelector","state","profitCenter","loading","_state$loader","loader","isLoading","data","setData","useState","name","isActive","type","amount","recurring","membershipPlan","dueDateDeterminedBy","noOfDays","noOfMonths","clubs","getAssessedFee","handleChange","_ref","value","formErrors","formValidation","prev","_objectSpread","_jsx","_Fragment","children","_jsxs","FormPage","backText","CustomCard","col","title","CustomGridLayout","CustomInput","onChange","required","CustomDropDown","options","assessedTypeOptions","CustomInputNumber","yesNoOptions","maxFractionDigits","CustomInputSwitch","label","preferedDueDay","monthDropdownOptions","daysOptions","declineDaysOptions","CustomPickList","selected","sourceData","onPickListChange","CustomButtonGroup","PrimaryButton","className","onClick","onSave","ignore","showFormErrors","editAssessedFee","getAssesedFees","goBack","addAssessedFee","LightButton"],"sourceRoot":""}