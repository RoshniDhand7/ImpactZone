"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[104],{5150:(e,t,n)=>{n.d(t,{A:()=>w});var a=n(5043),i=n(4052),o=n(3316),l=n(2028),r=n(4504),s=n(1828),c=n(2370),d=n(5154);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function m(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function p(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function h(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==x(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o,l,r=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(r.push(a.value),r.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw i}}return r}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=s.x.extend({defaultProps:{__TYPE:"Accordion",id:null,activeIndex:null,className:null,style:null,multiple:!1,expandIcon:null,collapseIcon:null,transitionOptions:null,onTabOpen:null,onTabClose:null,onTabChange:null,children:void 0}}),g=s.x.extend({defaultProps:{__TYPE:"AccordionTab",className:null,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,style:null,tabIndex:0,children:void 0},getCProp:function(e,t){return r.BF.getComponentProp(e,t,g.defaultProps)},getCProps:function(e){return r.BF.getComponentProps(e,g.defaultProps)},getCOtherProps:function(e){return r.BF.getComponentDiffProps(e,g.defaultProps)}});function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){var a,i,o;a=e,i=t,o=n[t],(i=h(i))in a?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(){},C=a.forwardRef((function(e,t){var n=a.useContext(i.UM),s=f.getProps(e,n),u=v(a.useState(s.id),2),m=u[0],x=u[1],h=v(a.useState(s.activeIndex),2),b=h[0],j=h[1],C=a.useRef(null),A=s.onTabChange?s.activeIndex:b,w={props:s,state:{id:m,activeIndex:b}},S=f.setMetaData(y({},w)),P=S.ptm,D=S.ptmo,T=function(e,t){return D(R(e,"pt"),t,{props:e.props,parent:w})},R=function(e,t){return g.getCProp(e,t)},N=function(e){return s.multiple?A&&A.some((function(t){return t===e})):A===e};if(a.useImperativeHandle(t,(function(){return{props:s,getElement:function(){return C.current}}})),(0,l.uU)((function(){m||x((0,r._Y)())})),!m)return null;var k=function(e,t,n){var o=y(y({},R(e,"style")||{}),R(e,"headerStyle")||{}),l=(0,r.xW)("p-accordion-header",{"p-highlight":t,"p-disabled":R(e,"disabled")},R(e,"headerClassName"),R(e,"className")),u=m+"_header_"+n,x=m+"_content_"+n,h=R(e,"disabled")?-1:R(e,"tabIndex"),v=(0,r.v6)({className:"p-accordion-header-text"},T(e,"headertitle")),f=R(e,"headerTemplate")?r.BF.getJSXElement(R(e,"headerTemplate"),g.getCProps(e)):a.createElement("span",v,R(e,"header")),b=(0,r.v6)({className:"p-accordion-toggle-icon"},T(e,"headericon")),C=t?s.collapseIcon||a.createElement(d.D,b):s.expandIcon||a.createElement(c.v,b),w=r.Hj.getJSXIcon(C,y({},b),{props:s,selected:t}),S=t?(0,i.Y4)("collapseLabel"):(0,i.Y4)("expandLabel"),P=(0,r.v6)({className:l,style:o},T(e,"header")),D=(0,r.v6)({id:u,href:"#"+x,className:"p-accordion-header-link",role:"tab",tabIndex:h,onClick:function(t){return function(e,t,n){if(!R(t,"disabled")){var a=N(n),i=null;if(s.multiple){var o=A||[];i=a?o.filter((function(e){return e!==n})):[].concat(p(o),[n])}else i=a?null:n;var l=a?s.onTabClose:s.onTabOpen;l&&l({originalEvent:e,index:n}),s.onTabChange?s.onTabChange({originalEvent:e,index:i}):j(i)}e.preventDefault()}(t,e,n)},"aria-label":S,"aria-controls":x,"aria-expanded":t},T(e,"headeraction"));return a.createElement("div",P,a.createElement("a",D,w,f))},I=function(e,t){if(r.BF.isValidChild(e,"AccordionTab")){var n=m+"_"+t,i=N(t),l=k(e,i,t),c=function(e,t,n){var i=y(y({},R(e,"style")||{}),R(e,"contentStyle")||{}),l=(0,r.xW)("p-toggleable-content",R(e,"contentClassName"),R(e,"className")),c=m+"_content_"+n,d=m+"_header_"+n,u=a.createRef(),p=(0,r.v6)({id:c,ref:u,className:l,style:i,role:"region","aria-labelledby":d},T(e,"toggleablecontent")),x=(0,r.v6)({className:"p-accordion-content"},T(e,"content"));return a.createElement(o.B,{nodeRef:u,classNames:"p-toggleable-content",timeout:{enter:1e3,exit:450},in:t,unmountOnExit:!0,options:s.transitionOptions},a.createElement("div",p,a.createElement("div",x,R(e,"children"))))}(e,i,t),d=(0,r.xW)("p-accordion-tab",{"p-accordion-tab-active":i}),u=(0,r.v6)({key:n,className:d},g.getCOtherProps(e),T(e,"root"));return a.createElement("div",u,l,c)}return null},B=(0,r.xW)("p-accordion p-component",s.className),Q=a.Children.map(s.children,I),E=(0,r.v6)({id:m,ref:C,className:B,style:s.style},f.getOtherProps(s),P("root"));return a.createElement("div",E,Q)}));j.displayName="AccordionTab",C.displayName="Accordion";var A=n(579);function w(e){let{children:t,contentclassname:n,isActive:i,extraClassName:o,title:l,col:r=12}=e;const[s,c]=(0,a.useState)(0);return(0,a.useEffect)((()=>{c(i?0:null)}),[i]),(0,A.jsx)(C,{onTabChange:e=>c(e.index),activeIndex:s,col:r,contentclassname:n,className:"custom-accordion border-none my-2 ".concat(o),children:(0,A.jsx)(j,{header:l,className:o,col:r,children:t})})}},5090:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(9379),i=n(45),o=n(5043),l=n(6796),r=n(8702),s=n(3631),c=n(579);const d=["label","name","onFilesChange","errorMessage","extraClassName","value","data","col","required","imgclass","removeable","editable","uploadboxclass","uploadIcon","disabled"],u=e=>{let{label:t,name:n,onFilesChange:u,errorMessage:m,extraClassName:p,value:x,data:h,col:v,required:f,imgclass:g,removeable:b,editable:y,uploadboxclass:j,uploadIcon:C,disabled:A=!1}=e,w=(0,i.A)(e,d);const[S,P]=(0,o.useState)(x||(null===h||void 0===h?void 0:h[n])||[]);(0,o.useEffect)((()=>{(x||null!==h&&void 0!==h&&h[n])&&JSON.stringify(x||(null===h||void 0===h?void 0:h[n]))!==JSON.stringify(S)&&P(x||(null===h||void 0===h?void 0:h[n]))}),[x||(null===h||void 0===h?void 0:h[n])]),(0,o.useEffect)((()=>{u?S.length&&u({name:n,value:S}):u({name:n,value:[]})}),[S,n]);const D=e=>{let t=[];e.forEach((e=>{-1===S.findIndex((t=>t.name===e.name))&&t.push(e)})),P([...t])};return(0,c.jsxs)(s.A,{col:v||12,label:t,name:n,required:f,extraClassName:p,data:h,errorMessage:m,children:[(0,c.jsx)("input",(0,a.A)({type:"file",className:" ",name:n,onChange:e=>{const t=e.target.files;D(Object.values(t)),e.target.value=""},id:n,accept:".jpg, .jpeg, .png,.jfif",hidden:!0},w)),S.length?Object.values(S).map(((e,t)=>(0,c.jsxs)("div",{className:"photoDiv",children:[b&&(0,c.jsx)("i",{onClick:()=>(e=>{const t=S.filter(((t,n)=>n!==e));P([...t]),u({name:n,value:[]})})(t),className:"pi pi-times cursor-pointer"}),(0,c.jsx)("img",{src:e?"string"===typeof e?(0,r.b)(e):URL.createObjectURL(e):l,onError:e=>e.target.src=(0,r.N)(),alt:"pic",className:"profile-img relative btn-border-color ".concat(g),accept:".jpg, .jpeg, .png, .jfif"})]},t))):(0,c.jsx)("div",{className:"photo-upload flex justify-content-center align-items-center",style:{height:"95px",width:"90px"},children:(0,c.jsx)("label",{htmlFor:n,children:(0,c.jsx)("img",{className:"w-full h-full fit-cover",style:{width:"50px"},src:l,onError:e=>e.target.src=(0,r.N)(),alt:"",accept:".jpg, .jpeg, .png"})})})]})}},2104:(e,t,n)=>{n.r(t),n.d(t,{default:()=>G});var a=n(9379),i=n(5043),o=n(6443),l=n(5050),r=n(3549),s=n(5090),c=n(4572),d=n(7374),u=n(9456),m=n(6911),p=n(7994),x=n(1688),h=n(3335),v=n(6038),f=n(1047),g=n(4197),b=n(1806),y=n(579);const j=e=>{var t;let{editItem:n}=e;const o=(0,u.wA)(),l=(0,x.W6)(),{id:j}=(0,x.g)(),C=(0,u.d4)((e=>e.loader.isLoading)),[A,w]=(0,i.useState)({catalogImage:[],type:"PRODUCT",name:"",upc:"",profitCentre:"",itemCaption:"",itemSold:"",isRecurring:!1,isOneTimePurchaseable:!1,isRedeemable:!1,isSoldOnline:!1,isActive:!0,category:"",productType:"GENERAL",clubs:[],taxes:[],wholesaleCost:"",netPrice:0,unitPrice:0,defaultPrice:0,allowDiscount:!1,defaultDiscount:null,overrideDiscount:!1,minimumQuantity:1,defaultQuantity:1,maximumQuantity:1,allowUnlimited:!1,isStockable:!1,itemStart:"",expiration:!1,days:"",month:"",moreThan1:0,unitDiscount1:0,moreThan2:0,unitDiscount2:0,moreThan3:0,unitDiscount3:0,filterSet:[],tags:[]}),{filterSetDropDown:S}=(0,u.d4)((e=>e.filterSet)),{tagsDropDown:P}=(0,u.d4)((e=>e.tags)),{profitCenterDropdown:D}=(0,u.d4)((e=>e.profitCenter));let{categoryDropdown:T}=(0,u.d4)((e=>e.category)),{allDiscountDropdown:R}=(0,u.d4)((e=>e.discountType));T=[...T,...d.$n],R=[...R,...d.$n];const{clubsDropdown:N}=(0,f.A)(),{allTaxDropdown:k,allTaxes:I}=(0,u.d4)((e=>e.taxes));(0,i.useEffect)((()=>{n&&w({catalogImage:n.catalogImage,type:n.type,name:n.name,upc:n.upc,profitCentre:n.profitCentre,itemCaption:n.itemCaption,itemSold:n.itemSold,isRecurring:n.isRecurring,isOneTimePurchaseable:n.isOneTimePurchaseable,isRedeemable:n.isRedeemable,isSoldOnline:n.isSoldOnline,isActive:n.isActive,category:n.category,productType:n.productType,clubs:n.clubs,taxes:n.taxes,wholesaleCost:n.wholesaleCost,netPrice:n.netPrice,unitPrice:n.unitPrice,defaultPrice:n.defaultPrice,allowDiscount:n.allowDiscount,defaultDiscount:n.allowDiscount?n.defaultDiscount||"NONE":A.defaultDiscount,overrideDiscount:n.overrideDiscount,minimumQuantity:n.minimumQuantity,defaultQuantity:n.defaultQuantity,maximumQuantity:n.maximumQuantity,allowUnlimited:n.allowUnlimited,isStockable:n.isStockable,itemStart:n.itemStart,expiration:n.expiration,days:n.days,month:n.month,moreThan1:n.moreThan1,unitDiscount1:n.unitDiscount1,moreThan2:n.moreThan2,unitDiscount2:n.unitDiscount2,moreThan3:n.moreThan3,unitDiscount3:n.unitDiscount3,filterSet:n.filterSet,tags:n.tags})}),[n]);let B=(0,i.useMemo)((()=>I.filter((e=>{var t;return null===A||void 0===A||null===(t=A.taxes)||void 0===t?void 0:t.includes(e._id)})).reduce(((e,t)=>e+t.taxRatePercentage),0)),[I,null===A||void 0===A?void 0:A.taxes]);(0,i.useEffect)((()=>{Q({name:"netPrice",value:null===A||void 0===A?void 0:A.netPrice})}),[B]);const Q=e=>{let{name:t,value:n}=e;const i=(0,v.A)(t,n,A);let o=0,l=0;"netPrice"===t&&(o=n,l=(0,g.vX)(o,B),w((e=>(0,a.A)((0,a.A)({},e),{},{netPrice:o,unitPrice:l,formErrors:i})))),"unitPrice"===t&&(l=n,o=(0,g.eH)(l,B),w((e=>(0,a.A)((0,a.A)({},e),{},{netPrice:o,unitPrice:l,formErrors:i}))))},E=e=>{let{name:t,value:n}=e;const i=(0,v.A)(t,n,A);w("moreThan1"===t?e=>(0,a.A)((0,a.A)({},e),{},{[t]:n,moreThan2:0,moreThan3:0}):"moreThan2"===t?e=>(0,a.A)((0,a.A)({},e),{},{[t]:n,moreThan3:0}):e=>(0,a.A)((0,a.A)({},e),{},{[t]:n,formErrors:i}))},V=e=>{let t=[];if(t=null!==A&&void 0!==A&&A.allowDiscount?["days"]:["days","defaultDiscount"],(0,h.nV)(A,w,[...t,"commissionGroup","variationName"]))o(j?(0,b.lf)(j,A,l,e):(0,b.kF)(A,l,e));else{document.getElementById("main-content").scroll({top:100,left:100,behavior:"smooth"})}},O=e=>{let{name:t}=e,{defaultQuantity:n,minimumQuantity:i,maximumQuantity:o,allowUnlimited:l}=A;"minimumQuantity"===t&&(n<i&&(n=i),o<i&&(o=i)),"defaultQuantity"===t&&(i>n&&(i=n),o<n&&(o=n)),"maximumQuantity"!==t||l||(i>o&&(i=o),n>o&&(n=o)),w((e=>(0,a.A)((0,a.A)({},e),{},{maximumQuantity:o,defaultQuantity:n,minimumQuantity:i})))},_=e=>{let{name:t,value:n}=e;w((e=>(0,a.A)((0,a.A)({},e),{},{[t]:n})))};(0,i.useEffect)((()=>{let e=0;null!==A&&void 0!==A&&A.unitPrice&&null!==A&&void 0!==A&&A.defaultQuantity&&(e=(null===A||void 0===A?void 0:A.unitPrice)*(null===A||void 0===A?void 0:A.defaultQuantity)),w((t=>(0,a.A)((0,a.A)({},t),{},{defaultPrice:e})))}),[null===A||void 0===A?void 0:A.unitPrice,null===A||void 0===A?void 0:A.defaultQuantity]);const F=e=>{if(null!==A&&void 0!==A&&A.wholesaleCost&&e){const t=(0,g.m3)(null===A||void 0===A?void 0:A.wholesaleCost,(null===A||void 0===A?void 0:A.netPrice)-e);return(0,y.jsx)(y.Fragment,{children:t>0?(0,y.jsx)("span",{className:"text-green",children:t.toFixed(2)+"%"}):t<0?(0,y.jsx)("span",{className:"text-red",children:t.toFixed(2)+"%"}):(0,y.jsx)("span",{children:t.toFixed(2)+"%"})})}return null};return(0,y.jsxs)("div",{id:"main-content",children:[(0,y.jsx)(r.Ay,{col:"12",title:"General",children:(0,y.jsxs)(r.a,{children:[(0,y.jsx)(s.A,{name:"catalogImage",data:A,onFilesChange:E,removeable:!0,col:12}),(0,y.jsx)(c.BR,{name:"type",options:d.Xq,onChange:E,data:A,disabled:j}),(0,y.jsx)(c.wi,{name:"name",onChange:E,data:A,required:!0}),(0,y.jsx)(c.Bt,{name:"upc",label:"UPC",onChange:E,data:A,col:4,required:!0}),(0,y.jsx)(c.BR,{name:"profitCentre",options:D,onChange:E,data:A,required:!0}),(0,y.jsx)(c.wi,{name:"itemCaption",onChange:E,data:A,required:!0}),(0,y.jsx)(c.BR,{name:"itemSold",label:"How is this item sold?",options:d.se,onChange:E,data:A,required:!0}),(0,y.jsx)(c.BR,{name:"isRecurring",label:"Is this item Recurring?",options:d.r4,onChange:E,data:A}),(0,y.jsx)(c.BR,{name:"isOneTimePurchaseable",label:"Can this item only be purchased 1 time?",options:d.r4,onChange:E,data:A}),(0,y.jsx)(c.BR,{name:"isRedeemable",label:"Can this item be rendered at a later date?",options:d.r4,onChange:E,data:A}),(0,y.jsx)(c.BR,{name:"isSoldOnline",label:"Is this item sold online?",options:d.r4,onChange:E,data:A}),(0,y.jsx)(c.o4,{name:"isActive",data:A,onChange:E})]})}),(0,y.jsx)(r.Ay,{col:"12",title:"Display",children:(0,y.jsxs)(r.a,{children:[(0,y.jsx)(c.BR,{name:"category",options:T,onChange:E,data:A,required:!0}),(0,y.jsx)(c.Rx,{name:"filterSet",options:S,onChange:E,data:A}),(0,y.jsx)(c.Rx,{name:"tags",options:P,onChange:E,data:A})]})}),(0,y.jsx)(r.Ay,{col:"12",title:"Product Settings",children:(0,y.jsx)(r.a,{children:(0,y.jsx)(c.BR,{name:"productType",options:d.Yc,onChange:E,data:A})})}),(0,y.jsx)(r.Ay,{col:"12",title:"Clubs",children:(0,y.jsx)(m.A,{name:"clubs",selected:null===A||void 0===A?void 0:A.clubs,sourceData:N,onPickListChange:E,errorMessage:null===A||void 0===A||null===(t=A.formErrors)||void 0===t?void 0:t.clubs})}),(0,y.jsx)(r.Ay,{col:"12",title:"Taxes",children:(0,y.jsx)(m.A,{name:"taxes",selected:null===A||void 0===A?void 0:A.taxes,sourceData:k,onPickListChange:E})}),(0,y.jsx)(r.Ay,{col:"12",title:"Pricing",children:(0,y.jsxs)(r.a,{children:[(0,y.jsx)(c.Bt,{prefix:"$",data:A,onChange:E,name:"wholesaleCost"}),(0,y.jsx)(c.Bt,{prefix:"$",data:A,onChange:Q,name:"netPrice",required:!0}),(0,y.jsx)(c.Bt,{prefix:"$",data:A,onChange:Q,name:"unitPrice",required:!0}),(0,y.jsx)(c.BR,{data:A,onChange:E,name:"allowDiscount",options:d.r4,clearIcon:!0}),(null===A||void 0===A?void 0:A.allowDiscount)&&(0,y.jsx)(c.BR,{data:A,onChange:E,name:"defaultDiscount",options:R}),(0,y.jsx)(c.BR,{data:A,onChange:E,name:"overrideDiscount",options:d.r4})]})}),(0,y.jsx)(r.Ay,{col:"12",title:"Details",children:(0,y.jsxs)(r.a,{children:[(0,y.jsx)(c.Bt,{onChange:_,onBlur:O,data:A,required:!0,name:"minimumQuantity"}),(0,y.jsx)(c.Bt,{onChange:_,onBlur:O,data:A,required:!0,name:"defaultQuantity"}),!(null!==A&&void 0!==A&&A.allowUnlimited)&&(0,y.jsx)(c.Bt,{onChange:_,onBlur:O,data:A,required:!0,name:"maximumQuantity",col:2}),(0,y.jsx)(c.ZD,{onChange:E,data:A,name:"allowUnlimited",label:"Allow Unlimited (No Max Qty.)",col:2,extraClassName:"my-auto"}),(0,y.jsx)(c.Bt,{name:"defaultPrice",data:A,disabled:!0,prefix:"$"}),(0,y.jsx)(c.BR,{name:"isStockable",options:d.r4,onChange:E,data:A}),(0,y.jsx)(c.BR,{name:"itemStart",options:d.Kg,onChange:E,data:A}),(0,y.jsx)(c.BR,{name:"expiration",options:d.r4,onChange:E,data:A,col:4}),(null===A||void 0===A?void 0:A.expiration)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.BR,{name:"days",options:d.ET,onChange:E,data:A,col:2}),(0,y.jsx)(c.BR,{name:"month",options:d.Z6,onChange:E,data:A,col:2})]})]})}),(0,y.jsx)(r.Ay,{col:"12",title:"Dynamic Pricing",children:(0,y.jsxs)(r.a,{children:[(0,y.jsx)(c.BR,{name:"moreThan1",label:"More Than",options:d.xP,onChange:E,data:A,col:1}),(0,y.jsx)(c.Bt,{name:"unitDiscount1",label:"Unit Discount",onChange:E,data:A,prefix:"$",col:2}),(null===A||void 0===A?void 0:A.wholesaleCost)&&(0,y.jsx)(c.ib,{label:"Markup",children:F(null===A||void 0===A?void 0:A.unitDiscount1)}),null!==A&&void 0!==A&&A.moreThan1?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.BR,{name:"moreThan2",label:"More Than",options:null===d.xP||void 0===d.xP?void 0:d.xP.filter((e=>(null===e||void 0===e?void 0:e.value)>(null===A||void 0===A?void 0:A.moreThan1))),onChange:E,data:A,col:1}),(0,y.jsx)(c.Bt,{name:"unitDiscount2",label:"Unit Discount",onChange:E,data:A,prefix:"$",col:2}),(null===A||void 0===A?void 0:A.wholesaleCost)&&(0,y.jsx)(c.ib,{label:"Markup",children:F(null===A||void 0===A?void 0:A.unitDiscount2)})]}):null,null!==A&&void 0!==A&&A.moreThan1&&null!==A&&void 0!==A&&A.moreThan2?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.BR,{name:"moreThan3",label:"More Than",options:null===d.xP||void 0===d.xP?void 0:d.xP.filter((e=>(null===e||void 0===e?void 0:e.value)>(null===A||void 0===A?void 0:A.moreThan2))),onChange:E,data:A,col:1}),(0,y.jsx)(c.Bt,{name:"unitDiscount3",label:"Unit Discount",onChange:E,data:A,prefix:"$",col:2}),(null===A||void 0===A?void 0:A.wholesaleCost)&&(0,y.jsx)(c.ib,{label:"Markup",children:F(null===A||void 0===A?void 0:A.unitDiscount3)})]}):null,(0,y.jsxs)(p.zp,{children:[(0,y.jsx)(p.Ay,{label:"Save",className:"mx-2",onClick:()=>V(""),loading:C}),(0,y.jsx)(p.Ay,{label:"Save & Next",className:"mx-2",onClick:()=>V("?tab=tracking"),loading:C}),(0,y.jsx)(p.Ti,{label:"Cancel",onClick:()=>l.goBack()})]})]})})]})};var C=n(9803),A=n(6595),w=n(8404);const S=e=>{let{editItem:t}=e;const n=(0,u.wA)(),o=(0,x.W6)(),{id:l}=(0,x.g)(),[s,m]=(0,i.useState)({requireCommission:"",commissionGroup:"",referralGroup:"",memberRequired:"",caseQuantity:"",vendor:"",trackingMinimumQuantity:"",trackingMaximumQuantity:"",recorderLevel:"",trackingAlternateVendors:"",time:new Date,note:"",alternateItem:""}),f=e=>{let{name:t,value:n}=e;const i=(0,v.A)(t,n,s);m((e=>(0,a.A)((0,a.A)({},e),{},{[t]:n,formErrors:i})))};(0,i.useEffect)((()=>{n((0,C.St)()),n((0,A.mB)()),n((0,w.YQ)())}),[n]);const{allCommissionGroups:g}=(0,u.d4)((e=>e.commissionGroup)),{allReferralGroups:j}=(0,u.d4)((e=>e.referralGroup));let S=null===g||void 0===g?void 0:g.map((e=>({name:e.name,value:e._id}))),P=j.map((e=>({name:e.name,value:e._id})));(0,i.useEffect)((()=>{t&&m({requireCommission:t.requireCommission,commissionGroup:t.commissionGroup,referralGroup:t.referralGroup,memberRequired:t.memberRequired,caseQuantity:t.caseQuantity,vendor:t.vendor,trackingMinimumQuantity:t.trackingMinimumQuantity,trackingMaximumQuantity:t.trackingMaximumQuantity,recorderLevel:t.recorderLevel,trackingAlternateVendors:t.trackingAlternateVendors,time:t.createdAt?new Date(t.createdAt):new Date,note:t.note,alternateItem:t.alternateItem})}),[t]);const{vendorsDropdown:D}=(0,u.d4)((e=>e.vendors)),{loading:T}=(0,u.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.loader)||void 0===t?void 0:t.isLoading})),R=e=>{(0,h.nV)(s,m,["commissionGroup"])&&l&&n((0,b.lf)(l,s,o,e))};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.Ay,{col:"12",title:"General",children:(0,y.jsxs)(r.a,{children:[(0,y.jsx)(c.BR,{name:"requireCommission",options:d.r4,onChange:f,data:s}),(0,y.jsx)(c.BR,{name:"commissionGroup",options:S,onChange:f,data:s,showClear:!0}),(0,y.jsx)(c.BR,{name:"referralGroup",options:P,onChange:f,data:s,showClear:!0})]})}),(0,y.jsx)(r.Ay,{col:"12",title:"Details",children:(0,y.jsxs)(r.a,{children:[(0,y.jsx)(c.BR,{name:"memberRequired",options:d.r4,onChange:f,data:s,col:4}),(0,y.jsx)(c.Bt,{name:"caseQuantity",onChange:f,data:s,col:4}),(0,y.jsx)(c.BR,{name:"vendor",options:D,onChange:f,data:s,col:4}),(0,y.jsx)(c.Bt,{name:"trackingMinimumQuantity",label:"Minimum Quantity",onChange:f,data:s,col:4}),(0,y.jsx)(c.Bt,{name:"trackingMaximumQuantity",label:"Maximum Quantity",onChange:f,data:s,col:4}),(0,y.jsx)(c.Bt,{name:"recorderLevel",onChange:f,data:s,col:4}),(0,y.jsx)(c.BR,{name:"trackingAlternateVendors",label:"Alternate Vendors",options:D,onChange:f,data:s,col:4}),(0,y.jsx)(c.wi,{name:"alternateItem",onChange:f,data:s,col:4}),(0,y.jsx)(c.wN,{name:"time",label:"Date Created",data:s,disabled:!0}),(0,y.jsx)(c.Ky,{name:"note",maxLength:"266",data:s,onChange:f,inputClass:"h-17rem"}),(0,y.jsxs)(p.zp,{children:[(0,y.jsx)(p.Ay,{label:"Save",className:"mx-2",onClick:()=>R(""),loading:T}),(0,y.jsx)(p.Ay,{label:"Save & Next",className:"mx-2",onClick:()=>R("?tab=usage"),loading:T}),(0,y.jsx)(p.Ti,{label:"Cancel",onClick:()=>o.goBack()})]})]})})]})};var P=n(6411),D=n(7602);const T=()=>{const[e,t]=(0,i.useState)(""),{id:n}=(0,x.g)(),o=(0,x.W6)(),[l,s]=(0,i.useState)([]),[m,v]=(0,i.useState)([]),[f,g]=(0,i.useState)([]),[j,C]=(0,i.useState)([]),[A,w]=(0,i.useState)([]),[S,T]=(0,i.useState)([]),[R,N]=(0,i.useState)(""),k=(0,u.wA)();(0,i.useEffect)((()=>{k((0,b.mP)())}),[k]);const{allCatalogItemsFilter:I,catalogTypeFilterItems:B}=(0,u.d4)((e=>e.catalogItems)),Q=(0,u.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.loader)||void 0===t?void 0:t.isLoading})),[E,V]=(0,i.useState)({checkInDeduction:!1}),O=[{selectionMode:"multiple",headerStyle:""},{field:"name",header:"Item Name"},{field:"upc",header:"Item UPC"},{field:"unitPrice",header:"Price"}],_=[{field:"name",header:"Item Name"},{field:"upc",header:"Item UPC"},{field:"unitPrice",header:"Price"}];(0,i.useEffect)((()=>{n&&k((0,b.zz)(n,(e=>{V({checkInDeduction:e.checkInDeduction}),C(e.paysTo),w(e.paysFor),T(e.bundleRecipe),N(e._id)})))}),[n,k]),(0,i.useEffect)((()=>{n&&("payTo"===e&&j?s(j):"payFor"===e&&A?v(A):"bundleRecipe"===e&&S&&g(S))}),[j,A,S,n,e]);const F=e=>{n&&k((0,b.ju)(n,{paysTo:(0,h.rO)(j),paysFor:(0,h.rO)(A),bundleRecipe:(0,h.rO)(S),checkInDeduction:E.checkInDeduction},o,e))},M=(e,t,n)=>{(0,h.QV)((()=>{"paysTo"===n?C(null===j||void 0===j?void 0:j.filter((e=>e._id!==(null===t||void 0===t?void 0:t._id)))):"paysFor"===n?w(null===A||void 0===A?void 0:A.filter((e=>e._id!==(null===t||void 0===t?void 0:t._id)))):"bundleRecipe"===n&&T(null===S||void 0===S?void 0:S.filter((e=>e._id!==(null===t||void 0===t?void 0:t._id))))}),"Do you want to delete this ".concat(n," ?"),"center")};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.BR,{name:"checkInDeduction",options:d.r4,onChange:e=>{let{name:t,value:n}=e;V((e=>(0,a.A)((0,a.A)({},e),{},{[t]:n})))},data:E}),(0,y.jsxs)(r.Ay,{col:"12",title:"Pays To",children:[(0,y.jsx)(r.Fq,{buttonTitle:"Add",onClick:()=>t("payTo"),extraClass:"justify-content-end gap-2",children:(0,y.jsx)("div",{children:(0,y.jsx)(p.Ay,{label:"Remove All",onClick:()=>{C([])}})})}),(0,y.jsx)(D.A,{data:j,columns:_,showSelectionElement:!1,onDelete:e=>M(0,e,"paysTo")})]}),(0,y.jsxs)(r.Ay,{col:"12",title:"Pays For",children:[(0,y.jsx)(r.Fq,{buttonTitle:"Add",onClick:()=>t("payFor"),extraClass:"justify-content-end gap-2",children:(0,y.jsx)("div",{children:(0,y.jsx)(p.Ay,{label:"Remove All",onClick:()=>{w([])}})})}),(0,y.jsx)(D.A,{data:A,columns:_,onDelete:e=>M(0,e,"paysFor")})]}),(0,y.jsxs)(r.Ay,{col:"12",title:"Bundle/Recipe",children:[(0,y.jsx)(r.Fq,{buttonTitle:"Add",onClick:()=>t("bundleRecipe"),extraClass:"justify-content-end gap-2",children:(0,y.jsx)("div",{children:(0,y.jsx)(p.Ay,{label:"Remove All",onClick:()=>{T([])}})})}),(0,y.jsx)(D.A,{data:S,columns:_,onDelete:e=>M(0,e,"bundleRecipe")}),(0,y.jsxs)(p.zp,{children:[(0,y.jsx)(p.Ay,{label:"Save",className:"mx-2",onClick:()=>F(""),loading:Q}),(0,y.jsx)(p.Ay,{label:"Save & Next",className:"mx-2",onClick:()=>F("?tab=variations"),loading:Q}),(0,y.jsx)(p.Ti,{label:"Cancel",onClick:()=>o.goBack()})]})]}),(0,y.jsx)(P.A,{title:"Add Services",visible:e,onCancel:()=>{t("")},loading:Q,onSave:()=>{"payTo"===e?(C(l),t(""),s("")):"payFor"===e?(w(m),t(""),v("")):"bundleRecipe"===e&&(T(f),t(""),v(""))},width:"auto",children:(0,y.jsxs)(r.a,{children:["payTo"===e&&(0,y.jsx)(D.A,{convertToboolean:!1,data:"payTo"===e&&B,columns:O,selectedRow:l,setSelectedRow:s}),"payFor"===e&&(0,y.jsx)(D.A,{data:"payFor"===e&&B,columns:O,selectedRow:m,convertToboolean:!1,setSelectedRow:v}),"bundleRecipe"===e&&(0,y.jsx)(D.A,{convertToboolean:!1,data:I,columns:O,selectedRow:f,setSelectedRow:g})]})})]})},R=e=>{let{visible:t,setOpen:n,setVariationId:o,variationId:l,catalogId:s,catelogItem:d}=e;const m=(0,u.wA)(),[p,x]=(0,i.useState)({variationName:"",subVariations:[]}),f=()=>{n(!1),o(""),x({variationName:"",subVariations:[]})},g=(0,i.useRef)([]);(0,i.useEffect)((()=>{d&&x({variationName:"",subVariations:[],upc:d.upc,sku:1,taxable:!0,netPrice:d.netPrice,minimumQuantity:d.minimumQuantity,maximumQuantity:d.maximumQuantity,wholesaleCost:d.wholesaleCost,defaultQuantity:d.defaultQuantity})}),[d]);const j=e=>{let{name:t,value:n}=e;const i=(0,v.A)(t,n,p);x((e=>(0,a.A)((0,a.A)({},e),{},{[t]:n,formErrors:i})))};(0,i.useEffect)((()=>{l&&m((0,b.Br)(l,(e=>{var t;const n=(null===(t=e.subVariation)||void 0===t?void 0:t.map((e=>e.subVariation)))||[];g.current=n,x((t=>(0,a.A)((0,a.A)({},t),{},{variationName:e.variationName,subVariations:n})))})))}),[l,m]);const C=(0,u.d4)((e=>e.loader.isLoading));return(0,y.jsx)(P.A,{title:l?"Edit Variations":"Add Variations",visible:t,onCancel:f,loading:C,onSave:()=>{if(s&&(0,h.nV)(p,x)){p.subVariations=p.subVariations.filter((e=>{var t;return!(null!==(t=g.current)&&void 0!==t&&t.includes(e))}))||[];const e=(0,a.A)((0,a.A)({},p),{},{_id:l});m((0,b.FM)(s,e,(()=>{f(),x((0,a.A)((0,a.A)({},p),{},{variationName:"",subVariations:[]})),m((0,b._w)(s))})))}},children:(0,y.jsxs)(r.a,{children:[(0,y.jsx)(c.wi,{name:"variationName",col:12,data:p,onChange:j}),(0,y.jsx)(c.ae,{data:p,name:"subVariations",onChange:j,col:12})]})})};var N=n(5150),k=n(3428),I=n(9642),B=n(2052),Q=n(788),E=n(2392);const V=e=>{let{editItem:t}=e;const n=(0,u.wA)(),[o,l]=(0,i.useState)(!1),[s,d]=(0,i.useState)(null),{id:m}=(0,x.g)();(0,i.useEffect)((()=>{n((0,b._w)(m))}),[n,m]);const p=(0,u.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.catalogItems)||void 0===t?void 0:t.allCategoryVariations}));(0,i.useEffect)((()=>{g(p)}),[p]);const v=e=>(0,y.jsxs)("div",{className:"flex align-items-center justify-content-between gap-2 w-full ml-auto",children:[(0,y.jsx)("div",{children:e.variationName}),(0,y.jsxs)("div",{className:"flex gap-3 mr-3",children:[(0,y.jsx)("i",{className:"pi pi-pencil",onClick:()=>{l(!0),d(e._id)}}),(0,y.jsx)("i",{className:"pi pi-trash",onClick:()=>(0,h.QV)((()=>{n((0,b.Jm)(e._id,(()=>{n((0,b._w)(m))})))}),"Do you want to delete this Variation?")})]})]}),[f,g]=(0,i.useState)([]),j=e=>{const{newData:t}=e;t.upc?n((0,b.Ln)(t._id,(0,a.A)({subVariation:t.subVariation},t),(()=>{n((0,b._w)(m))}))):n((0,E.P)({severity:"error",summary:"UPC is required"}))},C=e=>(0,y.jsx)(Q.Y,{value:e.value,onValueChange:t=>e.editorCallback(t.value),mode:"currency",currency:"USD",locale:"en-US",maxFractionDigits:4,useGrouping:!1}),A=e=>(0,y.jsx)(Q.Y,{value:e.value,onValueChange:t=>((e,t)=>{t.editorCallback(e.value)})(t,e),maxFractionDigits:4,useGrouping:!1}),w=e=>(0,y.jsx)(c.ZD,{value:e.taxable}),S=(e,t)=>(0,y.jsx)("i",{className:" cursor-pointer pi pi-trash",onClick:()=>(0,h.QV)((()=>{n((0,b.m7)(e._id,(()=>{n((0,b._w)(m))})))}),"Do you want to delete this Variation?",t)}),P=(0,i.useCallback)((e=>{}),[]);return(0,y.jsxs)(r.Ay,{col:"12",title:"All Variations",children:[(0,y.jsx)(r.oU,{buttonTitle:"Add",onClick:()=>l(!0)}),(0,y.jsx)(R,{visible:o,setOpen:l,setVariationId:d,variationId:s,catalogId:m,catelogItem:t}),(null===f||void 0===f?void 0:f.length)>0&&(null===f||void 0===f?void 0:f.map(((e,t)=>(0,y.jsx)(N.A,{isActive:!0,extraClassName:"employee-accordion w-full",title:v(e),children:(0,y.jsxs)(k.b,{value:null===e||void 0===e?void 0:e.subVariations,editMode:"row",dataKey:"_id",onRowEditComplete:j,tableStyle:{minWidth:"50rem"},children:[(0,y.jsx)(I.V,{field:"subVariation",header:"Sub Variation",editor:e=>(e=>(0,y.jsx)(B.S,{type:"text",value:e.value,onChange:t=>e.editorCallback(t.target.value)}))(e)}),(0,y.jsx)(I.V,{field:"sku",header:"Sku",editor:e=>A(e)}),(0,y.jsx)(I.V,{field:"upc",header:"UPC",editor:e=>A(e)}),(0,y.jsx)(I.V,{field:"netPrice",header:"Net Price",editor:e=>C(e)}),(0,y.jsx)(I.V,{field:"netPrice",header:"Markup Price",body:P}),(0,y.jsx)(I.V,{field:"minimumQuantity",header:"Min. Quantity",editor:e=>A(e)}),(0,y.jsx)(I.V,{field:"maximumQuantity",header:"Max. Quantity",editor:e=>A(e)}),(0,y.jsx)(I.V,{field:"defaultQuantity",header:"Default Quantity",editor:e=>A(e)}),(0,y.jsx)(I.V,{field:"wholesaleCost",header:"WholeSale Cost",editor:e=>C(e)}),(0,y.jsx)(I.V,{field:"reorderQuantity",header:"Reorder Quantity",editor:e=>A(e)}),(0,y.jsx)(I.V,{field:"taxable",body:w,header:"Taxable",editor:e=>(e=>(0,y.jsx)(c.ZD,{value:e.value,onChange:t=>e.editorCallback(t.value)}))(e)}),(0,y.jsx)(I.V,{header:"Actions",rowEditor:!0,bodyStyle:{textAlign:"center"}}),(0,y.jsx)(I.V,{body:S})]})},e._id))))]})};var O=n(8056),_=n(5670),F=n(8339),M=n(3208),q=n(7476),U=n(8691);const G=()=>{const e=(0,u.wA)(),{id:t}=(0,x.g)(),[n,r]=(0,i.useState)(null);(0,i.useEffect)((()=>{t&&e((0,b.R0)(t,(e=>{r((0,a.A)((0,a.A)({},e),{},{catalogImage:e.catalogImage?[e.catalogImage]:[]}))})))}),[t,e]),(0,i.useEffect)((()=>{e((0,q.l2)()),e((0,F.bW)()),e((0,O.Km)()),e((0,_.zN)()),e((0,M.G_)()),e((0,U.Q2)())}),[e]);const s=[{title:"General",content:(0,y.jsx)(j,{editItem:n})},{title:"Tracking",content:(0,y.jsx)(S,{editItem:n})},{title:"Usage",content:(0,y.jsx)(T,{editItem:n})},{title:"Variations",content:(0,y.jsx)(V,{editItem:n})}];return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(l.A,{backText:"Catalog Items",children:(0,y.jsx)(o.A,{tabs:s,disabledTabIndices:t?[]:[1,2,3]})})})}}}]);
//# sourceMappingURL=104.312d89eb.chunk.js.map