"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[674],{4674:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});var a=n(5043),r=n(5050),o=n(5378),l=n(6038),s=n(8945),i=n(1688),u=n(2399),c=n(9456),d=n(8110),m=n(1221),p=n(7374),g=n(7994),f=n(438),b=n(6911),h=n(7545),v=n(8701),y=n(2028),C=n(4504),x=n(1828),E=n(4052);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function w(e){var t=function(e,t){if("object"!==j(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==j(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===j(t)?t:String(t)}var O=x.x.extend({defaultProps:{__TYPE:"Editor",id:null,value:null,style:null,className:null,placeholder:null,readOnly:!1,modules:null,formats:null,theme:"snow",showHeader:!0,headerTemplate:null,onTextChange:null,onSelectionChange:null,onLoad:null,maxLength:null,children:void 0}});function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){var a,r,o;a=e,r=t,o=n[t],(r=w(r))in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(){try{return Quill}catch(e){return null}}(),S=a.memo(a.forwardRef((function(e,t){var r=a.useContext(E.UM),o=O.getProps(e,r),l=O.setMetaData({props:o}).ptm,s=a.useRef(null),i=a.useRef(null),u=a.useRef(null),c=a.useRef(null),d=a.useRef(!1);(0,y.uU)((function(){if(!d.current){var e={modules:T({toolbar:!!o.showHeader&&u.current},o.modules),placeholder:o.placeholder,readOnly:o.readOnly,theme:o.theme,formats:o.formats};N?(c.current=new Quill(i.current,e),m(),c.current&&c.current.getModule("toolbar")&&o.onLoad&&o.onLoad(c.current)):n.e(175).then(n.t.bind(n,4175,23)).then((function(t){t&&C.DV.isExist(i.current)&&(t.default?c.current=new t.default(i.current,e):c.current=new t(i.current,e),m())})).then((function(){c.current&&c.current.getModule("toolbar")&&o.onLoad&&o.onLoad(c.current)})),d.current=!0}}));var m=function(){o.value&&c.current.setContents(c.current.clipboard.convert(o.value)),c.current.on("text-change",(function(e,t,n){var a=i.current.children[0],r=a?a.innerHTML:null,l=c.current.getText();if("<p><br></p>"===r&&(r=null),"api"===n){var s=i.current.children[0],u=document.createElement("div");if(u.innerHTML=o.value||"",C.DV.isEqualElement(s,u))return}if(o.maxLength){var d=c.current.getLength();d>o.maxLength&&c.current.deleteText(o.maxLength,d)}o.onTextChange&&o.onTextChange({htmlValue:r,textValue:l,delta:e,source:n})})),c.current.on("selection-change",(function(e,t,n){o.onSelectionChange&&o.onSelectionChange({range:e,oldRange:t,source:n})}))};(0,y.w5)((function(){c.current&&!c.current.hasFocus()&&(o.value?c.current.setContents(c.current.clipboard.convert(o.value)):c.current.setText(""))}),[o.value]),a.useImperativeHandle(t,(function(){return{props:o,getQuill:function(){return c.current},getElement:function(){return s.current},getContent:function(){return i.current},getToolbar:function(){return u.current}}}));var p=(0,C.xW)("p-component p-editor-container",o.className),g=function(){var e=(0,C.v6)({ref:u,className:"p-editor-toolbar"},l("toolbar"));if(!1===o.showHeader)return null;if(o.headerTemplate)return a.createElement("div",e,o.headerTemplate);var t=function(e,t){return(0,C.v6)(e&&T({},e),l(t))},n=(0,C.v6)({className:"ql-formats"},l("formats"));return a.createElement("div",e,a.createElement("span",n,a.createElement("select",t({className:"ql-header",defaultValue:"0"},"select"),a.createElement("option",t({value:"1"},"option"),"Heading"),a.createElement("option",t({value:"2"},"option"),"Subheading"),a.createElement("option",t({value:"0"},"option"),"Normal")),a.createElement("select",t({className:"ql-font"},"select"),a.createElement("option",t(void 0,"option")),a.createElement("option",t({value:"serif"},"option")),a.createElement("option",t({value:"monospace"},"option")))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-bold","aria-label":"Bold"},"button")),a.createElement("button",t({type:"button",className:"ql-italic","aria-label":"Italic"},"button")),a.createElement("button",t({type:"button",className:"ql-underline","aria-label":"Underline"},"button"))),a.createElement("span",n,a.createElement("select",t({className:"ql-color"},"select")),a.createElement("select",t({className:"ql-background"},"select"))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"},"button")),a.createElement("button",t({type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"},"button")),a.createElement("select",t({className:"ql-align"},"select"),a.createElement("option",t({defaultValue:!0},"option")),a.createElement("option",t({value:"center"},"option")),a.createElement("option",t({value:"right"},"option")),a.createElement("option",t({value:"justify"},"option")))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-link","aria-label":"Insert Link"},"button")),a.createElement("button",t({type:"button",className:"ql-image","aria-label":"Insert Image"},"button")),a.createElement("button",t({type:"button",className:"ql-code-block","aria-label":"Insert Code Block"},"button"))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-clean","aria-label":"Remove Styles"},"button"))))}(),f=(0,C.v6)({ref:i,className:"p-editor-content",style:o.style},l("content")),b=a.createElement("div",f),h=(0,C.v6)({id:o.id,ref:s,className:p},O.getOtherProps(o),l("root"));return a.createElement("div",h,g,b)})));S.displayName="Editor";var q=n(3631),A=n(579);const D=e=>{let{name:t,data:n,value:a,onTextChange:r,height:o="320px",inputClass:l,col:s=12,label:i,required:u,extraClassName:c,errorMessage:d}=e;return(0,A.jsx)(q.A,{col:s,label:i,name:t,required:u,extraClassName:c,data:n,errorMessage:d,children:(0,A.jsx)("div",{className:"custom-editor",children:(0,A.jsx)(S,{value:a||(null===n||void 0===n?void 0:n[t]),onTextChange:e=>r&&r({...e,name:t,value:e.htmlValue}),style:{height:o},className:"w-full ".concat(l||""," ").concat(d?"p-invalid":"")})})})};var R=n(1830),_=n(2920);const B=()=>{const e=(0,i.W6)(),t=(0,c.wA)(),{id:n}=(0,i.g)(),y=(0,c.d4)((e=>e.loader.isLoading)),[C,x]=(0,a.useState)({category:"",subCategory:"",club:"",name:"",membershipType:"",agreementTemplate:"",assessedFee:[],services:[],autoPay:"",oftenClientCharged:"",timePeriod:0,noOfAutopays:"",whenClientCharged:"",date:"",afterSixPayments:"",sellOnline:"",onlineDescription:""});(0,a.useEffect)((()=>{t((0,u.TX)()),t((0,d.aM)()),t((0,m.i4)()),t((0,h.eA)())}),[t]),(0,a.useEffect)((()=>{t((0,f.eO)()),localStorage.removeItem("gjsProject")}),[t]);const{allAssessedFeesDropdown:E}=(0,c.d4)((e=>e.assessedFees)),{allAgreementTemplatesDropdown:j}=(0,c.d4)((e=>e.agreement));let{agreementCategoryDropdown:w,agreementSubCategoryDropdown:O,allAgreementCategories:P}=(0,c.d4)((e=>e.agreement));const[T,N]=(0,a.useState)([]),{clubsDropdown:S}=(0,c.d4)((e=>e.clubs)),{MembershipTypesDropdown:q}=(0,c.d4)((e=>e.membershipTypes)),B=e=>{let{name:t,value:n}=e;const a=(0,l.A)(t,n,C);if("category"===t){var r,o;x((e=>({...e,[t]:n,formErrors:a})));const e=(null===(r=P.find((e=>e._id===n)))||void 0===r||null===(o=r.subCategories)||void 0===o?void 0:o.map((e=>({name:e,value:e}))))||[];N(e),console.log(e,"subcategory")}x((e=>({...e,[t]:n,formErrors:a})))};return(0,a.useEffect)((()=>{n&&t((0,_.gZ)(n,(e=>{x({category:e.category,subCategory:e.subCategory,club:e.club,name:e.name,membershipType:e.membershipType,agreementTemplate:e.agreementTemplate,assessedFee:e.assessedFee,services:e.services,autoPay:e.autoPay,oftenClientCharged:e.oftenClientCharged,timePeriod:e.timePeriod,noOfAutopays:e.noOfAutopays,whenClientCharged:e.whenClientCharged,date:e.date,afterSixPayments:e.afterSixPayments,sellOnline:e.sellOnline,onlineDescription:e.onlineDescription})})))}),[n,t]),(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)(r.A,{backText:"Agreement Plan",children:[(0,A.jsx)(o.Ay,{col:"12",title:"General",children:(0,A.jsxs)(o.a,{children:[(0,A.jsx)(s.BR,{name:"category",options:w,onChange:B,data:C,required:!0}),(0,A.jsx)(s.BR,{name:"subCategory",options:T,onChange:B,data:C,required:!0}),(0,A.jsx)(s.wi,{name:"name",data:C,onChange:B,required:!0}),(0,A.jsx)(s.BR,{name:"club",options:S,onChange:B,data:C,required:!0}),(0,A.jsx)(s.BR,{name:"membershipType",options:q,onChange:B,data:C,required:!0}),(0,A.jsx)(s.BR,{name:"agreementTemplate",options:j,onChange:B,data:C})]})}),(0,A.jsx)(o.Ay,{col:"12",title:"Assessed Fees",children:(0,A.jsx)(b.A,{name:"assessedFee",selected:null===C||void 0===C?void 0:C.assessedFee,sourceData:E,onPickListChange:B})}),(0,A.jsx)(v.A,{data:C,setData:x,id:n,loading:y}),(0,A.jsx)(o.Ay,{col:"12",title:"Contract Options",children:(0,A.jsxs)(o.a,{children:[(0,A.jsx)(s.BR,{name:"autoPay",options:p.iB,onChange:B,data:C}),"set_schedule"===(null===C||void 0===C?void 0:C.autoPay)&&(0,A.jsx)(s.BR,{name:"oftenClientCharged",label:"How Often will Clients Be Charged",options:p.eH,onChange:B,data:C}),(null===C||void 0===C?void 0:C.autoPay)&&(0,A.jsx)(s.Bt,{name:"timePeriod",data:C,onChange:B,col:"4",suffix:"Month"}),"no_of_autopays"===(null===C||void 0===C?void 0:C.oftenClientCharged)&&(0,A.jsx)(s.wi,{name:"noOfAutopays",label:"Number of AutoPays",data:C,onChange:B,col:"4",keyfilter:"int"}),"set_schedule"===(null===C||void 0===C?void 0:C.autoPay)&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.BR,{name:"whenClientCharged",label:"When will Clients Be Charged",options:p.Yl,onChange:B,data:C}),"specific_date"===(null===C||void 0===C?void 0:C.whenClientCharged)&&(0,A.jsx)(s.wN,{name:"date",data:C,onChange:B}),"no_of_autopays"===(null===C||void 0===C?void 0:C.oftenClientCharged)&&(0,A.jsx)(s.BR,{name:"afterSixPayments",label:" What happens after ".concat(null===C||void 0===C?void 0:C.noOfAutopays," payments"),options:p.Ol,onChange:B,data:C})]}),("pricing_options_run_out"===(null===C||void 0===C?void 0:C.autoPay)||"set_schedule"===(null===C||void 0===C?void 0:C.autoPay))&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(s.BR,{name:"sellOnline",options:p.r4,onChange:B,data:C}),"true"===(null===C||void 0===C?void 0:C.sellOnline)&&(0,A.jsx)(D,{name:"onlineDescription",onTextChange:B,data:C})]})]})}),(0,A.jsxs)(g.zp,{children:[(0,A.jsx)(g.Ay,{label:"Save",className:"mx-2",onClick:()=>{(0,R.nV)(C,x)&&t(n?(0,_.Y2)(n,C,e):(0,_.Rd)(C,e))},loading:y}),(0,A.jsx)(g.Ti,{label:"Cancel",onClick:()=>e.goBack()})]})]})})}}}]);
//# sourceMappingURL=674.9b0eb128.chunk.js.map