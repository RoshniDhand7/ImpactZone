"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[975],{7931:(e,a,t)=>{t.d(a,{Xs:()=>d,bV:()=>E,br:()=>f,gc:()=>u,kx:()=>p,m6:()=>m,mp:()=>A});var i=t(9379),c=t(6305),s=t(5659),n=t(346),r=t(7504),o=t(2392),l=t(3335);const d=(e,a)=>async t=>{a&&a(!0);const i={employee:e},r=await(0,c.A)("get",s.A.MANAGE_EMPLOYEE_CERTIFICATES,{},i);r.success&&r.data&&t({type:n.g.CHANGE_MANAGE_EMPLOYEE_CERTIFICATES,payload:r.data}),a&&a(!1)},m=function(e,a,t){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return async r=>{var d;if(a(!0),null!==(d=e.certificate)&&void 0!==d&&d.length){let a=await(0,l.Zn)(e.certificate);e.certificate=a[0].path,e.certificateName=a[0].originalname,e.certificateSize=a[0].size}else e.certificate="";const m=(0,i.A)((0,i.A)({},e),{},{acquiredDate:(0,l.KH)(null===e||void 0===e?void 0:e.acquiredDate),expirationDate:(0,l.KH)(e.expirationDate)}),u=await(0,c.A)("post",s.A.MANAGE_EMPLOYEE_CERTIFICATES,m);u.success&&(n?t.replace("/settings/employee/manage-employee/edit/".concat(u.data._id,"/").concat(n)):t.goBack(),r((0,o.P)({severity:"success",summary:u.message}))),a(!1)}},u=(e,a)=>async t=>{t((0,r.rb)());const i=await(0,c.A)("get",s.A.MANAGE_EMPLOYEE_CERTIFICATES+e);i.success&&i.data&&a&&a(i.data),t((0,r.iG)())},f=function(e,a,t,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return async d=>{var m;if(t(!0),null!==(m=a.certificate)&&void 0!==m&&m.length){let e=await(0,l.Zn)(a.certificate);a.certificate=e[0].path,a.certificateName=e[0].originalname,a.certificateSize=e[0].size}else a.certificate="";const u=(0,i.A)((0,i.A)({},a),{},{acquiredDate:(0,l.KH)(null===a||void 0===a?void 0:a.acquiredDate),expirationDate:(0,l.KH)(null===a||void 0===a?void 0:a.expirationDate)}),f=await(0,c.A)("put",s.A.MANAGE_EMPLOYEE_CERTIFICATES+e,u);f.success&&(r?n.replace("/settings/employee/manage-employee/edit/".concat(f.data._id,"/").concat(r)):n.goBack(),d((0,o.P)({severity:"success",summary:f.message}))),t(!1)}},A=(e,a)=>async t=>{const i=await(0,c.A)("delete",s.A.MANAGE_EMPLOYEE_CERTIFICATES+e);i.success?(t((0,o.P)({severity:"success",summary:i.message})),a()):t((0,o.P)({severity:"error",summary:i.message}))},p=(e,a,t)=>async i=>{a&&a(!0);const n=await(0,c.A)("get",s.A.NOTES,"",{employee:e});n.success&&n.data&&t&&t(n.data),a&&a(!1)},E=(e,a,t)=>async i=>{a(!0);const n=await(0,c.A)("post",s.A.NOTES,e);n.success?(i((0,o.P)({severity:"success",summary:n.message})),t()):i((0,o.P)({severity:"error",summary:n.message})),a(!1)}},8975:(e,a,t)=>{t.r(a),t.d(a,{default:()=>A});var i=t(9379),c=t(5043),s=t(5050),n=t(3549),r=t(4572),o=t(9456),l=t(1688),d=t(7994),m=t(7931),u=t(6548),f=t(579);const A=()=>{const{id:e,employeeId:a}=(0,l.g)(),t=(0,o.wA)(),A=(0,l.W6)(),[p,E]=(0,c.useState)({name:"",certificationNumber:"",issuer:"",acquiredDate:"",expirationDate:"",certificate:[],employee:"",certificateSize:"",certificateName:""});(0,c.useEffect)((()=>{e?t((0,m.gc)(e,(e=>{E({name:e.name,certificationNumber:e.certificationNumber,issuer:e.issuer,acquiredDate:e.acquiredDate?new Date:"",expirationDate:e.expirationDate?new Date:"",certificate:e.certificate?[e.certificate]:[],description:e.description,employee:a,certificateName:null!==e&&void 0!==e&&e.certificateName?null===e||void 0===e?void 0:e.certificateName:"",certificateSize:null!==e&&void 0!==e&&e.certificateSize?null===e||void 0===e?void 0:e.certificateSize:""})}))):E((0,i.A)((0,i.A)({},p),{},{employee:a}))}),[e,t]);const[g,y]=(0,c.useState)(!1),v=e=>{let{name:a,value:t}=e;E((e=>(0,i.A)((0,i.A)({},e),{},{[a]:t})))};return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)(s.A,{backText:"Certifications",children:[(0,f.jsx)(n.Ay,{col:"12",title:"Personal",children:(0,f.jsxs)(n.a,{children:[(0,f.jsx)(r.wi,{name:"name",data:p,onChange:v}),(0,f.jsx)(r.wi,{name:"certificationNumber",data:p,onChange:v}),(0,f.jsx)(r.wi,{name:"issuer",data:p,onChange:v}),(0,f.jsx)(r.wN,{name:"acquiredDate",data:p,onChange:v}),(0,f.jsx)(r.wN,{name:"expirationDate",data:p,onChange:v}),(0,f.jsx)(r.Ky,{name:"description",data:p,onChange:v}),(0,f.jsx)(u.A,{data:p,onFilesChange:v,name:"certificate",label:"Upload Certificate",accept:"image/*,.pdf",disabled:!1,col:"6",uploadType:"Image/Pdf",originalName:null===p||void 0===p?void 0:p.certificateName,fileSize:p.certificateSize})]})}),(0,f.jsxs)(d.zp,{children:[(0,f.jsx)(d.Ay,{label:"Save",className:"mx-2",loading:g,onClick:()=>{t(e?(0,m.br)(e,p,y,A):(0,m.m6)(p,y,A))}}),(0,f.jsx)(d.Ti,{label:"Cancel",onClick:()=>A.replace("/settings/employee")})]})]})})}}}]);
//# sourceMappingURL=975.0339693c.chunk.js.map