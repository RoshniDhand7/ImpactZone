"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[104],{5150:(e,t,n)=>{n.d(t,{A:()=>A});var a=n(5043),i=n(4052),o=n(3316),l=n(2028),r=n(4504),s=n(1828),c=n(2370),d=n(5154);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function m(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function p(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function h(e){var t=function(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==x(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===x(t)?t:String(t)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,i,o,l,r=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(a=o.call(n)).done)&&(r.push(a.value),r.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(c)throw i}}return r}}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var f=s.x.extend({defaultProps:{__TYPE:"Accordion",id:null,activeIndex:null,className:null,style:null,multiple:!1,expandIcon:null,collapseIcon:null,transitionOptions:null,onTabOpen:null,onTabClose:null,onTabChange:null,children:void 0}}),g=s.x.extend({defaultProps:{__TYPE:"AccordionTab",className:null,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,style:null,tabIndex:0,children:void 0},getCProp:function(e,t){return r.BF.getComponentProp(e,t,g.defaultProps)},getCProps:function(e){return r.BF.getComponentProps(e,g.defaultProps)},getCOtherProps:function(e){return r.BF.getComponentDiffProps(e,g.defaultProps)}});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){var a,i,o;a=e,i=t,o=n[t],(i=h(i))in a?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(){},C=a.forwardRef((function(e,t){var n=a.useContext(i.UM),s=f.getProps(e,n),u=v(a.useState(s.id),2),m=u[0],x=u[1],h=v(a.useState(s.activeIndex),2),y=h[0],j=h[1],C=a.useRef(null),w=s.onTabChange?s.activeIndex:y,A={props:s,state:{id:m,activeIndex:y}},S=f.setMetaData(b({},A)),P=S.ptm,D=S.ptmo,T=function(e,t){return D(R(e,"pt"),t,{props:e.props,parent:A})},R=function(e,t){return g.getCProp(e,t)},N=function(e){return s.multiple?w&&w.some((function(t){return t===e})):w===e};if(a.useImperativeHandle(t,(function(){return{props:s,getElement:function(){return C.current}}})),(0,l.uU)((function(){m||x((0,r._Y)())})),!m)return null;var k=function(e,t,n){var o=b(b({},R(e,"style")||{}),R(e,"headerStyle")||{}),l=(0,r.xW)("p-accordion-header",{"p-highlight":t,"p-disabled":R(e,"disabled")},R(e,"headerClassName"),R(e,"className")),u=m+"_header_"+n,x=m+"_content_"+n,h=R(e,"disabled")?-1:R(e,"tabIndex"),v=(0,r.v6)({className:"p-accordion-header-text"},T(e,"headertitle")),f=R(e,"headerTemplate")?r.BF.getJSXElement(R(e,"headerTemplate"),g.getCProps(e)):a.createElement("span",v,R(e,"header")),y=(0,r.v6)({className:"p-accordion-toggle-icon"},T(e,"headericon")),C=t?s.collapseIcon||a.createElement(d.D,y):s.expandIcon||a.createElement(c.v,y),A=r.Hj.getJSXIcon(C,b({},y),{props:s,selected:t}),S=t?(0,i.Y4)("collapseLabel"):(0,i.Y4)("expandLabel"),P=(0,r.v6)({className:l,style:o},T(e,"header")),D=(0,r.v6)({id:u,href:"#"+x,className:"p-accordion-header-link",role:"tab",tabIndex:h,onClick:function(t){return function(e,t,n){if(!R(t,"disabled")){var a=N(n),i=null;if(s.multiple){var o=w||[];i=a?o.filter((function(e){return e!==n})):[].concat(p(o),[n])}else i=a?null:n;var l=a?s.onTabClose:s.onTabOpen;l&&l({originalEvent:e,index:n}),s.onTabChange?s.onTabChange({originalEvent:e,index:i}):j(i)}e.preventDefault()}(t,e,n)},"aria-label":S,"aria-controls":x,"aria-expanded":t},T(e,"headeraction"));return a.createElement("div",P,a.createElement("a",D,A,f))},I=function(e,t){if(r.BF.isValidChild(e,"AccordionTab")){var n=m+"_"+t,i=N(t),l=k(e,i,t),c=function(e,t,n){var i=b(b({},R(e,"style")||{}),R(e,"contentStyle")||{}),l=(0,r.xW)("p-toggleable-content",R(e,"contentClassName"),R(e,"className")),c=m+"_content_"+n,d=m+"_header_"+n,u=a.createRef(),p=(0,r.v6)({id:c,ref:u,className:l,style:i,role:"region","aria-labelledby":d},T(e,"toggleablecontent")),x=(0,r.v6)({className:"p-accordion-content"},T(e,"content"));return a.createElement(o.B,{nodeRef:u,classNames:"p-toggleable-content",timeout:{enter:1e3,exit:450},in:t,unmountOnExit:!0,options:s.transitionOptions},a.createElement("div",p,a.createElement("div",x,R(e,"children"))))}(e,i,t),d=(0,r.xW)("p-accordion-tab",{"p-accordion-tab-active":i}),u=(0,r.v6)({key:n,className:d},g.getCOtherProps(e),T(e,"root"));return a.createElement("div",u,l,c)}return null},B=(0,r.xW)("p-accordion p-component",s.className),Q=a.Children.map(s.children,I),E=(0,r.v6)({id:m,ref:C,className:B,style:s.style},f.getOtherProps(s),P("root"));return a.createElement("div",E,Q)}));j.displayName="AccordionTab",C.displayName="Accordion";var w=n(579);function A(e){let{children:t,contentclassname:n,isActive:i,extraClassName:o,title:l,col:r=12}=e;const[s,c]=(0,a.useState)(0);return(0,a.useEffect)((()=>{c(i?0:null)}),[i]),(0,w.jsx)(C,{onTabChange:e=>c(e.index),activeIndex:s,col:r,contentclassname:n,className:"custom-accordion border-none my-2 ".concat(o),children:(0,w.jsx)(j,{header:l,className:o,col:r,children:t})})}},5090:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(5043),i=n(6796),o=n(8702),l=n(3631),r=n(579);const s=e=>{let{label:t,name:n,onFilesChange:s,errorMessage:c,extraClassName:d,value:u,data:m,col:p,required:x,imgclass:h,removeable:v,editable:f,uploadboxclass:g,uploadIcon:y,disabled:b=!1,...j}=e;const[C,w]=(0,a.useState)(u||(null===m||void 0===m?void 0:m[n])||[]);(0,a.useEffect)((()=>{(u||null!==m&&void 0!==m&&m[n])&&JSON.stringify(u||(null===m||void 0===m?void 0:m[n]))!==JSON.stringify(C)&&w(u||(null===m||void 0===m?void 0:m[n]))}),[u||(null===m||void 0===m?void 0:m[n])]),(0,a.useEffect)((()=>{s?C.length&&s({name:n,value:C}):s({name:n,value:[]})}),[C,n]);const A=e=>{let t=[];e.forEach((e=>{-1===C.findIndex((t=>t.name===e.name))&&t.push(e)})),w([...t])};return(0,r.jsxs)(l.A,{col:p||12,label:t,name:n,required:x,extraClassName:d,data:m,errorMessage:c,children:[(0,r.jsx)("input",{type:"file",className:" ",name:n,onChange:e=>{const t=e.target.files;A(Object.values(t)),e.target.value=""},id:n,accept:".jpg, .jpeg, .png,.jfif",hidden:!0,...j}),C.length?Object.values(C).map(((e,t)=>(0,r.jsxs)("div",{className:"photoDiv",children:[v&&(0,r.jsx)("i",{onClick:()=>(e=>{const t=C.filter(((t,n)=>n!==e));w([...t]),s({name:n,value:[]})})(t),className:"pi pi-times cursor-pointer"}),(0,r.jsx)("img",{src:e?"string"===typeof e?(0,o.b)(e):URL.createObjectURL(e):i,onError:e=>e.target.src=(0,o.N)(),alt:"pic",className:"profile-img relative btn-border-color ".concat(h),accept:".jpg, .jpeg, .png, .jfif"})]},t))):(0,r.jsx)("div",{className:"photo-upload flex justify-content-center align-items-center",style:{height:"95px",width:"90px"},children:(0,r.jsx)("label",{htmlFor:n,children:(0,r.jsx)("img",{className:"w-full h-full fit-cover",style:{width:"50px"},src:i,onError:e=>e.target.src=(0,o.N)(),alt:"",accept:".jpg, .jpeg, .png"})})})]})}},2104:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(5043),i=n(6443),o=n(5050),l=n(3549),r=n(5090),s=n(666),c=n(7374),d=n(9456),u=n(6911),m=n(7994),p=n(1688),x=n(3335),h=n(6038),v=n(1047),f=n(4197),g=n(1806),y=n(579);const b=e=>{var t;let{editItem:n}=e;const i=(0,d.wA)(),o=(0,p.W6)(),{id:b}=(0,p.g)(),j=(0,d.d4)((e=>e.loader.isLoading)),[C,w]=(0,a.useState)({catalogImage:[],type:"PRODUCT",name:"",upc:"",profitCentre:"",itemCaption:"",itemSold:"",isRecurring:!1,isOneTimePurchaseable:!1,isRedeemable:!1,isSoldOnline:!1,isActive:!0,category:"",productType:"GENERAL",clubs:[],taxes:[],wholesaleCost:"",netPrice:0,unitPrice:0,defaultPrice:0,allowDiscount:!1,defaultDiscount:null,overrideDiscount:!1,minimumQuantity:1,defaultQuantity:1,maximumQuantity:1,allowUnlimited:!1,isStockable:!1,itemStart:"",expiration:!1,days:"",month:"",moreThan1:0,unitDiscount1:0,moreThan2:0,unitDiscount2:0,moreThan3:0,unitDiscount3:0,filterSet:[],tags:[]}),{filterSetDropDown:A}=(0,d.d4)((e=>e.filterSet)),{tagsDropDown:S}=(0,d.d4)((e=>e.tags)),{profitCenterDropdown:P}=(0,d.d4)((e=>e.profitCenter));let{categoryDropdown:D}=(0,d.d4)((e=>e.category)),{allDiscountDropdown:T}=(0,d.d4)((e=>e.discountType));D=[...D,...c.$n],T=[...T,...c.$n];const{clubsDropdown:R}=(0,v.A)(),{allTaxDropdown:N,allTaxes:k}=(0,d.d4)((e=>e.taxes));(0,a.useEffect)((()=>{n&&w({catalogImage:n.catalogImage,type:n.type,name:n.name,upc:n.upc,profitCentre:n.profitCentre,itemCaption:n.itemCaption,itemSold:n.itemSold,isRecurring:n.isRecurring,isOneTimePurchaseable:n.isOneTimePurchaseable,isRedeemable:n.isRedeemable,isSoldOnline:n.isSoldOnline,isActive:n.isActive,category:n.category,productType:n.productType,clubs:n.clubs,taxes:n.taxes,wholesaleCost:n.wholesaleCost,netPrice:n.netPrice,unitPrice:n.unitPrice,defaultPrice:n.defaultPrice,allowDiscount:n.allowDiscount,defaultDiscount:n.allowDiscount?n.defaultDiscount||"NONE":C.defaultDiscount,overrideDiscount:n.overrideDiscount,minimumQuantity:n.minimumQuantity,defaultQuantity:n.defaultQuantity,maximumQuantity:n.maximumQuantity,allowUnlimited:n.allowUnlimited,isStockable:n.isStockable,itemStart:n.itemStart,expiration:n.expiration,days:n.days,month:n.month,moreThan1:n.moreThan1,unitDiscount1:n.unitDiscount1,moreThan2:n.moreThan2,unitDiscount2:n.unitDiscount2,moreThan3:n.moreThan3,unitDiscount3:n.unitDiscount3,filterSet:n.filterSet,tags:n.tags})}),[n]);let I=(0,a.useMemo)((()=>k.filter((e=>{var t;return null===C||void 0===C||null===(t=C.taxes)||void 0===t?void 0:t.includes(e._id)})).reduce(((e,t)=>e+t.taxRatePercentage),0)),[k,null===C||void 0===C?void 0:C.taxes]);(0,a.useEffect)((()=>{B({name:"netPrice",value:null===C||void 0===C?void 0:C.netPrice})}),[I]);const B=e=>{let{name:t,value:n}=e;const a=(0,h.A)(t,n,C);let i=0,o=0;"netPrice"===t&&(i=n,o=(0,f.vX)(i,I),w((e=>({...e,netPrice:i,unitPrice:o,formErrors:a})))),"unitPrice"===t&&(o=n,i=(0,f.eH)(o,I),w((e=>({...e,netPrice:i,unitPrice:o,formErrors:a}))))},Q=e=>{let{name:t,value:n}=e;const a=(0,h.A)(t,n,C);w("moreThan1"===t?e=>({...e,[t]:n,moreThan2:0,moreThan3:0}):"moreThan2"===t?e=>({...e,[t]:n,moreThan3:0}):e=>({...e,[t]:n,formErrors:a}))},E=e=>{let t=[];if(t=null!==C&&void 0!==C&&C.allowDiscount?["days"]:["days","defaultDiscount"],(0,x.nV)(C,w,[...t,"commissionGroup","variationName"]))i(b?(0,g.lf)(b,C,o,e):(0,g.kF)(C,o,e));else{document.getElementById("main-content").scroll({top:100,left:100,behavior:"smooth"})}},V=e=>{let{name:t}=e,{defaultQuantity:n,minimumQuantity:a,maximumQuantity:i,allowUnlimited:o}=C;"minimumQuantity"===t&&(n<a&&(n=a),i<a&&(i=a)),"defaultQuantity"===t&&(a>n&&(a=n),i<n&&(i=n)),"maximumQuantity"!==t||o||(a>i&&(a=i),n>i&&(n=i)),w((e=>({...e,maximumQuantity:i,defaultQuantity:n,minimumQuantity:a})))},O=e=>{let{name:t,value:n}=e;w((e=>({...e,[t]:n})))};(0,a.useEffect)((()=>{let e=0;null!==C&&void 0!==C&&C.unitPrice&&null!==C&&void 0!==C&&C.defaultQuantity&&(e=(null===C||void 0===C?void 0:C.unitPrice)*(null===C||void 0===C?void 0:C.defaultQuantity)),w((t=>({...t,defaultPrice:e})))}),[null===C||void 0===C?void 0:C.unitPrice,null===C||void 0===C?void 0:C.defaultQuantity]);const _=e=>{if(null!==C&&void 0!==C&&C.wholesaleCost&&e){const t=(0,f.m3)(null===C||void 0===C?void 0:C.wholesaleCost,(null===C||void 0===C?void 0:C.netPrice)-e);return(0,y.jsx)(y.Fragment,{children:t>0?(0,y.jsx)("span",{className:"text-green",children:t.toFixed(2)+"%"}):t<0?(0,y.jsx)("span",{className:"text-red",children:t.toFixed(2)+"%"}):(0,y.jsx)("span",{children:t.toFixed(2)+"%"})})}return null};return console.log(C,"data"),(0,y.jsxs)("div",{id:"main-content",children:[(0,y.jsx)(l.Ay,{col:"12",title:"General",children:(0,y.jsxs)(l.a,{children:[(0,y.jsx)(r.A,{name:"catalogImage",data:C,onFilesChange:Q,removeable:!0,col:12}),(0,y.jsx)(s.BR,{name:"type",options:c.Xq,onChange:Q,data:C,disabled:b}),(0,y.jsx)(s.wi,{name:"name",onChange:Q,data:C,required:!0}),(0,y.jsx)(s.Bt,{name:"upc",label:"UPC",onChange:Q,data:C,col:4,required:!0}),(0,y.jsx)(s.BR,{name:"profitCentre",options:P,onChange:Q,data:C,required:!0}),(0,y.jsx)(s.wi,{name:"itemCaption",onChange:Q,data:C,required:!0}),(0,y.jsx)(s.BR,{name:"itemSold",label:"How is this item sold?",options:c.se,onChange:Q,data:C,required:!0}),(0,y.jsx)(s.BR,{name:"isRecurring",label:"Is this item Recurring?",options:c.r4,onChange:Q,data:C}),(0,y.jsx)(s.BR,{name:"isOneTimePurchaseable",label:"Can this item only be purchased 1 time?",options:c.r4,onChange:Q,data:C}),(0,y.jsx)(s.BR,{name:"isRedeemable",label:"Can this item be rendered at a later date?",options:c.r4,onChange:Q,data:C}),(0,y.jsx)(s.BR,{name:"isSoldOnline",label:"Is this item sold online?",options:c.r4,onChange:Q,data:C}),(0,y.jsx)(s.o4,{name:"isActive",data:C,onChange:Q})]})}),(0,y.jsx)(l.Ay,{col:"12",title:"Display",children:(0,y.jsxs)(l.a,{children:[(0,y.jsx)(s.BR,{name:"category",options:D,onChange:Q,data:C,required:!0}),(0,y.jsx)(s.Rx,{name:"filterSet",options:A,onChange:Q,data:C}),(0,y.jsx)(s.Rx,{name:"tags",options:S,onChange:Q,data:C})]})}),(0,y.jsx)(l.Ay,{col:"12",title:"Product Settings",children:(0,y.jsx)(l.a,{children:(0,y.jsx)(s.BR,{name:"productType",options:c.Yc,onChange:Q,data:C})})}),(0,y.jsx)(l.Ay,{col:"12",title:"Clubs",children:(0,y.jsx)(u.A,{name:"clubs",selected:null===C||void 0===C?void 0:C.clubs,sourceData:R,onPickListChange:Q,errorMessage:null===C||void 0===C||null===(t=C.formErrors)||void 0===t?void 0:t.clubs})}),(0,y.jsx)(l.Ay,{col:"12",title:"Taxes",children:(0,y.jsx)(u.A,{name:"taxes",selected:null===C||void 0===C?void 0:C.taxes,sourceData:N,onPickListChange:Q})}),(0,y.jsx)(l.Ay,{col:"12",title:"Pricing",children:(0,y.jsxs)(l.a,{children:[(0,y.jsx)(s.Bt,{prefix:"$",data:C,onChange:Q,name:"wholesaleCost"}),(0,y.jsx)(s.Bt,{prefix:"$",data:C,onChange:B,name:"netPrice",required:!0}),(0,y.jsx)(s.Bt,{prefix:"$",data:C,onChange:B,name:"unitPrice",required:!0}),(0,y.jsx)(s.BR,{data:C,onChange:Q,name:"allowDiscount",options:c.r4,clearIcon:!0}),(null===C||void 0===C?void 0:C.allowDiscount)&&(0,y.jsx)(s.BR,{data:C,onChange:Q,name:"defaultDiscount",options:T}),(0,y.jsx)(s.BR,{data:C,onChange:Q,name:"overrideDiscount",options:c.r4})]})}),(0,y.jsx)(l.Ay,{col:"12",title:"Details",children:(0,y.jsxs)(l.a,{children:[(0,y.jsx)(s.Bt,{onChange:O,onBlur:V,data:C,required:!0,name:"minimumQuantity"}),(0,y.jsx)(s.Bt,{onChange:O,onBlur:V,data:C,required:!0,name:"defaultQuantity"}),!(null!==C&&void 0!==C&&C.allowUnlimited)&&(0,y.jsx)(s.Bt,{onChange:O,onBlur:V,data:C,required:!0,name:"maximumQuantity",col:2}),(0,y.jsx)(s.ZD,{onChange:Q,data:C,name:"allowUnlimited",label:"Allow Unlimited (No Max Qty.)",col:2,extraClassName:"my-auto"}),(0,y.jsx)(s.Bt,{name:"defaultPrice",data:C,disabled:!0,prefix:"$"}),(0,y.jsx)(s.BR,{name:"isStockable",options:c.r4,onChange:Q,data:C}),(0,y.jsx)(s.BR,{name:"itemStart",options:c.Kg,onChange:Q,data:C}),(0,y.jsx)(s.BR,{name:"expiration",options:c.r4,onChange:Q,data:C,col:4}),(null===C||void 0===C?void 0:C.expiration)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.BR,{name:"days",options:c.ET,onChange:Q,data:C,col:2}),(0,y.jsx)(s.BR,{name:"month",options:c.Z6,onChange:Q,data:C,col:2})]})]})}),(0,y.jsx)(l.Ay,{col:"12",title:"Dynamic Pricing",children:(0,y.jsxs)(l.a,{children:[(0,y.jsx)(s.BR,{name:"moreThan1",label:"More Than",options:c.xP,onChange:Q,data:C,col:1}),(0,y.jsx)(s.Bt,{name:"unitDiscount1",label:"Unit Discount",onChange:Q,data:C,prefix:"$",col:2}),(null===C||void 0===C?void 0:C.wholesaleCost)&&(0,y.jsx)(s.ib,{label:"Markup",children:_(null===C||void 0===C?void 0:C.unitDiscount1)}),null!==C&&void 0!==C&&C.moreThan1?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.BR,{name:"moreThan2",label:"More Than",options:null===c.xP||void 0===c.xP?void 0:c.xP.filter((e=>(null===e||void 0===e?void 0:e.value)>(null===C||void 0===C?void 0:C.moreThan1))),onChange:Q,data:C,col:1}),(0,y.jsx)(s.Bt,{name:"unitDiscount2",label:"Unit Discount",onChange:Q,data:C,prefix:"$",col:2}),(null===C||void 0===C?void 0:C.wholesaleCost)&&(0,y.jsx)(s.ib,{label:"Markup",children:_(null===C||void 0===C?void 0:C.unitDiscount2)})]}):null,null!==C&&void 0!==C&&C.moreThan1&&null!==C&&void 0!==C&&C.moreThan2?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.BR,{name:"moreThan3",label:"More Than",options:null===c.xP||void 0===c.xP?void 0:c.xP.filter((e=>(null===e||void 0===e?void 0:e.value)>(null===C||void 0===C?void 0:C.moreThan2))),onChange:Q,data:C,col:1}),(0,y.jsx)(s.Bt,{name:"unitDiscount3",label:"Unit Discount",onChange:Q,data:C,prefix:"$",col:2}),(null===C||void 0===C?void 0:C.wholesaleCost)&&(0,y.jsx)(s.ib,{label:"Markup",children:_(null===C||void 0===C?void 0:C.unitDiscount3)})]}):null,(0,y.jsxs)(m.zp,{children:[(0,y.jsx)(m.Ay,{label:"Save",className:"mx-2",onClick:()=>E(""),loading:j}),(0,y.jsx)(m.Ay,{label:"Save & Next",className:"mx-2",onClick:()=>E("?tab=tracking"),loading:j}),(0,y.jsx)(m.Ti,{label:"Cancel",onClick:()=>o.goBack()})]})]})})]})};var j=n(9803),C=n(6595),w=n(8404);const A=e=>{let{editItem:t}=e;const n=(0,d.wA)(),i=(0,p.W6)(),{id:o}=(0,p.g)(),[r,u]=(0,a.useState)({requireCommission:"",commissionGroup:"",referralGroup:"",memberRequired:"",caseQuantity:"",vendor:"",trackingMinimumQuantity:"",trackingMaximumQuantity:"",recorderLevel:"",trackingAlternateVendors:"",time:new Date,note:"",alternateItem:""}),v=e=>{let{name:t,value:n}=e;const a=(0,h.A)(t,n,r);u((e=>({...e,[t]:n,formErrors:a})))};(0,a.useEffect)((()=>{n((0,j.St)()),n((0,C.mB)()),n((0,w.YQ)())}),[n]);const{allCommissionGroups:f}=(0,d.d4)((e=>e.commissionGroup)),{allReferralGroups:b}=(0,d.d4)((e=>e.referralGroup));let A=null===f||void 0===f?void 0:f.map((e=>({name:e.name,value:e._id}))),S=b.map((e=>({name:e.name,value:e._id})));(0,a.useEffect)((()=>{t&&u({requireCommission:t.requireCommission,commissionGroup:t.commissionGroup,referralGroup:t.referralGroup,memberRequired:t.memberRequired,caseQuantity:t.caseQuantity,vendor:t.vendor,trackingMinimumQuantity:t.trackingMinimumQuantity,trackingMaximumQuantity:t.trackingMaximumQuantity,recorderLevel:t.recorderLevel,trackingAlternateVendors:t.trackingAlternateVendors,time:t.createdAt?new Date(t.createdAt):new Date,note:t.note,alternateItem:t.alternateItem})}),[t]);const{vendorsDropdown:P}=(0,d.d4)((e=>e.vendors)),{loading:D}=(0,d.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.loader)||void 0===t?void 0:t.isLoading})),T=e=>{(0,x.nV)(r,u,["commissionGroup"])&&o&&n((0,g.lf)(o,r,i,e))};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(l.Ay,{col:"12",title:"General",children:(0,y.jsxs)(l.a,{children:[(0,y.jsx)(s.BR,{name:"requireCommission",options:c.r4,onChange:v,data:r}),(0,y.jsx)(s.BR,{name:"commissionGroup",options:A,onChange:v,data:r,showClear:!0}),(0,y.jsx)(s.BR,{name:"referralGroup",options:S,onChange:v,data:r,showClear:!0})]})}),(0,y.jsx)(l.Ay,{col:"12",title:"Details",children:(0,y.jsxs)(l.a,{children:[(0,y.jsx)(s.BR,{name:"memberRequired",options:c.r4,onChange:v,data:r,col:4}),(0,y.jsx)(s.Bt,{name:"caseQuantity",onChange:v,data:r,col:4}),(0,y.jsx)(s.BR,{name:"vendor",options:P,onChange:v,data:r,col:4}),(0,y.jsx)(s.Bt,{name:"trackingMinimumQuantity",label:"Minimum Quantity",onChange:v,data:r,col:4}),(0,y.jsx)(s.Bt,{name:"trackingMaximumQuantity",label:"Maximum Quantity",onChange:v,data:r,col:4}),(0,y.jsx)(s.Bt,{name:"recorderLevel",onChange:v,data:r,col:4}),(0,y.jsx)(s.BR,{name:"trackingAlternateVendors",label:"Alternate Vendors",options:P,onChange:v,data:r,col:4}),(0,y.jsx)(s.wi,{name:"alternateItem",onChange:v,data:r,col:4}),(0,y.jsx)(s.wN,{name:"time",label:"Date Created",data:r,disabled:!0}),(0,y.jsx)(s.Ky,{name:"note",maxLength:"266",data:r,onChange:v,inputClass:"h-17rem"}),(0,y.jsxs)(m.zp,{children:[(0,y.jsx)(m.Ay,{label:"Save",className:"mx-2",onClick:()=>T(""),loading:D}),(0,y.jsx)(m.Ay,{label:"Save & Next",className:"mx-2",onClick:()=>T("?tab=usage"),loading:D}),(0,y.jsx)(m.Ti,{label:"Cancel",onClick:()=>i.goBack()})]})]})})]})};var S=n(6411),P=n(7602);const D=()=>{const[e,t]=(0,a.useState)(""),{id:n}=(0,p.g)(),i=(0,p.W6)(),[o,r]=(0,a.useState)([]),[u,h]=(0,a.useState)([]),[v,f]=(0,a.useState)([]),[b,j]=(0,a.useState)([]),[C,w]=(0,a.useState)([]),[A,D]=(0,a.useState)([]),[T,R]=(0,a.useState)(""),N=(0,d.wA)();(0,a.useEffect)((()=>{N((0,g.mP)())}),[N]);const{allCatalogItemsFilter:k,catalogTypeFilterItems:I}=(0,d.d4)((e=>e.catalogItems)),B=(0,d.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.loader)||void 0===t?void 0:t.isLoading})),[Q,E]=(0,a.useState)({checkInDeduction:!1}),V=[{selectionMode:"multiple",headerStyle:""},{field:"name",header:"Item Name"},{field:"upc",header:"Item UPC"},{field:"unitPrice",header:"Price"}],O=[{field:"name",header:"Item Name"},{field:"upc",header:"Item UPC"},{field:"unitPrice",header:"Price"}];(0,a.useEffect)((()=>{n&&N((0,g.zz)(n,(e=>{E({checkInDeduction:e.checkInDeduction}),j(e.paysTo),w(e.paysFor),D(e.bundleRecipe),R(e._id)})))}),[n,N]),(0,a.useEffect)((()=>{n&&("payTo"===e&&b?r(b):"payFor"===e&&C?h(C):"bundleRecipe"===e&&A&&f(A))}),[b,C,A,n,e]);const _=e=>{n&&N((0,g.ju)(n,{paysTo:(0,x.rO)(b),paysFor:(0,x.rO)(C),bundleRecipe:(0,x.rO)(A),checkInDeduction:Q.checkInDeduction},i,e))},F=(e,t,n)=>{(0,x.QV)((()=>{"paysTo"===n?j(null===b||void 0===b?void 0:b.filter((e=>e._id!==(null===t||void 0===t?void 0:t._id)))):"paysFor"===n?w(null===C||void 0===C?void 0:C.filter((e=>e._id!==(null===t||void 0===t?void 0:t._id)))):"bundleRecipe"===n&&D(null===A||void 0===A?void 0:A.filter((e=>e._id!==(null===t||void 0===t?void 0:t._id))))}),"Do you want to delete this ".concat(n," ?"),"center")};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(s.BR,{name:"checkInDeduction",options:c.r4,onChange:e=>{let{name:t,value:n}=e;E((e=>({...e,[t]:n})))},data:Q}),(0,y.jsxs)(l.Ay,{col:"12",title:"Pays To",children:[(0,y.jsx)(l.Fq,{buttonTitle:"Add",onClick:()=>t("payTo"),extraClass:"justify-content-end gap-2",children:(0,y.jsx)("div",{children:(0,y.jsx)(m.Ay,{label:"Remove All",onClick:()=>{j([])}})})}),(0,y.jsx)(P.A,{data:b,columns:O,showSelectionElement:!1,onDelete:e=>F(0,e,"paysTo")})]}),(0,y.jsxs)(l.Ay,{col:"12",title:"Pays For",children:[(0,y.jsx)(l.Fq,{buttonTitle:"Add",onClick:()=>t("payFor"),extraClass:"justify-content-end gap-2",children:(0,y.jsx)("div",{children:(0,y.jsx)(m.Ay,{label:"Remove All",onClick:()=>{w([])}})})}),(0,y.jsx)(P.A,{data:C,columns:O,onDelete:e=>F(0,e,"paysFor")})]}),(0,y.jsxs)(l.Ay,{col:"12",title:"Bundle/Recipe",children:[(0,y.jsx)(l.Fq,{buttonTitle:"Add",onClick:()=>t("bundleRecipe"),extraClass:"justify-content-end gap-2",children:(0,y.jsx)("div",{children:(0,y.jsx)(m.Ay,{label:"Remove All",onClick:()=>{D([])}})})}),(0,y.jsx)(P.A,{data:A,columns:O,onDelete:e=>F(0,e,"bundleRecipe")}),(0,y.jsxs)(m.zp,{children:[(0,y.jsx)(m.Ay,{label:"Save",className:"mx-2",onClick:()=>_(""),loading:B}),(0,y.jsx)(m.Ay,{label:"Save & Next",className:"mx-2",onClick:()=>_("?tab=variations"),loading:B}),(0,y.jsx)(m.Ti,{label:"Cancel",onClick:()=>i.goBack()})]})]}),(0,y.jsx)(S.A,{title:"Add Services",visible:e,onCancel:()=>{t("")},loading:B,onSave:()=>{"payTo"===e?(j(o),t(""),r("")):"payFor"===e?(w(u),t(""),h("")):"bundleRecipe"===e&&(D(v),t(""),h(""))},width:"auto",children:(0,y.jsxs)(l.a,{children:["payTo"===e&&(0,y.jsx)(P.A,{convertToboolean:!1,data:"payTo"===e&&I,columns:V,selectedRow:o,setSelectedRow:r}),"payFor"===e&&(0,y.jsx)(P.A,{data:"payFor"===e&&I,columns:V,selectedRow:u,convertToboolean:!1,setSelectedRow:h}),"bundleRecipe"===e&&(0,y.jsx)(P.A,{convertToboolean:!1,data:k,columns:V,selectedRow:v,setSelectedRow:f})]})})]})},T=e=>{let{visible:t,setOpen:n,setVariationId:i,variationId:o,catalogId:r,catelogItem:c}=e;const u=(0,d.wA)(),[m,p]=(0,a.useState)({variationName:"",subVariations:[]}),v=()=>{n(!1),i(""),p({variationName:"",subVariations:[]})},f=(0,a.useRef)([]);(0,a.useEffect)((()=>{c&&p({variationName:"",subVariations:[],upc:c.upc,sku:1,taxable:!0,netPrice:c.netPrice,minimumQuantity:c.minimumQuantity,maximumQuantity:c.maximumQuantity,wholesaleCost:c.wholesaleCost,defaultQuantity:c.defaultQuantity})}),[c]);const b=e=>{let{name:t,value:n}=e;const a=(0,h.A)(t,n,m);p((e=>({...e,[t]:n,formErrors:a})))};(0,a.useEffect)((()=>{o&&u((0,g.Br)(o,(e=>{var t;const n=(null===(t=e.subVariation)||void 0===t?void 0:t.map((e=>e.subVariation)))||[];f.current=n,p((t=>({...t,variationName:e.variationName,subVariations:n})))})))}),[o,u]);const j=(0,d.d4)((e=>e.loader.isLoading));return(0,y.jsx)(S.A,{title:o?"Edit Variations":"Add Variations",visible:t,onCancel:v,loading:j,onSave:()=>{if(r&&(0,x.nV)(m,p)){m.subVariations=m.subVariations.filter((e=>{var t;return!(null!==(t=f.current)&&void 0!==t&&t.includes(e))}))||[];const e={...m,_id:o};u((0,g.FM)(r,e,(()=>{v(),p({...m,variationName:"",subVariations:[]}),u((0,g._w)(r))})))}},children:(0,y.jsxs)(l.a,{children:[(0,y.jsx)(s.wi,{name:"variationName",col:12,data:m,onChange:b}),(0,y.jsx)(s.ae,{data:m,name:"subVariations",onChange:b,col:12})]})})};var R=n(5150),N=n(3428),k=n(9642),I=n(2052),B=n(788),Q=n(2392);const E=e=>{let{editItem:t}=e;const n=(0,d.wA)(),[i,o]=(0,a.useState)(!1),[r,c]=(0,a.useState)(null),{id:u}=(0,p.g)();(0,a.useEffect)((()=>{n((0,g._w)(u))}),[n,u]);const m=(0,d.d4)((e=>{var t;return null===e||void 0===e||null===(t=e.catalogItems)||void 0===t?void 0:t.allCategoryVariations}));(0,a.useEffect)((()=>{f(m)}),[m]);const h=e=>(0,y.jsxs)("div",{className:"flex align-items-center justify-content-between gap-2 w-full ml-auto",children:[(0,y.jsx)("div",{children:e.variationName}),(0,y.jsxs)("div",{className:"flex gap-3 mr-3",children:[(0,y.jsx)("i",{className:"pi pi-pencil",onClick:()=>{o(!0),c(e._id)}}),(0,y.jsx)("i",{className:"pi pi-trash",onClick:()=>(0,x.QV)((()=>{n((0,g.Jm)(e._id,(()=>{n((0,g._w)(u))})))}),"Do you want to delete this Variation?")})]})]}),[v,f]=(0,a.useState)([]),b=e=>{const{newData:t}=e;t.upc?n((0,g.Ln)(t._id,{subVariation:t.subVariation,...t},(()=>{n((0,g._w)(u))}))):n((0,Q.P)({severity:"error",summary:"UPC is required"}))},j=e=>(0,y.jsx)(B.Y,{value:e.value,onValueChange:t=>e.editorCallback(t.value),mode:"currency",currency:"USD",locale:"en-US",maxFractionDigits:4,useGrouping:!1}),C=e=>(0,y.jsx)(B.Y,{value:e.value,onValueChange:t=>((e,t)=>{t.editorCallback(e.value)})(t,e),maxFractionDigits:4,useGrouping:!1}),w=e=>(0,y.jsx)(s.ZD,{value:e.taxable}),A=(e,t)=>(0,y.jsx)("i",{className:" cursor-pointer pi pi-trash",onClick:()=>(0,x.QV)((()=>{n((0,g.m7)(e._id,(()=>{n((0,g._w)(u))})))}),"Do you want to delete this Variation?",t)}),S=(0,a.useCallback)((e=>{}),[]);return(0,y.jsxs)(l.Ay,{col:"12",title:"All Variations",children:[(0,y.jsx)(l.oU,{buttonTitle:"Add",onClick:()=>o(!0)}),(0,y.jsx)(T,{visible:i,setOpen:o,setVariationId:c,variationId:r,catalogId:u,catelogItem:t}),(null===v||void 0===v?void 0:v.length)>0&&(null===v||void 0===v?void 0:v.map(((e,t)=>(0,y.jsx)(R.A,{isActive:!0,extraClassName:"employee-accordion w-full",title:h(e),children:(0,y.jsxs)(N.b,{value:null===e||void 0===e?void 0:e.subVariations,editMode:"row",dataKey:"_id",onRowEditComplete:b,tableStyle:{minWidth:"50rem"},children:[(0,y.jsx)(k.V,{field:"subVariation",header:"Sub Variation",editor:e=>(e=>(0,y.jsx)(I.S,{type:"text",value:e.value,onChange:t=>e.editorCallback(t.target.value)}))(e)}),(0,y.jsx)(k.V,{field:"sku",header:"Sku",editor:e=>C(e)}),(0,y.jsx)(k.V,{field:"upc",header:"UPC",editor:e=>C(e)}),(0,y.jsx)(k.V,{field:"netPrice",header:"Net Price",editor:e=>j(e)}),(0,y.jsx)(k.V,{field:"netPrice",header:"Markup Price",body:S}),(0,y.jsx)(k.V,{field:"minimumQuantity",header:"Min. Quantity",editor:e=>C(e)}),(0,y.jsx)(k.V,{field:"maximumQuantity",header:"Max. Quantity",editor:e=>C(e)}),(0,y.jsx)(k.V,{field:"defaultQuantity",header:"Default Quantity",editor:e=>C(e)}),(0,y.jsx)(k.V,{field:"wholesaleCost",header:"WholeSale Cost",editor:e=>j(e)}),(0,y.jsx)(k.V,{field:"reorderQuantity",header:"Reorder Quantity",editor:e=>C(e)}),(0,y.jsx)(k.V,{field:"taxable",body:w,header:"Taxable",editor:e=>(e=>(0,y.jsx)(s.ZD,{value:e.value,onChange:t=>e.editorCallback(t.value)}))(e)}),(0,y.jsx)(k.V,{header:"Actions",rowEditor:!0,bodyStyle:{textAlign:"center"}}),(0,y.jsx)(k.V,{body:A})]})},e._id))))]})};var V=n(8056),O=n(5670),_=n(8339),F=n(3208),M=n(7476),q=n(8691);const U=()=>{const e=(0,d.wA)(),{id:t}=(0,p.g)(),[n,l]=(0,a.useState)(null);(0,a.useEffect)((()=>{t&&e((0,g.R0)(t,(e=>{l({...e,catalogImage:e.catalogImage?[e.catalogImage]:[]})})))}),[t,e]),(0,a.useEffect)((()=>{e((0,M.l2)()),e((0,_.bW)()),e((0,V.Km)()),e((0,O.zN)()),e((0,F.G_)()),e((0,q.Q2)())}),[e]);const r=[{title:"General",content:(0,y.jsx)(b,{editItem:n})},{title:"Tracking",content:(0,y.jsx)(A,{editItem:n})},{title:"Usage",content:(0,y.jsx)(D,{editItem:n})},{title:"Variations",content:(0,y.jsx)(E,{editItem:n})}];return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(o.A,{backText:"Catalog Items",children:(0,y.jsx)(i.A,{tabs:r,disabledTabIndices:t?[]:[1,2,3]})})})}}}]);
//# sourceMappingURL=104.0f09faf7.chunk.js.map