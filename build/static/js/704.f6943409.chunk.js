"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[704],{3323:(e,s,n)=>{n.r(s),n.d(s,{default:()=>D});var i=n(5043),a=n(5050),o=n(3549),l=n(666),c=n(6038),t=n(7994),m=n(1688),d=n(9456),r=n(7374),u=n(6911),A=n(8085),x=n(7128),g=n(5659),h=n(346),v=n(2392);const p=e=>async s=>{e&&e(!0);const n=await(0,x.A)("get",g.A.ACCESS_SCHEDULE);var i;n.success?n.data&&s({type:h.g.CHANGE_ACCESS_SCHEDULE,payload:n.data}):s((0,v.P)({severity:"error",summary:null!==(i=n.message)&&void 0!==i?i:n}));e&&e(!1)};var w=n(8701),C=n(1047),y=n(4441),j=n(1923),b=n(579);const D=()=>{var e;const s=(0,d.wA)(),{id:n}=(0,m.g)();(0,i.useEffect)((()=>{s(p())}),[s]);const[x,g]=(0,i.useState)({name:"",description:"",discount:"None",accessRestriction:!1,accessSchedule:null,remoteCheckin:!1,transferToAnotherType:null,clubCreditAmount:"",specialResrictions:"None",minimumAgeAllowed:0,maximumAgeAllowed:0,maximumDaysAllowed:0,maximumDistanceAllowed:0,clubs:[],services:[],isActive:!0}),{AccessScheduleDropdown:h}=(0,d.d4)((e=>e.accessSchedule));let{membershipTypesDropdown:v}=(0,d.d4)((e=>e.settings.members));v=null===(e=v)||void 0===e?void 0:e.filter((e=>e.name!==(null===x||void 0===x?void 0:x.name)));const{clubsDropdown:D}=(0,C.A)(),{allDiscountDropdown:B}=(0,y.A)(),R=(0,m.W6)(),{isTableLoading:f}=(0,d.d4)((e=>null===e||void 0===e?void 0:e.tableLoader));(0,i.useEffect)((()=>{n&&s((0,j.nK)(n,(e=>{g({name:e.name,description:e.description,discount:null===e.discount?"None":e.discount,accessRestriction:e.accessRestriction,accessSchedule:e.accessSchedule,remoteCheckin:e.remoteCheckin,transferToAnotherType:e.transferToAnotherType,clubCreditAmount:e.clubCreditAmount,specialResrictions:e.specialResrictions,minimumAgeAllowed:e.minimumAgeAllowed,maximumAgeAllowed:e.maximumAgeAllowed,maximumDaysAllowed:e.maximumDaysAllowed,maximumDistanceAllowed:e.maximumDistanceAllowed,clubs:e.clubs,services:e.services,isActive:!0})})))}),[n,s]);const k=e=>{let{name:s,value:n}=e;const i=(0,c.A)(s,n,x);g((e=>({...e,[s]:n,formErrors:i})))},S=[...r.$n,...B];return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(a.A,{backText:"Membership Types",children:[(0,b.jsxs)(o.Ay,{col:"12",title:"General",children:[(0,b.jsx)(l.o4,{name:"isActive",data:x,onChange:k}),(0,b.jsxs)(o.a,{children:[(0,b.jsx)(l.wi,{name:"name",data:x,onChange:k,required:!0}),(0,b.jsx)(l.wi,{name:"description",data:x,onChange:k}),(0,b.jsx)(l.BR,{name:"discount",options:S,onChange:k,data:x}),(0,b.jsx)(l.BR,{name:"accessRestriction",options:r.r4,onChange:k,data:x}),(null===x||void 0===x?void 0:x.accessRestriction)&&(0,b.jsx)(l.BR,{name:"accessSchedule",options:h,onChange:k,data:x}),(0,b.jsx)(l.BR,{name:"remoteCheckin",options:r.r4,onChange:k,data:x}),(0,b.jsx)(l.BR,{name:"transferToAnotherType",options:v,onChange:k,data:x}),(0,b.jsx)(l.Bt,{prefix:"$",name:"clubCreditAmount",data:x,onChange:k,col:"4"}),(0,b.jsx)(l.BR,{name:"specialResrictions",options:r.So,onChange:k,data:x}),"By Age"===(null===x||void 0===x?void 0:x.specialResrictions)&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Bt,{name:"minimumAgeAllowed",data:x,onChange:k,col:"4"}),(0,b.jsx)(l.Bt,{name:"maximumAgeAllowed",data:x,onChange:k,col:"4"})]}),"By Location"===(null===x||void 0===x?void 0:x.specialResrictions)&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(l.Bt,{name:"maximumDistanceAllowed",data:x,onChange:k,col:"4"})}),"By Days"===(null===x||void 0===x?void 0:x.specialResrictions)&&(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(l.Bt,{name:"maximumDaysAllowed",data:x,onChange:k,col:"4"})})]})]}),(0,b.jsx)(o.Ay,{col:"12",title:" Clubs",children:(0,b.jsx)(u.A,{name:"clubs",selected:null===x||void 0===x?void 0:x.clubs,sourceData:D,onPickListChange:k})}),(0,b.jsx)(w.A,{data:x,setData:g,id:n,loading:f,name:"Add Services"}),(0,b.jsxs)(t.zp,{children:[(0,b.jsx)(t.Ay,{label:"Save",className:"mx-2",onClick:()=>{let e=[];switch(null===x||void 0===x?void 0:x.specialResrictions){case"By Age":e=["maximumDaysAllowed","maximumDistanceAllowed","services"];break;case"By Location":e=["minimumAgeAllowed","maximumAgeAllowed","maximumDaysAllowed","services"];break;case"By Days":e=["maximumAgeAllowed","minimumAgeAllowed","maximumDistanceAllowed","services"];break;default:e=["maximumDaysAllowed","maximumDistanceAllowed","minimumAgeAllowed","maximumAgeAllowed","services","clubs"]}(0,A.nV)(x,g,e)&&s(n?(0,j.TV)(n,{...x,services:(0,A.rO)(x.services),discount:"None"===x.discount?null:x.discount},R):(0,j.E1)({...x,services:(0,A.rO)(x.services),discount:"None"===x.discount?null:x.discount},(()=>R.goBack())))},loading:f}),(0,b.jsx)(t.Ti,{label:"Cancel",onClick:()=>R.goBack()})]})]})})}}}]);
//# sourceMappingURL=704.f6943409.chunk.js.map