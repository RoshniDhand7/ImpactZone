"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[492],{6492:(e,a,o)=>{o.r(a),o.d(a,{default:()=>x});var l=o(5043),n=o(9575),r=o(9456),s=o(639),i=o(6303),t=o(7735),c=o(2142),d=o(6038),v=o(7994),m=o(3549),u=o(666),b=o(7602),h=o(1830),p=o(5050),f=o(579);const x=()=>{const e=(0,r.wA)(),[a,o]=(0,l.useState)({reserveMember:"",reserveDate:new Date}),{members:x}=(0,n.A)();(0,l.useEffect)((()=>{o((e=>{var a;return{...e,reserveMember:null===(a=x[0])||void 0===a?void 0:a._id}}))}),[x]);const j=(0,l.useMemo)((()=>x.map((e=>({value:e._id,name:"".concat(e.firstName," ").concat(e.MI," ").concat(e.lastName)})))),[x]),A=(0,l.useMemo)((()=>null===x||void 0===x?void 0:x.map((e=>({name:"".concat(e.firstName," ").concat(e.MI," ").concat(e.lastName),value:null===e||void 0===e?void 0:e._id})))),[x]),[M,C]=(0,l.useState)({filterType:"AND",location:"",resourceType:""});(0,l.useEffect)((()=>{e((0,t.MB)()),e((0,s.Vs)())}),[e]),(0,l.useEffect)((()=>{null!==a&&void 0!==a&&a.reserveMember&&null!==a&&void 0!==a&&a.reserveDate&&e((0,c.C6)(a))}),[null===a||void 0===a?void 0:a.reserveMember,null===a||void 0===a?void 0:a.reserveDate]);const{resourceList:D}=(0,r.d4)((e=>e.checkin)),{tableData:y,onFilterOpen:g,onFilterClose:k,onApplyFilters:w,filters:N,isFilterVisible:T}=(0,i.A)(D),{locationDropdown:R}=(0,r.d4)((e=>e.settings.schedule)),{resourceTypeDropdown:F}=(0,r.d4)((e=>e.settings.members)),_=[{field:"name",header:"Resource"},{field:"resourceType",header:"Resource Type"},{field:"location",header:"Location"},{field:"",body:e=>"".concat(null===e||void 0===e?void 0:e.reserveCount,"/").concat(null===e||void 0===e?void 0:e.availableQuantity),header:"Resources Available"},{field:"",body:e=>{const a=new Date-new Date(null===e||void 0===e?void 0:e.createdAt),o=Math.floor(a/36e5);return(0,f.jsx)("div",{className:"".concat(o>e.pastDue?"h-1rem w-2 border-circle bg-red-500 inline-block":"h-1rem w-2 border-circle bg-green-500 inline-block")})},header:"Past Due"},{field:"serviceCount",header:"Services Available"}],B=e=>{let{name:l,value:n}=e;const r=(0,d.A)(l,n,a);o((e=>({...e,[l]:n,formErrors:r})))},E=e=>{let{name:a,value:o}=e;C((e=>({...e,[a]:o})))};return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(p.A,{backText:"Members",children:(0,f.jsxs)(m.Ay,{title:"Reserve",col:"12",children:[(0,f.jsx)(m.oU,{contentPosition:"end m-0",children:(0,f.jsx)(v.Ay,{label:"Filters",icon:"pi pi-filters",onClick:g,className:"mx-2"})}),(0,f.jsxs)(m.a,{children:[(0,f.jsxs)("div",{className:"col-6 ",children:[(0,f.jsx)("label",{className:" ml-1 mb-3",children:"Member"}),(0,f.jsx)(u.TR,{name:"reserveMember",suggestions:j,options:A,placeholder:"Search Member",showLabel:!1,value:a.reserveMember,onChange:B,col:12})]}),(0,f.jsx)(u.wN,{label:"Date",name:"reserveDate",data:a,onChange:B,col:6,extraClassName:"mb-2"})]}),(0,f.jsx)(b.A,{convertToboolean:!1,data:y,columns:_,customActionTemplate:o=>(0,f.jsx)(v.Ay,{name:"status",label:null!==o&&void 0!==o&&o.isBookedForMember?"Return":"Reserve",onClick:()=>(o=>{null!==o&&void 0!==o&&o.isBookedForMember?e((0,c.D4)(a,null===o||void 0===o?void 0:o.reserveId,(()=>e((0,c.C6)(a))))):e((0,c.rG)(null===o||void 0===o?void 0:o._id,a,(()=>e((0,c.C6)(a)))))})(o)})}),(0,f.jsx)(h.A,{value:N,onApply:w,visible:T,onHide:k,data:M,handleChange:E,setData:C,children:(0,f.jsxs)(m.a,{children:[(0,f.jsx)(u.BR,{name:"resourceType",options:null===F||void 0===F?void 0:F.map((e=>({name:e.name,value:e.name}))),data:M,onChange:E,col:12}),(0,f.jsx)(u.BR,{name:"location",options:null===R||void 0===R?void 0:R.map((e=>({name:e.name,value:e.name}))),data:M,onChange:E,col:12})]})})]})})})}}}]);
//# sourceMappingURL=492.5a9328a6.chunk.js.map