"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[975],{7931:(e,a,t)=>{t.d(a,{Xs:()=>l,bV:()=>E,br:()=>u,gc:()=>m,kx:()=>p,m6:()=>d,mp:()=>f});var i=t(7128),c=t(5659),s=t(346),n=t(7504),r=t(2392),o=t(8085);const l=(e,a)=>async t=>{a&&a(!0);const n={employee:e},r=await(0,i.A)("get",c.A.MANAGE_EMPLOYEE_CERTIFICATES,{},n);r.success&&r.data&&t({type:s.g.CHANGE_MANAGE_EMPLOYEE_CERTIFICATES,payload:r.data}),a&&a(!1)},d=function(e,a,t){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return async n=>{var l;if(a(!0),null!==(l=e.certificate)&&void 0!==l&&l.length){let a=await(0,o.Zn)(e.certificate);e.certificate=a[0].path,e.certificateName=a[0].originalname,e.certificateSize=a[0].size}else e.certificate="";const d={...e,acquiredDate:(0,o.KH)(null===e||void 0===e?void 0:e.acquiredDate),expirationDate:(0,o.KH)(e.expirationDate)},m=await(0,i.A)("post",c.A.MANAGE_EMPLOYEE_CERTIFICATES,d);m.success&&(s?t.replace("/settings/employee/manage-employee/edit/".concat(m.data._id,"/").concat(s)):t.goBack(),n((0,r.P)({severity:"success",summary:m.message}))),a(!1)}},m=(e,a)=>async t=>{t((0,n.rb)());const s=await(0,i.A)("get",c.A.MANAGE_EMPLOYEE_CERTIFICATES+e);s.success&&s.data&&a&&a(s.data),t((0,n.iG)())},u=function(e,a,t,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return async l=>{var d;if(t(!0),null!==(d=a.certificate)&&void 0!==d&&d.length){let e=await(0,o.Zn)(a.certificate);a.certificate=e[0].path,a.certificateName=e[0].originalname,a.certificateSize=e[0].size}else a.certificate="";const m={...a,acquiredDate:(0,o.KH)(null===a||void 0===a?void 0:a.acquiredDate),expirationDate:(0,o.KH)(null===a||void 0===a?void 0:a.expirationDate)},u=await(0,i.A)("put",c.A.MANAGE_EMPLOYEE_CERTIFICATES+e,m);u.success&&(n?s.replace("/settings/employee/manage-employee/edit/".concat(u.data._id,"/").concat(n)):s.goBack(),l((0,r.P)({severity:"success",summary:u.message}))),t(!1)}},f=(e,a)=>async t=>{const s=await(0,i.A)("delete",c.A.MANAGE_EMPLOYEE_CERTIFICATES+e);s.success?(t((0,r.P)({severity:"success",summary:s.message})),a()):t((0,r.P)({severity:"error",summary:s.message}))},p=(e,a,t)=>async s=>{a&&a(!0);const n=await(0,i.A)("get",c.A.NOTES,"",{employee:e});n.success&&n.data&&t&&t(n.data),a&&a(!1)},E=(e,a,t)=>async s=>{a(!0);const n=await(0,i.A)("post",c.A.NOTES,e);n.success?(s((0,r.P)({severity:"success",summary:n.message})),t()):s((0,r.P)({severity:"error",summary:n.message})),a(!1)}},8975:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var i=t(5043),c=t(5050),s=t(3549),n=t(666),r=t(9456),o=t(1688),l=t(7994),d=t(7931),m=t(6548),u=t(579);const f=()=>{const{id:e,employeeId:a}=(0,o.g)(),t=(0,r.wA)(),f=(0,o.W6)(),[p,E]=(0,i.useState)({name:"",certificationNumber:"",issuer:"",acquiredDate:"",expirationDate:"",certificate:[],employee:"",certificateSize:"",certificateName:""});(0,i.useEffect)((()=>{e?t((0,d.gc)(e,(e=>{E({name:e.name,certificationNumber:e.certificationNumber,issuer:e.issuer,acquiredDate:e.acquiredDate?new Date:"",expirationDate:e.expirationDate?new Date:"",certificate:e.certificate?[e.certificate]:[],description:e.description,employee:a,certificateName:null!==e&&void 0!==e&&e.certificateName?null===e||void 0===e?void 0:e.certificateName:"",certificateSize:null!==e&&void 0!==e&&e.certificateSize?null===e||void 0===e?void 0:e.certificateSize:""})}))):E({...p,employee:a})}),[e,t]);const[g,A]=(0,i.useState)(!1),y=e=>{let{name:a,value:t}=e;E((e=>({...e,[a]:t})))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(c.A,{backText:"Certifications",children:[(0,u.jsx)(s.Ay,{col:"12",title:"Personal",children:(0,u.jsxs)(s.a,{children:[(0,u.jsx)(n.wi,{name:"name",data:p,onChange:y}),(0,u.jsx)(n.wi,{name:"certificationNumber",data:p,onChange:y}),(0,u.jsx)(n.wi,{name:"issuer",data:p,onChange:y}),(0,u.jsx)(n.wN,{name:"acquiredDate",data:p,onChange:y}),(0,u.jsx)(n.wN,{name:"expirationDate",data:p,onChange:y}),(0,u.jsx)(n.Ky,{name:"description",data:p,onChange:y}),(0,u.jsx)(m.A,{data:p,onFilesChange:y,name:"certificate",label:"Upload Certificate",accept:"image/*,.pdf",disabled:!1,col:"6",uploadType:"Image/Pdf",originalName:null===p||void 0===p?void 0:p.certificateName,fileSize:p.certificateSize})]})}),(0,u.jsxs)(l.zp,{children:[(0,u.jsx)(l.Ay,{label:"Save",className:"mx-2",loading:g,onClick:()=>{t(e?(0,d.br)(e,p,A,f):(0,d.m6)(p,A,f))}}),(0,u.jsx)(l.Ti,{label:"Cancel",onClick:()=>f.replace("/settings/employee")})]})]})})}}}]);
//# sourceMappingURL=975.9f97319c.chunk.js.map