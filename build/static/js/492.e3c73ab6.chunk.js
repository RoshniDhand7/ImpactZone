"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[492],{6492:(e,o,a)=>{a.r(o),a.d(o,{default:()=>x});var l=a(9379),n=a(5043),r=a(9575),s=a(9456),i=a(639),t=a(6303),d=a(7735),c=a(2142),v=a(6038),u=a(7994),m=a(3549),b=a(3191),h=a(7602),p=a(1830),f=a(5050),A=a(579);const x=()=>{const e=(0,s.wA)(),[o,a]=(0,n.useState)({reserveMember:"",reserveDate:new Date}),{members:x}=(0,r.A)();(0,n.useEffect)((()=>{a((e=>{var o;return(0,l.A)((0,l.A)({},e),{},{reserveMember:null===(o=x[0])||void 0===o?void 0:o._id})}))}),[x]);const M=(0,n.useMemo)((()=>x.map((e=>({value:e._id,name:"".concat(e.firstName," ").concat(e.MI," ").concat(e.lastName)})))),[x]),j=(0,n.useMemo)((()=>null===x||void 0===x?void 0:x.map((e=>({name:"".concat(e.firstName," ").concat(e.MI," ").concat(e.lastName),value:null===e||void 0===e?void 0:e._id})))),[x]),[C,D]=(0,n.useState)({filterType:"AND",location:"",resourceType:""});(0,n.useEffect)((()=>{e((0,d.MB)()),e((0,i.Vs)())}),[e]),(0,n.useEffect)((()=>{null!==o&&void 0!==o&&o.reserveMember&&null!==o&&void 0!==o&&o.reserveDate&&e((0,c.C6)(o))}),[null===o||void 0===o?void 0:o.reserveMember,null===o||void 0===o?void 0:o.reserveDate]);const{resourceList:y}=(0,s.d4)((e=>e.checkin)),{tableData:g,onFilterOpen:k,onFilterClose:w,onApplyFilters:N,filters:T,isFilterVisible:F}=(0,t.A)(y),{locationDropdown:R}=(0,s.d4)((e=>e.settings.schedule)),{resourceTypeDropdown:_}=(0,s.d4)((e=>e.settings.members)),B=[{field:"name",header:"Resource"},{field:"resourceType",header:"Resource Type"},{field:"location",header:"Location"},{field:"",body:e=>"".concat(null===e||void 0===e?void 0:e.reserveCount,"/").concat(null===e||void 0===e?void 0:e.availableQuantity),header:"Resources Available"},{field:"",body:e=>{const o=new Date-new Date(null===e||void 0===e?void 0:e.createdAt),a=Math.floor(o/36e5);return(0,A.jsx)("div",{className:"".concat(a>e.pastDue?"h-1rem w-2 border-circle bg-red-500 inline-block":"h-1rem w-2 border-circle bg-green-500 inline-block")})},header:"Past Due"},{field:"serviceCount",header:"Services Available"}],E=e=>{let{name:n,value:r}=e;const s=(0,v.A)(n,r,o);a((e=>(0,l.A)((0,l.A)({},e),{},{[n]:r,formErrors:s})))},S=e=>{let{name:o,value:a}=e;D((e=>(0,l.A)((0,l.A)({},e),{},{[o]:a})))};return(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(f.A,{backText:"Members",children:(0,A.jsxs)(m.Ay,{title:"Reserve",col:"12",children:[(0,A.jsx)(m.oU,{contentPosition:"end m-0",children:(0,A.jsx)(u.Ay,{label:"Filters",icon:"pi pi-filters",onClick:k,className:"mx-2"})}),(0,A.jsxs)(m.a,{children:[(0,A.jsxs)("div",{className:"col-6 ",children:[(0,A.jsx)("label",{className:" ml-1 mb-3",children:"Member"}),(0,A.jsx)(b.TR,{name:"reserveMember",suggestions:M,options:j,placeholder:"Search Member",showLabel:!1,value:o.reserveMember,onChange:E,col:12})]}),(0,A.jsx)(b.wN,{label:"Date",name:"reserveDate",data:o,onChange:E,col:6,extraClassName:"mb-2"})]}),(0,A.jsx)(h.A,{convertToboolean:!1,data:g,columns:B,customActionTemplate:a=>(0,A.jsx)(u.Ay,{name:"status",label:null!==a&&void 0!==a&&a.isBookedForMember?"Return":"Reserve",onClick:()=>(a=>{null!==a&&void 0!==a&&a.isBookedForMember?e((0,c.D4)(o,null===a||void 0===a?void 0:a.reserveId,(()=>e((0,c.C6)(o))))):e((0,c.rG)(null===a||void 0===a?void 0:a._id,o,(()=>e((0,c.C6)(o)))))})(a),disabled:!(null!==a&&void 0!==a&&a.isBookedForMember)&&(null===a||void 0===a?void 0:a.reserveCount)===(null===a||void 0===a?void 0:a.availableQuantity)})}),(0,A.jsx)(p.A,{value:T,onApply:N,visible:F,onHide:w,data:C,handleChange:S,setData:D,children:(0,A.jsxs)(m.a,{children:[(0,A.jsx)(b.BR,{name:"resourceType",options:null===_||void 0===_?void 0:_.map((e=>({name:e.name,value:e.name}))),data:C,onChange:S,col:12}),(0,A.jsx)(b.BR,{name:"location",options:null===R||void 0===R?void 0:R.map((e=>({name:e.name,value:e.name}))),data:C,onChange:S,col:12})]})})]})})})}}}]);
//# sourceMappingURL=492.e3c73ab6.chunk.js.map