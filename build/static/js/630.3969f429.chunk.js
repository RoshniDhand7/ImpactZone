"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[630],{7931:(e,a,t)=>{t.d(a,{Xs:()=>c,bV:()=>x,br:()=>v,gc:()=>u,kx:()=>y,m6:()=>m,mp:()=>p});var s=t(9379),n=t(6305),i=t(5659),l=t(346),o=t(7504),d=t(2392),r=t(962);const c=(e,a)=>async t=>{a&&a(!0);const s={employee:e},o=await(0,n.A)("get",i.A.MANAGE_EMPLOYEE_CERTIFICATES,{},s);o.success&&o.data&&t({type:l.g.CHANGE_MANAGE_EMPLOYEE_CERTIFICATES,payload:o.data}),a&&a(!1)},m=function(e,a,t){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return async o=>{var c;if(a(!0),null!==(c=e.certificate)&&void 0!==c&&c.length){let a=await(0,r.Zn)(e.certificate);e.certificate=a[0].path,e.certificateName=a[0].originalname,e.certificateSize=a[0].size}else e.certificate="";const m=(0,s.A)((0,s.A)({},e),{},{acquiredDate:(0,r.KH)(null===e||void 0===e?void 0:e.acquiredDate),expirationDate:(0,r.KH)(e.expirationDate)}),u=await(0,n.A)("post",i.A.MANAGE_EMPLOYEE_CERTIFICATES,m);u.success&&(l?t.replace("/settings/employee/manage-employee/edit/".concat(u.data._id,"/").concat(l)):t.goBack(),o((0,d.P)({severity:"success",summary:u.message}))),a(!1)}},u=(e,a)=>async t=>{t((0,o.rb)());const s=await(0,n.A)("get",i.A.MANAGE_EMPLOYEE_CERTIFICATES+e);s.success&&s.data&&a&&a(s.data),t((0,o.iG)())},v=function(e,a,t,l){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return async c=>{var m;if(t(!0),null!==(m=a.certificate)&&void 0!==m&&m.length){let e=await(0,r.Zn)(a.certificate);a.certificate=e[0].path,a.certificateName=e[0].originalname,a.certificateSize=e[0].size}else a.certificate="";const u=(0,s.A)((0,s.A)({},a),{},{acquiredDate:(0,r.KH)(null===a||void 0===a?void 0:a.acquiredDate),expirationDate:(0,r.KH)(null===a||void 0===a?void 0:a.expirationDate)}),v=await(0,n.A)("put",i.A.MANAGE_EMPLOYEE_CERTIFICATES+e,u);v.success&&(o?l.replace("/settings/employee/manage-employee/edit/".concat(v.data._id,"/").concat(o)):l.goBack(),c((0,d.P)({severity:"success",summary:v.message}))),t(!1)}},p=(e,a)=>async t=>{const s=await(0,n.A)("delete",i.A.MANAGE_EMPLOYEE_CERTIFICATES+e);s.success?(t((0,d.P)({severity:"success",summary:s.message})),a()):t((0,d.P)({severity:"error",summary:s.message}))},y=(e,a,t)=>async s=>{a&&a(!0);const l=await(0,n.A)("get",i.A.NOTES,"",{employee:e});l.success&&l.data&&t&&t(l.data),a&&a(!1)},x=(e,a,t)=>async s=>{a(!0);const l=await(0,n.A)("post",i.A.NOTES,e);l.success?(s((0,d.P)({severity:"success",summary:l.message})),t()):s((0,d.P)({severity:"error",summary:l.message})),a(!1)}},3249:(e,a,t)=>{t.r(a),t.d(a,{default:()=>ge});var s=t(5043),n=t(5050),i=t(6443),l=t(9379),o=t(3549),d=t(7994),r=t(3191),c=t(7374),m=t(6911),u=t(6038),v=t(962),p=t(9456),y=t(1688),x=t(5711),h=t(9358),A=t(5394),C=t(579);const j=()=>{var e;const a=(0,p.wA)(),{id:t}=(0,y.g)(),n=(0,y.W6)(),[i,j]=(0,s.useState)(!1);(0,s.useEffect)((()=>{a((0,A.oD)()),a((0,h.Eq)())}),[a]);let{allSecurityRoles:E}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.securityRole));E=null===(e=E)||void 0===e?void 0:e.map((e=>({name:e.name,value:e._id}))),(0,s.useEffect)((()=>{t&&a((0,x.l3)(t,(e=>{T({firstName:e.firstName,lastName:e.lastName,middleInitial:e.middleInitial,jobTitle:e.jobTitle,dob:new Date(e.dob),socialSecurity:e.socialSecurity,barCode:e.barCode,accessCode:e.accessCode,email:e.email,multiClubClockIn:e.multiClubClockIn,securityRoles:e.securityRoles,isActive:e.isActive})})))}),[t,a]);const{jobTitle:g}=(0,p.d4)((e=>e.settings.business)),[f,T]=(0,s.useState)({firstName:"",lastName:"",middleInitial:"",jobTitle:null,dob:"",socialSecurity:"",barCode:0,accessCode:"",email:"",multiClubClockIn:!1,securityRoles:[],isActive:!0}),P=e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,f);T((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))},N=e=>{(0,v.nV)(f,T,["jobTitle"])&&a(t?(0,x.JE)(t,f,j,n,e):(0,x.xm)(f,j,n,e))};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.Ay,{col:"12",title:"Personal",children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.wi,{name:"firstName",required:!0,col:3,data:f,onChange:P}),(0,C.jsx)(r.wi,{name:"middleInitial",col:1,data:f,onChange:P}),(0,C.jsx)(r.wi,{name:"lastName",required:!0,data:f,onChange:P}),(0,C.jsx)(r.BR,{name:"jobTitle",data:f,onChange:P,options:null===g||void 0===g?void 0:g.map(((e,a)=>({label:e.jobTitle,value:e._id}))),optionLabel:"label"}),(0,C.jsx)(r.wN,{name:"dob",data:f,onChange:P}),(0,C.jsx)(r.wi,{name:"socialSecurity",data:f,onChange:P}),(0,C.jsx)(r.o4,{name:"isActive",data:f,onChange:P})]})}),(0,C.jsx)(o.Ay,{col:"12",title:"System",children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.Bt,{name:"barCode",required:!0,data:f,onChange:P}),(0,C.jsx)(r.wi,{name:"accessCode",required:!0,data:f,onChange:P}),(0,C.jsx)(r.wi,{name:"email",required:!0,data:f,onChange:P}),(0,C.jsx)(r.BR,{label:"Allow Multi-Club Clock In/Out",name:"multiClubClockIn",options:c.r4,data:f,onChange:P})]})}),(0,C.jsx)(o.Ay,{col:"12",title:"Select Roles",children:(0,C.jsx)("div",{col:12,children:(0,C.jsx)(m.A,{name:"securityRoles",selected:null===f||void 0===f?void 0:f.securityRoles,sourceData:E,onPickListChange:P})})}),(0,C.jsxs)(d.zp,{children:[(0,C.jsx)(d.Ay,{label:"Save",className:"mx-2",onClick:()=>N(""),loading:i}),(0,C.jsx)(d.Ay,{label:"Save & Next",className:"mx-2",onClick:()=>N("?tab=general"),loading:i}),(0,C.jsx)(d.Ti,{label:"Cancel",onClick:()=>n.replace("/settings/employee")})]})]})};var E=t(92),g=t(8424),f=t(8702),T=t(4434);const P={border:"2px dashed #eeeeee",borderRadius:"4px",padding:"60px",textAlign:"center",cursor:"pointer",background:"#fff"},N=e=>{let{name:a,value:t,data:n,onDropChange:i,multiple:o=!0}=e;const[d,r]=(0,s.useState)(t||(null===n||void 0===n?void 0:n[a])||[]);(0,s.useEffect)((()=>{(t||null!==n&&void 0!==n&&n[a])&&JSON.stringify(t||(null===n||void 0===n?void 0:n[a]))!==JSON.stringify(d)&&r(t||(null===n||void 0===n?void 0:n[a]))}),[t||(null===n||void 0===n?void 0:n[a])]),(0,s.useEffect)((()=>{i&&i({name:a,value:d})}),[d,a]);const c=(0,s.useCallback)(((e,a)=>{a.length>0||e.forEach((e=>{d.some((a=>a.name===e.name))||r((a=>[...a,e]))}))}),[d]),{getRootProps:m,getInputProps:u,isDragActive:v,isDragAccept:p,isDragReject:y}=(0,g.VB)({onDrop:c,multiple:o,accept:{"image/*":[".png",".gif",".jpeg",".jpg"]}}),x=(0,s.useMemo)((()=>(0,l.A)((0,l.A)({},p?{borderColor:"#00e676"}:{}),y?{borderColor:"#ff1744"}:{})),[p,y]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",(0,l.A)((0,l.A)({},m({style:x})),{},{style:P,children:[(0,C.jsx)("input",(0,l.A)({},u())),v?y?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.A,{icon:"pi pi-exclamation-triangle",className:"bg-red-50",style:{color:"#252B42"}}),(0,C.jsx)("p",{className:"text-color-secondary font-medium text-lg",children:"Only image files are allowed!"})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.A,{icon:"pi pi-download",className:"bg-green-50",style:{color:"#252B42"}}),(0,C.jsx)("p",{className:"text-color-secondary font-medium text-lg",children:"Drop the photo here..."})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.A,{icon:"pi pi-file",style:{backgroundColor:"#F2F5FE",color:"#252B42"}}),(0,C.jsx)("p",{className:"text-color-secondary font-medium text-lg",children:"Drag your photo here or browse."})]})]})),(0,C.jsx)("div",{className:"flex flex-wrap my-2",children:(null===d||void 0===d?void 0:d.length)>0&&(null===d||void 0===d?void 0:d.map(((e,a)=>(0,C.jsx)(T.A,{className:"p-overlay-badge my-2 mr-3",image:(0,f.b)(e),size:"xlarge",children:(0,C.jsx)(E.E,{value:"X",icon:"pi pi-fast-forward",severity:"danger",className:"cursor-pointer",onClick:()=>(e=>{r((a=>a.filter(((a,t)=>t!==e))))})(a)})}))))})]})},S=()=>{var e;const a=(0,p.wA)(),t=(0,y.W6)(),{id:n}=(0,y.g)(),[i,m]=(0,s.useState)([]),[h,A]=(0,s.useState)([]),[j,E]=(0,s.useState)(!1);(0,s.useEffect)((()=>{(0,v.oj)();const e=(0,v.s6)("US");m(e)}),[a]);const[g,f]=(0,s.useState)({hireDate:"",terminationDate:"",adpId:"",primaryPhone:"",workPhone:"",workPhoneExt:"",mobilePhone:"",faxPhone:"",emergencyPhone:"",emergencyPhoneExt:"",street:"",city:"",state:"",zipCode:"",emailNotification:!0,onlineNickName:"",bio:"",socialMedia:"",alternateEmail:"",image:[]});(0,s.useEffect)((()=>{n&&a((0,x.l3)(n,(e=>{f({hireDate:e.hireDate?new Date(e.hireDate):"",terminationDate:e.terminationDate,adpId:e.adpId,primaryPhone:e.primaryPhone,workPhone:e.workPhone,workPhoneExt:e.workPhoneExt,mobilePhone:e.mobilePhone,faxPhone:e.faxPhone,emergencyPhone:e.emergencyPhone,emergencyPhoneExt:e.emergencyPhoneExt,street:e.street,city:e.city,state:e.state,zipCode:e.zipCode,emailNotification:e.emailNotification,onlineNickName:e.onlineNickName,bio:e.bio,socialMedia:e.socialMedia,alternateEmail:e.alternateEmail,image:e.image?[e.image]:[]});const a=(0,v.Wv)("US",e.state);A(a)})))}),[n,a]),(0,s.useEffect)((()=>{const e=(0,u.A)("city",g.city,g);f((a=>(0,l.A)((0,l.A)({},a),{},{city:g.city,formErrors:e})))}),[g.city]);const T=e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,g);if("state"===a){const e=(0,v.Wv)("US",t);A(e);const a={state:"",city:"",zipCode:""},s=(0,l.A)((0,l.A)((0,l.A)({},(0,u.A)("state",t,a)),(0,u.A)("city","",a)),(0,u.A)("zipCode","",a));f((e=>(0,l.A)((0,l.A)({},e),{},{city:"",zipCode:"",state:t,formErrors:s})))}else f((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))},P=e=>{(0,v.nV)(g,f)&&n&&a((0,x.JE)(n,g,E,t,e))};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.Ay,{col:"12",title:"Employement",children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.wN,{id:"hireDate",name:"hireDate",onChange:T,data:g}),(0,C.jsx)(r.wi,{name:"adpId",onChange:T,data:g})]})}),(0,C.jsx)(o.Ay,{col:"12",title:"Contact",children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.SB,{id:"primaryPhone",name:"primaryPhone",mask:"(999) 999-9999",placeholder:"",onChange:T,data:g}),(0,C.jsx)(r.SB,{id:"workPhone",name:"workPhone",mask:"(999) 999-9999",placeholder:"",onChange:T,data:g}),(0,C.jsx)(r.SB,{id:"mobilePhone",name:"mobilePhone",mask:"(999) 999-9999",placeholder:"",onChange:T,data:g}),(0,C.jsx)(r.SB,{id:"faxPhone",name:"faxPhone",mask:"(999) 999-9999",placeholder:"",onChange:T,data:g}),(0,C.jsx)(r.SB,{id:"emergencyPhone",name:"emergencyPhone",mask:"(999) 999-9999",placeholder:"",onChange:T,data:g}),(0,C.jsx)(r.wi,{name:"street",onChange:T,data:g}),(0,C.jsx)(r.BR,{name:"state",options:i,onChange:T,data:g}),(0,C.jsx)(r.BR,{name:"city",options:h,onChange:T,data:g}),(0,C.jsx)(r.wi,{name:"zipCode",onChange:T,data:g,disabled:!g.state}),(0,C.jsx)(r.BR,{name:"emailNotification",options:c.r4,onChange:T,data:g})]})}),(0,C.jsx)(o.Ay,{col:"12",title:"Online",children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.wi,{name:"onlineNickName",onChange:T,data:g}),(0,C.jsx)(r.wi,{name:"socialMedia",onChange:T,data:g}),(0,C.jsx)(r.wi,{name:"alternateEmail",label:"Alternate Email",onChange:T,data:g}),(0,C.jsx)(r.Ky,{name:"bio",onChange:T,data:g})]})}),(0,C.jsxs)(o.Ay,{col:"12",title:"Photo",children:[(0,C.jsx)(N,{name:"image",onDropChange:T,data:g,multiple:!1}),(0,C.jsx)("div",{className:"p-error text-sm",children:null===g||void 0===g||null===(e=g.formErrors)||void 0===e?void 0:e.image})]}),(0,C.jsxs)(d.zp,{children:[(0,C.jsx)(d.Ay,{label:"Save",className:"mx-2",onClick:()=>P(""),loading:j}),(0,C.jsx)(d.Ay,{label:"Save & Next",className:"mx-2",onClick:()=>P("?tab=departments"),loading:j}),(0,C.jsx)(d.Ti,{label:"Cancel",onClick:()=>t.replace("/settings/employee")})]})]})};var b=t(1047);const w=()=>{const e=(0,p.wA)(),{id:a}=(0,y.g)(),t=(0,y.W6)(),{clubsDropdown:n}=(0,b.A)(),[i,r]=(0,s.useState)(!1);(0,s.useEffect)((()=>{a&&e((0,x.l3)(a,(e=>{u({reportDataAccess:e.reportDataAccess,clubs:e.clubs})})))}),[a,e]);const[c,u]=(0,s.useState)({reportDataAccess:[],clubs:[]}),v=e=>{let{name:a,value:t}=e;u((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t})))};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.Ay,{col:"12",title:"Report Data Access",children:(0,C.jsx)(m.A,{name:"reportDataAccess",selected:null===c||void 0===c?void 0:c.reportDataAccess,sourceData:n,onPickListChange:v})}),(0,C.jsx)(o.Ay,{col:"12",title:"Clubs",children:(0,C.jsx)(m.A,{name:"clubs",selected:null===c||void 0===c?void 0:c.clubs,sourceData:n,onPickListChange:v})}),(0,C.jsxs)(d.zp,{children:[(0,C.jsx)(d.Ay,{label:"Save",className:"mx-2",loading:i,onClick:()=>{a&&e((0,x.JE)(a,c,r,t))}}),(0,C.jsx)(d.Ti,{label:"Cancel",onClick:()=>t.replace("/settings/employee")})]})]})};var I=t(7602),R=t(6411),_=t(7931);const D=()=>{const{id:e}=(0,y.g)(),a=(0,p.wA)(),t=(0,p.d4)((e=>e.profile.user));(0,s.useEffect)((()=>{t&&i((0,l.A)((0,l.A)({},n),{},{takenBy:t.firstName,dateTime:new Date}))}),[t]);const[n,i]=(0,s.useState)({takenBy:null===t||void 0===t?void 0:t.firstName,dateTime:new Date,notes:""}),[d,c]=(0,s.useState)(!1),[m,x]=(0,s.useState)([]),h=e=>{a((0,_.kx)(e,j,(e=>{x(e)})))};(0,s.useEffect)((()=>{e&&h(e)}),[e,a]);const[A,j]=(0,s.useState)(!1),E=[{field:"takenBy",header:"Taken By"},{field:"dateTime",body:e=>(0,v.LF)(e.dateTime),header:"Date/Time"},{field:"notes",header:"Notes"}],g=()=>{i({notes:""}),c(!1)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.oU,{buttonTitle:"Add",onClick:()=>c(!0)}),(0,C.jsx)(I.A,{data:m,columns:E}),(0,C.jsx)(R.A,{width:"100vh",title:"Add Note",visible:d,onCancel:g,loading:A,onSave:()=>{(0,v.nV)(n,i)&&e&&a((0,_.bV)((0,l.A)((0,l.A)({},n),{},{employee:e}),j,(()=>{h(e),g()})))},children:(0,C.jsx)(o.a,{children:(0,C.jsx)(r.Ky,{name:"notes",maxLength:"266",data:n,onChange:e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,n);i((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))},inputClass:"h-17rem\t"})})})]})},O=()=>{const e=(0,p.wA)(),{id:a}=(0,y.g)(),t=(0,y.W6)();(0,s.useEffect)((()=>{e((0,_.Xs)(a))}),[e,a]);const{allCertificates:n}=(0,p.d4)((e=>e.certificates));return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.oU,{buttonTitle:"Add Certifications",linkTo:"/settings/employee/manage-employee/add/certifications/".concat(a)}),(0,C.jsx)(I.A,{data:n,columns:[{field:"name",header:"Name"},{field:"certificateNumber",header:"Cerificate Number"},{field:"description",body:"descriptionBodyTemplate",header:"Description"},{field:"issuer",header:"Issuer"},{field:"acquiredDate",header:"Acquired Date"},{field:"expirationDate",header:"Expiration Date"}],onEdit:e=>{t.push("/settings/employee/manage-employee/edit/".concat(e._id,"/certifications/").concat(a))},onDelete:(t,s)=>{(0,v.QV)((()=>{e((0,_.mp)(t._id,(()=>{e((0,_.Xs)(a))})))}),"Do you want to delete this Certificates ?",s)}})]})};var L=t(8465),k=t(6305),M=t(5659),F=t(2392);function Y(){const{id:e}=(0,y.g)(),a=(0,p.wA)(),{departmentsDropdown:t}=(0,L.A)();(0,s.useEffect)((()=>{n(e)}),[a]);const n=e=>{a(((e,a,t)=>async()=>{a&&a(!0);const s=await(0,k.A)("get",M.A.SETTINGS.MANAGE_EMPLOYEE.DEPARTMENT,"",{employee:e});s.success&&s.data&&t&&t(s.data),a&&a(!1)})(e,m,(e=>{A(e)})))},[i,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!1),[u,x]=(0,s.useState)(null),[h,A]=(0,s.useState)([]),[j,E]=(0,s.useState)({departments:[],wage:0}),g=e=>{let{name:a,value:t}=e;E((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t})))},f=()=>{d(!1),E({departments:[],wage:0}),x(null)};let T=t.filter((e=>!h.map((e=>e.department)).includes(e.value)));return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.oU,{buttonTitle:"Add Department",onClick:()=>d(!0)}),(0,C.jsx)(I.A,{data:h,columns:[{field:"departmentName",header:"Name"},{field:"wage",header:"Wage"}],onEdit:e=>(e=>{x(e);let a=h.find((a=>a._id===e));E({departments:[a.department],wage:a.wage}),d(!0)})(e._id),onDelete:t=>{(0,v.QV)((()=>{a(((e,a)=>async t=>{const s=await(0,k.A)("delete",M.A.SETTINGS.MANAGE_EMPLOYEE.DEPARTMENT+e);s.success?a():t((0,F.P)({severity:"error",summary:s.message}))})(t._id,(()=>{n(e),f()})))}),"Do you want to delete this Employee Department?")}}),(0,C.jsx)(R.A,{title:"Add",visible:i,onCancel:f,loading:c,onSave:()=>{a(u?((e,a,t,s)=>async n=>{t(!0);const i=await(0,k.A)("put",M.A.SETTINGS.MANAGE_EMPLOYEE.DEPARTMENT+e,a);i.success?s():n((0,F.P)({severity:"error",summary:i.message})),t(!1)})(u,{wage:j.wage},m,(()=>{n(e),f()})):((e,a,t)=>async s=>{a(!0);const n=await(0,k.A)("post",M.A.SETTINGS.MANAGE_EMPLOYEE.DEPARTMENT,e);n.success?t():s((0,F.P)({severity:"error",summary:n.message})),a(!1)})((0,l.A)((0,l.A)({},j),{},{employee:e}),m,(()=>{n(e),f()})))},children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.Rx,{col:"12",name:"departments",data:j,onChange:g,options:u?t:T,disabled:!!u}),(0,C.jsx)(r.Bt,{col:"12",name:"wage",data:j,onChange:g,minFractionDigits:4,maxFractionDigits:4})]})})]})}var B=t(1731),V=t(346),G=t(7504);const U=(e,a)=>async t=>{a&&a(!0);const s=await(0,k.A)("get",M.A.EMPLOYEE_CLASSES,{},{employee:e});s.success&&s.data&&t({type:V.g.CHANGE_EMPLOYEE_CLASSES,payload:s.data}),a&&a(!1)},$=(e,a,t)=>async s=>{a(!0);const n=await(0,k.A)("post",M.A.EMPLOYEE_CLASSES,e);n.success?t():s((0,F.P)({severity:"error",summary:n.message})),a(!1)},z=(e,a,t,s)=>async n=>{t(!0);const i=await(0,k.A)("put",M.A.EMPLOYEE_CLASSES+e,a);i.success?s():n((0,F.P)({severity:"error",summary:i.message})),t(!1)},q=e=>{var a;let{visible:t,setVisible:n,id:i,employeeClassId:d,setEmployeeClassId:m}=e;const[y,x]=(0,s.useState)(!1),[h,A]=(0,s.useState)({}),j=(0,p.wA)(),E=()=>{n(!1),b(f),m(null)};(0,s.useEffect)((()=>{d&&g(d)}),[d]);const g=e=>{j(((e,a,t)=>async s=>{a&&a(!0);const n=await(0,k.A)("get",M.A.EMPLOYEE_CLASSES+e);n.success&&n.data&&t&&t(n.data),a&&a(!1)})(e,x,(e=>{A(e)})))},f={payType:"INCREMENTAL_PAY",oneToFiveClients:0,sixToTenClients:0,elevenToFifteenClients:0,sixteenToTwentyClients:0,twentyOneToTwentyFiveClients:0,twentySixPlusClients:0,noRegistrationPay:0,countUnpaidService:!1},T={payType:"PAY_PER_CLASS",payPerClassRate:0,noRegistrationPay:0},P={payType:"PAY_PER_CLIENT",baseRate:0,countUnpaidService:!1,payPerClientRate:0,eachClientOver:[{noOfClients:0,rate:0},{noOfClients:0,rate:0},{noOfClients:0,rate:0}],maxPayPerClient:0,noRegistrationPay:0},N={payType:"PERCENTAGE_RATE",percentage:0,noRegistrationPay:0},[S,b]=(0,s.useState)(f);(0,s.useEffect)((()=>{d||("INCREMENTAL_PAY"===(null===S||void 0===S?void 0:S.payType)?b(f):"PAY_PER_CLASS"===(null===S||void 0===S?void 0:S.payType)?b(T):"PAY_PER_CLIENT"===(null===S||void 0===S?void 0:S.payType)?b(P):"PERCENTAGE_RATE"===(null===S||void 0===S?void 0:S.payType)&&b(N))}),[null===S||void 0===S?void 0:S.payType]),(0,s.useEffect)((()=>{if(d&&h){const{oneToFiveClients:e,sixToTenClients:a,elevenToFifteenClients:t,sixteenToTwentyClients:s,twentyOneToTwentyFiveClients:n,twentySixPlusClients:i,noRegistrationPay:l,payPerClassRate:o,baseRate:d,payPerClientRate:r,maxPayPerClient:c,percentage:m,countUnpaidService:u}=h;let v={};switch(null===h||void 0===h?void 0:h.payType){case"INCREMENTAL_PAY":v={payType:"INCREMENTAL_PAY",oneToFiveClients:e,sixToTenClients:a,elevenToFifteenClients:t,sixteenToTwentyClients:s,twentyOneToTwentyFiveClients:n,twentySixPlusClients:i,noRegistrationPay:l,countUnpaidService:u};break;case"PAY_PER_CLASS":v={payType:"PAY_PER_CLASS",payPerClassRate:o,noRegistrationPay:l};break;case"PAY_PER_CLIENT":v={payType:"PAY_PER_CLIENT",baseRate:d,countUnpaidService:u,payPerClientRate:r,eachClientOver:h.eachClientOver.map((e=>({noOfClients:e.noOfClients,rate:e.rate}))),maxPayPerClient:c,noRegistrationPay:l};break;case"PERCENTAGE_RATE":v={payType:"PERCENTAGE_RATE",percentage:m,noRegistrationPay:l};break;default:v={}}b(v)}}),[h]);const w=e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,S);b((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))},I=(e,a,t)=>{const s=[...S.eachClientOver];s[e][a]=t,b((e=>(0,l.A)((0,l.A)({},e),{},{eachClientOver:s})))};return(0,C.jsx)("div",{children:(0,C.jsx)(R.A,{title:d?"Edit":"Add",visible:t,onCancel:E,loading:y,onSave:()=>{let e=[];e="INCREMENTAL_PAY"===(null===S||void 0===S?void 0:S.payType)?["payPerClassRate","baseRate","payPerClientRate","maxPayPerClient","percentage"]:"PAY_PER_CLASS"===(null===S||void 0===S?void 0:S.payType)?["oneToFiveClients","sixToTenClients","elevenToFifteenClients","sixteenToTwentyClients","twentyOneToTwentyFiveClients","twentySixPlusClients","baseRate","payPerClientRate","maxPayPerClient","percentage"]:"PAY_PER_CLIENT"===(null===S||void 0===S?void 0:S.payType)?["oneToFiveClients","sixToTenClients","elevenToFifteenClients","sixteenToTwentyClients","twentyOneToTwentyFiveClients","twentySixPlusClients","percentage","payPerClassRate"]:["oneToFiveClients","sixToTenClients","elevenToFifteenClients","sixteenToTwentyClients","twentyOneToTwentyFiveClients","twentySixPlusClients","baseRate","payPerClientRate","maxPayPerClient","payPerClassRate"],(0,v.nV)(S,b,e)&&j(d?z(d,S,x,(()=>{j(U(i)),E()})):$((0,l.A)((0,l.A)({},S),{},{employee:i}),x,(()=>{j(U(i)),E()})))},children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.BR,{name:"payType",data:S,onChange:w,options:c.Gj,col:12,disabled:!!d}),"INCREMENTAL_PAY"===(null===S||void 0===S?void 0:S.payType)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r.Yh,{label:"1-5 Clients",name:"oneToFiveClients",data:S,onChange:w}),(0,C.jsx)(r.Yh,{label:"6-10 Clients",name:"sixToTenClients",data:S,onChange:w}),(0,C.jsx)(r.Yh,{label:"11-15 Clients",name:"elevenToFifteenClients",data:S,onChange:w}),(0,C.jsx)(r.Yh,{label:"16-20 Clients",name:"sixteenToTwentyClients",data:S,onChange:w}),(0,C.jsx)(r.Yh,{label:"21-25 Clients",data:S,name:"twentyOneToTwentyFiveClients",onChange:w}),(0,C.jsx)(r.Yh,{label:"26+ Clients",data:S,name:"twentySixPlusClients",onChange:w}),(0,C.jsx)(r.Yh,{name:"noRegistrationPay",data:S,onChange:w}),(0,C.jsx)(r.ZD,{name:"countUnpaidService",label:"Count unpaid services",data:S,onChange:w})]}),"PAY_PER_CLASS"===(null===S||void 0===S?void 0:S.payType)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r.Yh,{data:S,name:"payPerClassRate",onChange:w}),(0,C.jsx)(r.Yh,{name:"noRegistrationPay",data:S,onChange:w})]}),"PAY_PER_CLIENT"===(null===S||void 0===S?void 0:S.payType)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r.Yh,{name:"baseRate",data:S,onChange:w}),(0,C.jsx)(r.Yh,{name:"payPerClientRate",data:S,onChange:w}),null===S||void 0===S||null===(a=S.eachClientOver)||void 0===a?void 0:a.map(((e,a)=>(0,C.jsx)("div",{className:" col-12 ",children:(0,C.jsxs)("div",{className:"grid",children:[(0,C.jsx)(r.Yh,{name:"noOfClients",value:null===e||void 0===e?void 0:e.noOfClients,onChange:e=>I(a,"noOfClients",e.value),col:6}),(0,C.jsx)(r.Yh,{name:"rate",value:null===e||void 0===e?void 0:e.rate,onChange:e=>I(a,"rate",e.value),col:6})]})},a))),(0,C.jsx)(r.Yh,{data:S,name:"noRegistrationPay",onChange:w}),(0,C.jsx)(r.Yh,{data:S,label:"Max Pay",name:"maxPayPerClient",onChange:w}),(0,C.jsx)(r.ZD,{name:"countUnpaidService",label:"Count unpaid services",data:S,onChange:w})]}),"PERCENTAGE_RATE"===(null===S||void 0===S?void 0:S.payType)&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(r.Yh,{data:S,name:"percentage",onChange:w}),(0,C.jsx)(r.Yh,{name:"noRegistrationPay",prefix:"$",data:S,onChange:w,minFractionDigits:4,maxFractionDigits:4})]})]})})})};var Q=t(5253);function H(){var e,a,t;const n=(0,p.wA)(),{id:i}=(0,y.g)(),[c,m]=(0,s.useState)(!1),[h,A]=(0,s.useState)({isClassLevel:[],isDefaultPay:""});(0,s.useEffect)((()=>{_()}),[n]),(0,s.useEffect)((()=>{n((0,Q.ui)())}),[n]);const{levelDropdown:j}=(0,p.d4)((e=>e.settings.schedule)),E=(0,s.useId)(),[g,f]=(0,s.useState)({employee:""}),[T,P]=(0,s.useState)(!1),[N,S]=(0,s.useState)(!1),[b,w]=(0,s.useState)(null);let{allEmployeeClasses:I}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.employees));(0,s.useEffect)((()=>{I&&A((e=>{var a;return(0,l.A)((0,l.A)({},e),{},{isClassLevel:null===(a=I)||void 0===a?void 0:a.isClassLevel})}))}),[I]);const _=()=>{n(U(i))};(0,s.useEffect)((()=>{n((0,x.qV)("class"))}),[n]);let{allEmployeesFilter:D}=(0,p.d4)((e=>e.settings.employee));D=null===(e=D)||void 0===e?void 0:e.filter((e=>e._id!==i));const O=e=>{(0,v.QV)((()=>{n(((e,a)=>async t=>{const s=await(0,k.A)("delete",M.A.EMPLOYEE_CLASSES+e);s.success?a():t((0,F.P)({severity:"error",summary:s.message}))})(e._id,(()=>{_()})))}),"Do you want to delete this Employee Classes?")},L=(e,a)=>{switch(e.payType){case"INCREMENTAL_PAY":return(0,C.jsxs)("div",{className:"flex",children:[(0,C.jsxs)("div",{className:"mx-3 flex w-2",children:[(0,C.jsx)("div",{className:"my-auto mr-4",children:a+1}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"font-medium",children:"Pay"}),(0,C.jsx)("div",{children:"Incremental Pay"})]})]}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium ",children:"1-5 Clients"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.oneToFiveClients]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"6-10 Clients"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.sixToTenClients]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"11-15 Clients"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.elevenToFifteenClients]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"16-20 Clients"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.sixteenToTwentyClients]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"21-25 Clients"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.twentyOneToTwentyFiveClients]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"26+ Clients"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.twentySixPlusClients]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"No Registration Pay"}),(0,C.jsxs)("div",{children:["$",null!==e&&void 0!==e&&e.noRegistrationPay?null===e||void 0===e?void 0:e.noRegistrationPay:"0"]})]})]});case"PAY_PER_CLIENT":return(0,C.jsxs)("div",{className:"flex",children:[(0,C.jsxs)("div",{className:"mx-3 flex w-2",children:[(0,C.jsx)("div",{className:"my-auto mr-4",children:a+1}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"font-medium",children:"Pay"}),(0,C.jsx)("div",{children:"Pay Per Client"})]})]}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"Base Rate"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.baseRate]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"Per Client"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.payPerClientRate]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"ml-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"For each client over"}),(0,C.jsx)("div",{children:null===e||void 0===e?void 0:e.eachClientOver[0].noOfClients})]}),(0,C.jsxs)("div",{className:"ml-1 mr-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"Add"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.eachClientOver[0].rate]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"ml-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"For each client over"}),(0,C.jsx)("div",{children:null===e||void 0===e?void 0:e.eachClientOver[1].noOfClients})]}),(0,C.jsxs)("div",{className:"ml-1 mr-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"Add"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.eachClientOver[1].rate]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"ml-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"For each client over"}),(0,C.jsx)("div",{children:null===e||void 0===e?void 0:e.eachClientOver[2].noOfClients})]}),(0,C.jsxs)("div",{className:"ml-1 mr-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"Add"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.eachClientOver[2].rate]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-2",children:[(0,C.jsx)("div",{className:"font-medium",children:"No Registration Pay"}),(0,C.jsxs)("div",{children:["$",null!==e&&void 0!==e&&e.noRegistrationPay?null===e||void 0===e?void 0:e.noRegistrationPay:"0"]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-2",children:[(0,C.jsx)("div",{className:"font-medium",children:"Max Pay"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.noRegistrationPay]})]})]});case"PAY_PER_CLASS":return(0,C.jsxs)("div",{className:"flex",children:[(0,C.jsxs)("div",{className:"mx-3 flex w-2",children:[(0,C.jsx)("div",{className:"my-auto mr-4",children:a+1}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"font-medium",children:"Pay"}),(0,C.jsx)("div",{children:"Pay Per Class"})]})]}),(0,C.jsxs)("div",{className:"mx-3 w-1",children:[(0,C.jsx)("div",{className:"font-medium",children:"Price"}),(0,C.jsxs)("div",{children:["$",null===e||void 0===e?void 0:e.payPerClassRate]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"No Registration Pay"}),(0,C.jsxs)("div",{children:["$",null!==e&&void 0!==e&&e.noRegistrationPay?null===e||void 0===e?void 0:e.noRegistrationPay:"0"]})]})]});case"PERCENTAGE_RATE":return(0,C.jsxs)("div",{className:"flex",children:[(0,C.jsxs)("div",{className:"mx-3 flex w-2",children:[(0,C.jsx)("div",{className:"my-auto mr-4",children:a+1}),(0,C.jsxs)("div",{children:[(0,C.jsx)("div",{className:"font-medium",children:"Pay"}),(0,C.jsx)("div",{children:"% Rate"})]})]}),(0,C.jsxs)("div",{className:"mx-3 w-1",children:[(0,C.jsx)("div",{className:"font-medium",children:"Percentage"}),(0,C.jsxs)("div",{children:[null===e||void 0===e?void 0:e.percentage,"%"]})]}),(0,C.jsx)("hr",{className:"text-100"}),(0,C.jsxs)("div",{className:"mx-3",children:[(0,C.jsx)("div",{className:"font-medium",children:"No Registration Pay"}),(0,C.jsxs)("div",{children:["$",null!==e&&void 0!==e&&e.noRegistrationPay?null===e||void 0===e?void 0:e.noRegistrationPay:"0"]})]})]});default:return(0,C.jsxs)("div",{className:"grid",children:[(0,C.jsx)("div",{className:"col-1",children:a+1}),(0,C.jsx)("div",{className:"col-11",children:e.payType})]})}};return(0,C.jsxs)("div",{children:[(0,C.jsx)(o.oU,{buttonTitle:"Add",onClick:()=>P(!0),extraClass:"align-items-end ",children:(0,C.jsxs)("div",{className:" flex justify-content-between align-items-end",children:[(0,C.jsx)(r.Rx,{name:"isClassLevel",col:6,options:j,optionLabel:"name",data:h,onChange:e=>{let{name:a,value:t}=e;n(((e,a,t)=>async s=>{const n={employee:e,isClassLevel:a},i=await(0,k.A)("post",M.A.UPDATE_CLASS_LEVEL,n);i.success?t():s((0,F.P)({severity:"error",summary:i.message}))})(i,t,(()=>{}))),A((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t})))}}),(0,C.jsx)(d.Ay,{name:"Similar To",className:"w-12rem",label:"Similar To",onClick:()=>m(!0)})]})}),(0,C.jsxs)(o.Ay,{col:"12",title:"Pay",children:[(0,C.jsx)(B.U$,{value:null===(a=I)||void 0===a?void 0:a.list,itemTemplate:e=>{const a=I.list.findIndex((a=>a._id===e._id));return(0,C.jsxs)("div",{className:"col-12 grid py-2  ",children:[(0,C.jsx)("div",{className:"col-10",children:L(e,a)}),(0,C.jsx)("div",{className:"col-1 my-auto",children:(0,C.jsx)(r.o4,{name:"isDefaultPay",label:"Default Pay",checked:null===e||void 0===e?void 0:e.isDefaultPay,onChange:a=>((e,a)=>{var t,s;I=null===(t=I)||void 0===t||null===(s=t.list)||void 0===s?void 0:s.map((t=>t._id===e?(n(z(null===t||void 0===t?void 0:t._id,{isDefaultPay:a},S,(()=>{_()}))),(0,l.A)((0,l.A)({},t),{},{isDefaultPay:a})):(0,l.A)((0,l.A)({},t),{},{isDefaultPay:!1})))})(e._id,a.value)})}),(0,C.jsxs)("div",{className:"col-1 my-auto",children:[(0,C.jsx)("i",{className:"mx-3 cursor-pointer pi pi-pencil",onClick:()=>(e=>{w(null===e||void 0===e?void 0:e._id),P(!0)})(e)}),(0,C.jsx)("i",{className:" cursor-pointer pi pi-trash",onClick:()=>O(e)})]})]},E)},paginator:!0,rows:5}),(0,C.jsx)(q,{visible:T,setVisible:P,id:i,employeeClassId:b,setEmployeeClassId:w})]}),(0,C.jsx)(R.A,{title:"Similar To",visible:c,onCancel:()=>m(!1),loading:N,onSave:()=>{var e,a;(0,v.nV)(g,f)&&(n($({type:"class",employeeClassData:null===g||void 0===g||null===(e=g.employee)||void 0===e?void 0:e.employeeClassData,similarTo:null===g||void 0===g||null===(a=g.employee)||void 0===a?void 0:a.id,employee:i},S,(()=>{n(U(i)),m(!1)}))),f({employee:""}))},children:(0,C.jsx)(o.a,{children:(0,C.jsx)(r.BR,{name:"employee",col:12,data:g,onChange:e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,g);f((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))},options:null===(t=D)||void 0===t?void 0:t.map((e=>({name:"".concat(e.firstName," ").concat(e.middleInitial," ").concat(e.lastName),value:{id:e._id,employeeClassData:e.employeeClassData}})))})})})]})}var K=t(9106);function X(){var e;const{id:a}=(0,y.g)(),t=(0,p.wA)(),[n,i]=(0,s.useState)([]),[d,m]=(0,s.useState)(!1),[x,h]=(0,s.useState)(!1),[A,j]=(0,s.useState)({event:"",priority:"MEDIUM"}),[E,g]=(0,s.useState)("");let{isClassLevel:f}=(0,p.d4)((e=>{var a;return null===e||void 0===e||null===(a=e.settings)||void 0===a?void 0:a.employee}));(0,s.useEffect)((()=>{N(a),t((0,K.kQ)())}),[]);const{events:T}=(0,p.d4)((e=>e.settings.schedule)),P=null===T||void 0===T||null===(e=T.filter((e=>{var a;return(null===e||void 0===e||null===(a=e.eventLevel)||void 0===a?void 0:a.includes(f))&&"Class"===e.eventType})))||void 0===e?void 0:e.map((e=>({name:e.name,value:e._id}))),N=e=>{t(((e,a,t)=>async s=>{a&&a(!0);const n=await(0,k.A)("get",M.A.SUSTITITION_OPTIONS,"",{employee:e});n.success&&n.data&&t&&t(n.data),a&&a(!1)})(e,m,(e=>{i(e)})))};(0,s.useEffect)((()=>{E&&t(((e,a)=>async t=>{t((0,G.rb)());const s=await(0,k.A)("get",M.A.SUSTITITION_OPTIONS+e);s.success&&(t((0,G.iG)()),a&&a(s.data)),t((0,G.iG)())})(E,(e=>{j({event:e.event,priority:e.priority})})))}),[E,t]);const S=e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,A);j((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))},b=()=>{h(!1),j({event:"",priority:"MEDIUM"}),g(null)};return(0,C.jsxs)("div",{children:[(0,C.jsx)(o.oU,{buttonTitle:"Add",onClick:()=>h(!0)}),(0,C.jsx)(o.Ay,{col:"12",title:"Classes",children:(0,C.jsx)(I.A,{data:n,columns:[{field:"event",header:"Name"},{field:"priority",header:"Priority"}],onEdit:e=>{g(null===e||void 0===e?void 0:e._id),h(!0)},onDelete:e=>{(0,v.QV)((()=>{t(((e,a)=>async t=>{const s=await(0,k.A)("delete",M.A.SUSTITITION_OPTIONS+e);s.success?(t((0,F.P)({severity:"success",summary:s.message})),a()):t((0,F.P)({severity:"error",summary:s.message}))})(e._id,(()=>{N(a),b()})))}),"Do you want to delete this Substitution Option?")}})}),(0,C.jsx)(R.A,{title:E?"Edit":"Add",visible:x,onCancel:b,loading:d,onSave:()=>{(0,v.nV)(A,j)&&t(E?((e,a,t,s)=>async()=>{t(!0),(await(0,k.A)("put",M.A.SUSTITITION_OPTIONS+e,a)).success&&s(),t(!1)})(E,(0,l.A)((0,l.A)({},A),{},{employee:a}),m,(()=>{N(a),b()})):((e,a,t)=>async s=>{a(!0);const n=await(0,k.A)("post",M.A.SUSTITITION_OPTIONS,e);n.success?t():s((0,F.P)({severity:"error",summary:n.message})),a(!1)})((0,l.A)((0,l.A)({},A),{},{employee:a}),m,(()=>{N(a),b()})))},children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.BR,{name:"event",data:A,onChange:S,options:P,col:12}),(0,C.jsx)(r.BR,{name:"priority",data:A,onChange:S,options:c.ip,col:12})]})})]})}const W=()=>{const e=[{title:"Pay",content:(0,C.jsx)(H,{})},{title:"Substitute Option",content:(0,C.jsx)(X,{})}];let{isClassLevel:a}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.employees));return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(i.A,{name:"classes",tabs:e,useIndex:!0,disabledTabIndices:a?[]:[1]})})},J=(e,a,t)=>async s=>{t&&t(!0);const n=await(0,k.A)("get",M.A.EMPLOYEE_APPOINTMENT,{},{employee:e,type:a});n.success&&n.data&&s({type:V.g.CHANGE_EMPLOYEE_APPOINTMENT_PAY,payload:n.data}),t&&t(!1)},Z=(e,a,t)=>async s=>{a(!0);const n=await(0,k.A)("post",M.A.EMPLOYEE_APPOINTMENT,e);n.success?t():s((0,F.P)({severity:"error",summary:n.message})),a(!1)},ee=(e,a,t,s)=>async n=>{let i;t(!0),i="appointment"===e?await(0,k.A)("post",M.A.EMPLOYEE_APPOINTMENT,a):await(0,k.A)("post",M.A.SALES_COMMISSION,a),i.success?s():n((0,F.P)({severity:"error",summary:i.message})),t(!1)},ae=e=>{var a;let{funcGetEmpAppointment:t,id:n,setVisible:i,visible:d,employeeAppartId:m,setEmployeeAppartId:y}=e;const x=(0,p.wA)(),h={event:[],priority:"PER-EVENT",type:"PAY",pay:0,amountType:"FIXED"},[A,j]=(0,s.useState)(h),[E,g]=(0,s.useState)(!1);(0,s.useEffect)((()=>{x((0,K.kQ)())}),[x]);let{isAppointmentLevel:f,allAppointmentPayDropdown:T}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.employees));const{events:P}=(0,p.d4)((e=>e.settings.schedule)),N=null===P||void 0===P||null===(a=P.filter((e=>{var a;return(null===(a=e.eventLevel)||void 0===a?void 0:a.some((e=>f.includes(e))))&&"Appointments"===e.eventType})))||void 0===a?void 0:a.map((e=>({name:e.name,value:e._id}))),S=N.filter((e=>!(null!==T&&void 0!==T&&T.map((e=>e.name)).includes(e.name))||(null===A||void 0===A?void 0:A.event)===(null===e||void 0===e?void 0:e.value))),b=N.filter((e=>!(null!==T&&void 0!==T&&T.map((e=>e.name)).includes(e.name))));(0,s.useEffect)((()=>{m&&x(((e,a,t)=>async s=>{a&&a(!0);const n=await(0,k.A)("get",M.A.EMPLOYEE_APPOINTMENT+e);n.success&&n.data&&t&&t(n.data),a&&a(!1)})(m,g,(e=>{j({event:e.event,priority:e.priority,type:"PAY",pay:e.pay,amountType:e.amountType})})))}),[m,x]);const w=e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,A);j((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))},I=()=>{y(null),j(h),i(!1)};return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(R.A,{title:m?"Edit":"Add",visible:d,onCancel:I,loading:E,onSave:()=>{(0,v.nV)(A,j)&&x(m?((e,a,t,s)=>async n=>{t(!0);const i=await(0,k.A)("put",M.A.EMPLOYEE_APPOINTMENT+e,a);i.success?s():n((0,F.P)({severity:"error",summary:i.message})),t(!1)})(m,(0,l.A)({},A),g,(()=>{t(),I()})):Z((0,l.A)((0,l.A)({},A),{},{employee:n}),g,(()=>{t(),I()})))},children:(0,C.jsxs)(o.a,{children:[m?(0,C.jsx)(r.BR,{name:"event",data:A,onChange:w,options:S,col:12}):(0,C.jsx)(r.Rx,{name:"event",data:A,onChange:w,options:b,col:12}),(0,C.jsx)(r.BR,{name:"priority",data:A,onChange:w,options:c.y5,col:12}),(0,C.jsx)(r.Bt,{col:8,name:"pay",data:A,onChange:w,minFractionDigits:4,maxFractionDigits:4}),(0,C.jsx)(r.BR,{label:"",name:"amountType",options:c.$b,data:A,onChange:w,col:4})]})})})},te=()=>{var e,a;const t=(0,p.wA)(),[n,i]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null),[h,A]=(0,s.useState)(!1),[j,E]=(0,s.useState)(!1),{id:g}=(0,y.g)(),[f,T]=(0,s.useState)({isDefaultPay:"",isAppointmentLevel:[]}),[P,N]=(0,s.useState)({employee:""});let{allAppointmentPay:S}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.employees));const b=(0,s.useCallback)((()=>{t(J(g,"PAY"))}),[t,g]);(0,s.useEffect)((()=>{b()}),[b]),(0,s.useEffect)((()=>{t((0,Q.ui)())}),[t]),(0,s.useEffect)((()=>{S&&T((e=>(0,l.A)((0,l.A)({},e),{},{isAppointmentLevel:null===S||void 0===S?void 0:S.isAppointmentLevel})))}),[S]);const{levelDropdown:w}=(0,p.d4)((e=>e.settings.schedule));(0,s.useEffect)((()=>{t((0,x.qV)("appointment"))}),[t]);let{allEmployeesFilter:_}=(0,p.d4)((e=>e.settings.employee));_=null===(e=_)||void 0===e?void 0:e.filter((e=>e._id!==g));return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.oU,{buttonTitle:"Add",onClick:()=>i(!0),extraClass:"align-items-end",children:(0,C.jsxs)("div",{className:" flex justify-content-between align-items-end",children:[(0,C.jsx)(r.Rx,{extraClassName:"w-18rem",name:"isAppointmentLevel",label:"Appointment Level",options:w,optionLabel:"name",data:f,onChange:e=>{let{name:a,value:s}=e;const n=(0,u.A)(a,s,f);"isAppointmentLevel"===a&&(t(((e,a,t)=>async s=>{const n={employee:e,isAppointmentLevel:a},i=await(0,k.A)("post",M.A.UPDATE_APPOINTMENT_CLASS_LEVEL,n);i.success?t():s((0,F.P)({severity:"error",summary:i.message}))})(g,s,(()=>{b()}))),T((e=>(0,l.A)((0,l.A)({},e),{},{[a]:s,formErrors:n})))),T((e=>(0,l.A)((0,l.A)({},e),{},{[a]:s,formErrors:n})))}}),(0,C.jsx)(d.Ay,{name:"Similar To",className:"w-12rem",label:"Similar To",onClick:()=>A(!0)})]})}),(0,C.jsx)(I.A,{data:null===S||void 0===S?void 0:S.list,columns:[{field:"event",header:"Name"},{field:"priority",header:"Priority"},{field:"pay",header:"Pay"}],onEdit:e=>{m(null===e||void 0===e?void 0:e._id),i(!0)},onDelete:e=>{(0,v.QV)((()=>{t(((e,a)=>async t=>{const s=await(0,k.A)("delete",M.A.EMPLOYEE_APPOINTMENT+e);s.success?a():t((0,F.P)({severity:"error",summary:s.message}))})(e._id,(()=>{b(),i(!1)})))}),"Do you want to delete this Appartment Pay?")}}),(0,C.jsx)(ae,{funcGetEmpAppointment:b,id:g,setVisible:i,visible:n,employeeAppartId:c,setEmployeeAppartId:m}),(0,C.jsx)(R.A,{title:"Similar To",visible:h,onCancel:()=>A(!1),loading:j,onSave:()=>{if((0,v.nV)(P,N)){var e,a,s;const n=null===P||void 0===P||null===(e=P.employee)||void 0===e||null===(a=e.employeeAppointmentData)||void 0===a?void 0:a.filter((e=>{var a;return!(null!==S&&void 0!==S&&null!==(a=S.list)&&void 0!==a&&a.some((a=>a.eventId===e.event)))}));t(Z({type:"PAY",employeeAppointmentData:n,similarTo:null===P||void 0===P||null===(s=P.employee)||void 0===s?void 0:s.id,employee:g},E,(()=>{t(J(g,"PAY")),A(!1)}))),N({employee:""})}},children:(0,C.jsx)(o.a,{children:(0,C.jsx)(r.BR,{name:"employee",col:12,data:P,onChange:e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,P);N((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))},options:null===(a=_)||void 0===a?void 0:a.map((e=>{var a;return{name:"".concat(e.firstName," ").concat(e.middleInitial," ").concat(e.lastName),value:{id:e._id,employeeAppointmentData:null===(a=e.employeeAppointmentData)||void 0===a?void 0:a.filter((e=>"PAY"===e.type))}}}))})})})]})};var se=t(45),ne=t(4437),ie=t(1806);const le=["over","duration"],oe=e=>{var a,t,n;let{type:i}=e;const m=(0,p.wA)(),{id:h}=(0,y.g)(),[A,j]=(0,s.useState)(!1),E={bonusType:"SERVICE_VALUE",sessionsValue:0,ofSessions:0,over:0,duration:"DAYS",bonusAmount:0,type:"BONUS",amountType:"FIXED",services:[]},[g,f]=(0,s.useState)(!1),[T,P]=(0,s.useState)(!1),[N,S]=(0,s.useState)(null),[b,w]=(0,s.useState)([]),[_,D]=(0,s.useState)(E),[O,L]=(0,s.useState)({employee:""});(0,s.useEffect)((()=>{m((0,x.qV)("appointment"===i?"appointment":"salesCommission"))}),[m,i]);let{allEmployeesFilter:Y}=(0,p.d4)((e=>e.settings.employee));Y=null===(a=Y)||void 0===a?void 0:a.filter((e=>e._id!==h));const B=e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,_);D((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))};(0,s.useEffect)((()=>{m((0,ie.mP)()),m((0,K.kQ)())}),[m]);const{catalogServiceDropdown:V}=(0,p.d4)((e=>e.catalogItems));let{isAppointmentLevel:U}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.employees));const{events:$}=(0,p.d4)((e=>e.settings.schedule)),z=null===$||void 0===$||null===(t=$.filter((e=>{var a;return(null===e||void 0===e||null===(a=e.eventLevel)||void 0===a?void 0:a.includes(U))&&"Appointments"===e.eventType})))||void 0===t?void 0:t.map((e=>({name:e.name,value:e._id})));(0,s.useEffect)((()=>{q(h)}),[]);const q=e=>{m("appointment"===i?J(e,"BONUS",P):(0,ne.Kb)(e,"BONUS",P,(e=>{w(e)})))};let{allAppointmentPay:Q}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.employees));(0,s.useEffect)((()=>{N&&m(((e,a,t)=>async s=>{let n;s((0,G.rb)()),n="appointment"===e?await(0,k.A)("get",M.A.EMPLOYEE_APPOINTMENT+a):await(0,k.A)("get",M.A.SALES_COMMISSION+a),n.success&&(s((0,G.iG)()),t&&t(n.data)),s((0,G.iG)())})(i,N,(e=>{D({bonusType:e.bonusType,sessionsValue:e.sessionsValue,ofSessions:e.ofSessions,over:e.selectTimeframe.over,duration:e.selectTimeframe.duration,bonusAmount:e.bonusAmount,type:"BONUS",amountType:e.amountType,services:e.services})})))}),[N,m]);const H=()=>{S(null),D(E),f(!1)};return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.oU,{buttonTitle:"Add",onClick:()=>f(!0),children:(0,C.jsx)("div",{className:" flex justify-content-between align-items-end",children:(0,C.jsx)(d.Ay,{name:"Similar To",className:"w-12rem",label:"Similar To",onClick:()=>j(!0)})})}),(0,C.jsx)(I.A,{data:"appointment"===i?null===Q||void 0===Q?void 0:Q.list:b,columns:[{field:"bonusType",body:e=>"SERVICE_VALUE"===e.bonusType?"Service Value":"Single Client",header:"Bonus Type"},{field:"Session",body:e=>"SERVICE_VALUE"===e.bonusType?e.sessionsValue:e.ofSessions,header:"Value"},{field:"selectTimeframe.over",body:e=>e.selectTimeframe.over+" "+e.selectTimeframe.duration.toLowerCase(),header:"Time Frame"},{field:"bonusAmount",body:e=>"FIXED"===e.amountType?"$"+e.bonusAmount:e.bonusAmount+"%",header:"Bonus Amount"},{field:"services",body:e=>{var a,t;return null===(a=e.services)||void 0===a||null===(t=a.map((e=>e.name)))||void 0===t?void 0:t.join(",")},header:"Services"}],onEdit:e=>{S(null===e||void 0===e?void 0:e._id),f(!0)},onDelete:e=>{(0,v.QV)((()=>{m(((e,a,t)=>async s=>{let n;n="appointment"===e?await(0,k.A)("delete",M.A.EMPLOYEE_APPOINTMENT+a):await(0,k.A)("delete",M.A.SALES_COMMISSION+a),n.success?(s((0,F.P)({severity:"success",summary:n.message})),t()):s((0,F.P)({severity:"error",summary:n.message}))})(i,e._id,(()=>{q(h),H()})))}),"Do you want to delete this Bonus?")}}),(0,C.jsx)(R.A,{title:N?"Edit":"Add",visible:g,onCancel:H,loading:T,onSave:()=>{let e=[];if(e="SINGLE_CLIENT"===(null===_||void 0===_?void 0:_.bonusType)?["sessionsValue"]:["ofSessions"],(0,v.nV)(_,D,e)){const{over:e,duration:a}=_,t=(0,se.A)(_,le);m(N?((e,a,t,s,n)=>async()=>{let i;s(!0),i="appointment"===e?await(0,k.A)("put",M.A.EMPLOYEE_APPOINTMENT+a,t):await(0,k.A)("put",M.A.SALES_COMMISSION+a,t),i.success&&n(),s(!1)})(i,N,(0,l.A)((0,l.A)({},t),{},{selectTimeframe:{over:e,duration:a}}),P,(()=>{q(h),H()})):ee(i,(0,l.A)((0,l.A)({},t),{},{selectTimeframe:{over:e,duration:a},employee:h}),P,(()=>{q(h),H()})))}},width:"90vh",children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.BR,{label:"",name:"bonusType",data:_,onChange:B,options:c.lG,col:6}),"SINGLE_CLIENT"===(null===_||void 0===_?void 0:_.bonusType)?(0,C.jsx)(r.Bt,{col:6,label:"No of Sessions",name:"ofSessions",data:_,onChange:B}):(0,C.jsx)(r.Bt,{col:6,name:"sessionsValue",data:_,onChange:B,minFractionDigits:4,maxFractionDigits:4}),(0,C.jsx)(r.Bt,{col:"6",name:"over",data:_,onChange:B}),(0,C.jsx)(r.BR,{label:"",name:"duration",data:_,onChange:B,col:6,options:c.bH}),(0,C.jsx)(r.Bt,{col:8,name:"bonusAmount",data:_,onChange:B,minFractionDigits:4,maxFractionDigits:4}),(0,C.jsx)(r.BR,{label:"",name:"amountType",options:c.$b,data:_,onChange:B,col:4}),(0,C.jsx)(r.Rx,{col:"12",name:"services",data:_,onChange:B,options:"appointment"===i?z:V})]})}),(0,C.jsx)(R.A,{title:"Similar To",visible:A,onCancel:()=>j(!1),loading:T,onSave:()=>{var e,a,t;(0,v.nV)(O,L)&&(m(ee(i,(0,l.A)((0,l.A)({},"appointment"===i?{employeeBonusData:null===O||void 0===O||null===(e=O.employee)||void 0===e?void 0:e.employeeAppointmentData}:{employeeSalesCommissionData:null===O||void 0===O||null===(a=O.employee)||void 0===a?void 0:a.employeeSalesCommissionData,type:"bonus"}),{},{similarTo:null===O||void 0===O||null===(t=O.employee)||void 0===t?void 0:t.id,employee:h}),P,(()=>{q(h),j(!1)}))),L({employee:""}))},children:(0,C.jsx)(o.a,{children:(0,C.jsx)(r.BR,{name:"employee",col:12,data:O,onChange:e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,O);L((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))},options:null===(n=Y)||void 0===n?void 0:n.map((e=>{var a,t;return{name:"".concat(e.firstName," ").concat(e.middleInitial," ").concat(e.lastName),value:"appointment"===i?{id:e._id,employeeAppointmentData:null===(a=e.employeeAppointmentData)||void 0===a?void 0:a.filter((e=>"BONUS"===e.type))}:{id:e._id,employeeSalesCommissionData:null===(t=e.employeeSalesCommissionData)||void 0===t?void 0:t.filter((e=>"BONUS"===e.type))}}}))})})})]})},de=()=>{const e=(0,p.wA)(),{id:a}=(0,y.g)();(0,s.useEffect)((()=>{e((0,K.kQ)()),e(J(a,"PAY"))}),[e]);let{events:t}=(0,p.d4)((e=>e.settings.schedule)),{isAppointmentLevel:n}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.employees));const[i,l]=(0,s.useState)([]);(0,s.useEffect)((()=>{if(t){const e=null===t||void 0===t?void 0:t.filter((e=>{var a;return(null===e||void 0===e||null===(a=e.eventLevel)||void 0===a?void 0:a.includes(n))&&"Appointments"===e.eventType}));l(e)}}),[n,t]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"shadow-2 bg-blue-300 p-3 mb-2  text-white",children:"Please Click & hold the icon to drag & Sort the events"}),(0,C.jsx)(I.A,{data:i,columns:[{field:"name",header:"Event"},{field:"eventType",header:"Event Type"}],reorderableRows:!0,onRowReorder:a=>{l(a.value),e((0,x.Y$)(a.value,(()=>{e((0,K.kQ)())})))}})]})},re=()=>{const e=[{title:"Pay",content:(0,C.jsx)(te,{})},{title:"Bonus",content:(0,C.jsx)(oe,{type:"appointment"})},{title:"Calendar Default",content:(0,C.jsx)(de,{})}];let{isAppointmentLevel:a}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.employees));return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(i.A,{name:"appointment",tabs:e,useIndex:!0,disabledTabIndices:a?[]:[1,2]})})};var ce=t(9803);const me=()=>{var e,a;const t=(0,p.wA)(),[n,i]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[A,j]=(0,s.useState)(!1),[E,g]=(0,s.useState)(null),[f,T]=(0,s.useState)([]),P={commissionGroup:"",type:"ITEM_COMMISSION",commissionType:"PER_ITEM",amountType:"FIXED",pay:"0"},[N,S]=(0,s.useState)(P),{id:b}=(0,y.g)(),[w,_]=(0,s.useState)({employee:""});(0,s.useEffect)((()=>{t((0,x.qV)("salesCommission"))}),[t]);let{allEmployeesFilter:D}=(0,p.d4)((e=>e.settings.employee));D=null===(e=D)||void 0===e?void 0:e.filter((e=>e._id!==b));(0,s.useEffect)((()=>{L(b),t((0,ce.St)())}),[]);const{commissionGroupsDropdown:O}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.commissionGroup)),L=e=>{t((0,ne.Kb)(e,"ITEM_COMMISSION",j,(e=>{T(e)})))};(0,s.useEffect)((()=>{E&&t((0,ne.DI)(E,j,(e=>{S({commissionGroup:e.commissionGroup,type:e.type,commissionType:e.commissionType,amountType:e.amountType,pay:e.pay})})))}),[E,t]);const k=()=>{g(null),S(P),h(!1)},M=e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,N);S((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))};let F=O.filter((e=>!f.map((e=>e.commissionGroupId)).includes(e.value)));return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.oU,{buttonTitle:"Add",onClick:()=>h(!0),children:(0,C.jsx)("div",{className:" flex justify-content-between align-items-end",children:(0,C.jsx)(d.Ay,{name:"Similar To",className:"w-12rem",label:"Similar To",onClick:()=>i(!0)})})}),(0,C.jsx)(I.A,{data:f,columns:[{field:"commissionGroup",header:"Commission Group"},{field:"commissionType",header:"Commission Type"},{field:"pay",header:"Pay"}],onEdit:e=>{g(null===e||void 0===e?void 0:e._id),h(!0)},onDelete:e=>{(0,v.QV)((()=>{t((0,ne.E2)(e._id,(()=>{L(b),k()})))}),"Do you want to delete this Item Commission?")}}),(0,C.jsx)(R.A,{title:E?"Edit":"Add",visible:m,onCancel:k,loading:A,onSave:()=>{(0,v.nV)(N,S)&&t(E?(0,ne.m6)(E,(0,l.A)({},N),j,(()=>{L(b),k()})):(0,ne.N3)((0,l.A)((0,l.A)({},N),{},{employee:b}),j,(()=>{L(b),k()})))},children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.BR,{name:"commissionGroup",data:N,onChange:M,options:E?O:F,disabled:!!E,optionLabel:"name",col:12}),(0,C.jsx)(r.BR,{name:"commissionType",data:N,onChange:M,options:c.YB,col:12}),(0,C.jsx)(r.Yh,{name:"pay",data:N,onChange:M}),(0,C.jsx)(r.BR,{label:"",name:"amountType",options:c.$b,data:N,onChange:M,col:4})]})}),(0,C.jsx)(R.A,{title:"Similar To",visible:n,onCancel:()=>i(!1),loading:A,onSave:()=>{var e,a;(0,v.nV)(w,_)&&(t((0,ne.N3)({employeeSalesCommissionData:null===w||void 0===w||null===(e=w.employee)||void 0===e?void 0:e.employeeSalesCommissionData,similarTo:null===w||void 0===w||null===(a=w.employee)||void 0===a?void 0:a.id,employee:b,type:"itemCommission"},j,(()=>{L(b),i(!1)}))),_({employee:""}))},children:(0,C.jsx)(o.a,{children:(0,C.jsx)(r.BR,{name:"employee",col:12,data:w,onChange:e=>{let{name:a,value:t}=e;const s=(0,u.A)(a,t,w);_((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t,formErrors:s})))},options:null===(a=D)||void 0===a?void 0:a.map((e=>{var a;return{name:"".concat(e.firstName," ").concat(e.middleInitial," ").concat(e.lastName),value:{id:e._id,employeeSalesCommissionData:null===(a=e.employeeSalesCommissionData)||void 0===a?void 0:a.filter((e=>"ITEM_COMMISSION"===e.type))}}}))})})})]})},ue=()=>{const[e,a]=(0,s.useState)({name:""}),{id:t}=(0,y.g)(),n=(0,p.wA)();(0,s.useEffect)((()=>{n((0,ne.SS)(t,(e=>{a((a=>(0,l.A)((0,l.A)({},a),{},{name:e.name})))})))}),[n,t]);const i=(0,p.d4)((e=>e.loader.isLoading));return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.Ay,{col:"12",title:"Sales Code",children:(0,C.jsx)(o.a,{children:(0,C.jsx)(r.wi,{name:"name",onChange:t=>{let{name:s,value:n}=t;const i=(0,u.A)(s,n,e);a((e=>(0,l.A)((0,l.A)({},e),{},{[s]:n,formErrors:i})))},data:e})})}),(0,C.jsx)(d.zp,{children:(0,C.jsx)(d.Ay,{label:"Save",className:"mx-2",onClick:()=>{(0,v.nV)(e,a)&&n((0,ne.J)({name:e.name,employee:t}))},loading:i})})]})},ve=()=>{const e=[{title:"Item Commission",content:(0,C.jsx)(me,{})},{title:"Bonus",content:(0,C.jsx)(oe,{type:"salesCommission"})},{title:"Sales Code",content:(0,C.jsx)(ue,{})}];return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(i.A,{name:"sales-commission",tabs:e,useIndex:!0})})};var pe=t(3536),ye=t.n(pe),xe=t(6178),he=t.n(xe),Ae=t(1830),Ce=t(6303),je=t(3884);const Ee=()=>{const e=(0,p.wA)(),{id:a}=(0,y.g)();const t={filterType:"AND",from:he()().utc().startOf("week").toDate(),to:he()().utc().endOf("week").toDate(),club:null,department:null},[n,i]=(0,s.useState)(t),[c,m]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null);(0,s.useEffect)((()=>{A()}),[e,a]);const A=()=>{e((0,x.tG)(ye(),a,n))},{employeeTimeSheet:j}=(0,p.d4)((e=>null===e||void 0===e?void 0:e.employees)),E=[{field:"club",header:"Club"},{field:"department",header:"Department"},{field:"clockIn",body:e=>(0,v.LF)(null===e||void 0===e?void 0:e.clockIn),header:"ClockIn"},{field:"clockOut",body:e=>(0,v.LF)(null===e||void 0===e?void 0:e.clockOut),header:"ClockOut"},{field:"duration",body:e=>{if(null!==e&&void 0!==e&&e.clockOut&&null!==e&&void 0!==e&&e.clockIn){const{hours:a,minutes:t}=(0,v.PI)(null===e||void 0===e?void 0:e.clockOut,null===e||void 0===e?void 0:e.clockIn);return"".concat(a," hours ").concat(t," minutes")}return"-"},header:"Duration"},{field:"modifiedOn",body:e=>(0,v.LF)(null===e||void 0===e?void 0:e.clockIn),header:"Modified On"}],{tableData:g,onFilterOpen:f,onFilterClose:T,onApplyFilters:P,filters:N,isFilterVisible:S}=(0,Ce.A)(j,"backend",a,x.tG),w=e=>{let{name:a,value:t}=e;i((e=>(0,l.A)((0,l.A)({},e),{},{[a]:t})))},{clubsDropdown:R}=(0,b.A)(),{departmentsDropdown:_}=(0,L.A)();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(o.oU,{contentPosition:"end",children:(0,C.jsx)("div",{className:"text-end w-full",children:(0,C.jsx)(d.Ay,{label:"Filter",icon:"pi pi-filter",onClick:f,className:"mx-2 "})})}),(0,C.jsx)(Ae.A,{value:N,onApply:P,visible:S,onHide:T,data:n,handleChange:w,setData:i,initailData:t,children:(0,C.jsxs)(o.a,{children:[(0,C.jsx)(r.Rx,{col:12,label:"Club",name:"club",options:R,data:n,onChange:w,showClear:!0}),(0,C.jsx)(r.Rx,{col:12,label:"Department",name:"department",options:_,data:n,onChange:w,showClear:!0}),(0,C.jsx)(r.wN,{name:"from",data:n,onChange:w,col:12,maxDate:n.to}),(0,C.jsx)(r.wN,{name:"to",data:n,onChange:w,col:12,minDate:n.from})]})}),(0,C.jsx)(I.A,{data:g,columns:E,onEdit:e=>{h(null===e||void 0===e?void 0:e._id),m(!0)}}),(0,C.jsx)(je.A,{timesheetEditId:u,visible:c,setVisible:m,setTimesheetEditId:h,getAllTimesheet:A})]})},ge=()=>{const{id:e}=(0,y.g)(),a=[{title:"Security",content:(0,C.jsx)(j,{})},{title:"General",content:(0,C.jsx)(S,{})},{title:"Departments",content:(0,C.jsx)(Y,{})},{title:"Clubs",content:(0,C.jsx)(w,{})},{title:"Classes Setup",content:(0,C.jsx)(W,{})},{title:"Appointment Setup",content:(0,C.jsx)(re,{})},{title:"Sales Commision",content:(0,C.jsx)(ve,{})},{title:"Time Sheet",content:(0,C.jsx)(Ee,{})},{title:"Notes",content:(0,C.jsx)(D,{})},{title:"Certifications",content:(0,C.jsx)(O,{})}];return(0,C.jsx)(n.A,{backText:"Manage Employees",backTo:"/settings/employee",children:(0,C.jsx)(i.A,{tabs:a,disabledTabIndices:e?[]:[1,2,3,4,5,6,7,8,9],scrollable:!0})})}}}]);
//# sourceMappingURL=630.3969f429.chunk.js.map