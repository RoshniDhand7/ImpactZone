"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[492],{6492:(e,o,a)=>{a.r(o),a.d(o,{default:()=>x});var l=a(5043),n=a(9575),r=a(9456),s=a(639),i=a(6303),t=a(7735),d=a(2142),c=a(6038),v=a(7994),u=a(3549),m=a(666),b=a(7602),h=a(1830),p=a(5050),f=a(579);const x=()=>{const e=(0,r.wA)(),[o,a]=(0,l.useState)({reserveMember:"",reserveDate:new Date}),{members:x}=(0,n.A)();(0,l.useEffect)((()=>{a((e=>{var o;return{...e,reserveMember:null===(o=x[0])||void 0===o?void 0:o._id}}))}),[x]);const M=(0,l.useMemo)((()=>x.map((e=>({value:e._id,name:"".concat(e.firstName," ").concat(e.MI," ").concat(e.lastName)})))),[x]),j=(0,l.useMemo)((()=>null===x||void 0===x?void 0:x.map((e=>({name:"".concat(e.firstName," ").concat(e.MI," ").concat(e.lastName),value:null===e||void 0===e?void 0:e._id})))),[x]),[A,C]=(0,l.useState)({filterType:"AND",location:"",resourceType:""});(0,l.useEffect)((()=>{e((0,t.MB)()),e((0,s.Vs)())}),[e]),(0,l.useEffect)((()=>{null!==o&&void 0!==o&&o.reserveMember&&null!==o&&void 0!==o&&o.reserveDate&&e((0,d.C6)(o))}),[null===o||void 0===o?void 0:o.reserveMember,null===o||void 0===o?void 0:o.reserveDate]);const{resourceList:D}=(0,r.d4)((e=>e.checkin)),{tableData:y,onFilterOpen:g,onFilterClose:k,onApplyFilters:w,filters:N,isFilterVisible:T}=(0,i.A)(D),{locationDropdown:F}=(0,r.d4)((e=>e.settings.schedule)),{resourceTypeDropdown:R}=(0,r.d4)((e=>e.settings.members)),_=[{field:"name",header:"Resource"},{field:"resourceType",header:"Resource Type"},{field:"location",header:"Location"},{field:"",body:e=>"".concat(null===e||void 0===e?void 0:e.reserveCount,"/").concat(null===e||void 0===e?void 0:e.availableQuantity),header:"Resources Available"},{field:"",body:e=>{const o=new Date-new Date(null===e||void 0===e?void 0:e.createdAt),a=Math.floor(o/36e5);return(0,f.jsx)("div",{className:"".concat(a>e.pastDue?"h-1rem w-2 border-circle bg-red-500 inline-block":"h-1rem w-2 border-circle bg-green-500 inline-block")})},header:"Past Due"},{field:"serviceCount",header:"Services Available"}],B=e=>{let{name:l,value:n}=e;const r=(0,c.A)(l,n,o);a((e=>({...e,[l]:n,formErrors:r})))},E=e=>{let{name:o,value:a}=e;C((e=>({...e,[o]:a})))};return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(p.A,{backText:"Members",children:(0,f.jsxs)(u.Ay,{title:"Reserve",col:"12",children:[(0,f.jsx)(u.oU,{contentPosition:"end m-0",children:(0,f.jsx)(v.Ay,{label:"Filters",icon:"pi pi-filters",onClick:g,className:"mx-2"})}),(0,f.jsxs)(u.a,{children:[(0,f.jsxs)("div",{className:"col-6 ",children:[(0,f.jsx)("label",{className:" ml-1 mb-3",children:"Member"}),(0,f.jsx)(m.TR,{name:"reserveMember",suggestions:M,options:j,placeholder:"Search Member",showLabel:!1,value:o.reserveMember,onChange:B,col:12})]}),(0,f.jsx)(m.wN,{label:"Date",name:"reserveDate",data:o,onChange:B,col:6,extraClassName:"mb-2"})]}),(0,f.jsx)(b.A,{convertToboolean:!1,data:y,columns:_,customActionTemplate:a=>(0,f.jsx)(v.Ay,{name:"status",label:null!==a&&void 0!==a&&a.isBookedForMember?"Return":"Reserve",onClick:()=>(a=>{null!==a&&void 0!==a&&a.isBookedForMember?e((0,d.D4)(o,null===a||void 0===a?void 0:a.reserveId,(()=>e((0,d.C6)(o))))):e((0,d.rG)(null===a||void 0===a?void 0:a._id,o,(()=>e((0,d.C6)(o)))))})(a),disabled:!(null!==a&&void 0!==a&&a.isBookedForMember)&&(null===a||void 0===a?void 0:a.reserveCount)===(null===a||void 0===a?void 0:a.availableQuantity)})}),(0,f.jsx)(h.A,{value:N,onApply:w,visible:T,onHide:k,data:A,handleChange:E,setData:C,children:(0,f.jsxs)(u.a,{children:[(0,f.jsx)(m.BR,{name:"resourceType",options:null===R||void 0===R?void 0:R.map((e=>({name:e.name,value:e.name}))),data:A,onChange:E,col:12}),(0,f.jsx)(m.BR,{name:"location",options:null===F||void 0===F?void 0:F.map((e=>({name:e.name,value:e.name}))),data:A,onChange:E,col:12})]})})]})})})}}}]);
//# sourceMappingURL=492.a1513e8d.chunk.js.map