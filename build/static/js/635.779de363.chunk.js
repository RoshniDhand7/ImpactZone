"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[635],{7635:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var a=n(5043),l=n(5050),o=n(3549),r=n(6038),i=n(9649),s=n(1688),u=n(2399),c=n(9456),d=n(8110),m=n(1221),p=n(7374),h=n(7994),v=n(438),b=n(6911),f=n(7545),g=n(8701),y=n(2028),C=n(4504),x=n(1828),j=n(4052);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function E(e){var t=function(e,t){if("object"!==P(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==P(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===P(t)?t:String(t)}var w=x.x.extend({defaultProps:{__TYPE:"Editor",id:null,value:null,style:null,className:null,placeholder:null,readOnly:!1,modules:null,formats:null,theme:"snow",showHeader:!0,headerTemplate:null,onTextChange:null,onSelectionChange:null,onLoad:null,maxLength:null,children:void 0}});function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){var a,l,o;a=e,l=t,o=n[t],(l=E(l))in a?Object.defineProperty(a,l,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[l]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){try{return Quill}catch(e){return null}}(),N=a.memo(a.forwardRef((function(e,t){var l=a.useContext(j.UM),o=w.getProps(e,l),r=w.setMetaData({props:o}).ptm,i=a.useRef(null),s=a.useRef(null),u=a.useRef(null),c=a.useRef(null),d=a.useRef(!1);(0,y.uU)((function(){if(!d.current){var e={modules:T({toolbar:!!o.showHeader&&u.current},o.modules),placeholder:o.placeholder,readOnly:o.readOnly,theme:o.theme,formats:o.formats};A?(c.current=new Quill(s.current,e),m(),c.current&&c.current.getModule("toolbar")&&o.onLoad&&o.onLoad(c.current)):n.e(175).then(n.t.bind(n,4175,23)).then((function(t){t&&C.DV.isExist(s.current)&&(t.default?c.current=new t.default(s.current,e):c.current=new t(s.current,e),m())})).then((function(){c.current&&c.current.getModule("toolbar")&&o.onLoad&&o.onLoad(c.current)})),d.current=!0}}));var m=function(){o.value&&c.current.setContents(c.current.clipboard.convert(o.value)),c.current.on("text-change",(function(e,t,n){var a=s.current.children[0],l=a?a.innerHTML:null,r=c.current.getText();if("<p><br></p>"===l&&(l=null),"api"===n){var i=s.current.children[0],u=document.createElement("div");if(u.innerHTML=o.value||"",C.DV.isEqualElement(i,u))return}if(o.maxLength){var d=c.current.getLength();d>o.maxLength&&c.current.deleteText(o.maxLength,d)}o.onTextChange&&o.onTextChange({htmlValue:l,textValue:r,delta:e,source:n})})),c.current.on("selection-change",(function(e,t,n){o.onSelectionChange&&o.onSelectionChange({range:e,oldRange:t,source:n})}))};(0,y.w5)((function(){c.current&&!c.current.hasFocus()&&(o.value?c.current.setContents(c.current.clipboard.convert(o.value)):c.current.setText(""))}),[o.value]),a.useImperativeHandle(t,(function(){return{props:o,getQuill:function(){return c.current},getElement:function(){return i.current},getContent:function(){return s.current},getToolbar:function(){return u.current}}}));var p=(0,C.xW)("p-component p-editor-container",o.className),h=function(){var e=(0,C.v6)({ref:u,className:"p-editor-toolbar"},r("toolbar"));if(!1===o.showHeader)return null;if(o.headerTemplate)return a.createElement("div",e,o.headerTemplate);var t=function(e,t){return(0,C.v6)(e&&T({},e),r(t))},n=(0,C.v6)({className:"ql-formats"},r("formats"));return a.createElement("div",e,a.createElement("span",n,a.createElement("select",t({className:"ql-header",defaultValue:"0"},"select"),a.createElement("option",t({value:"1"},"option"),"Heading"),a.createElement("option",t({value:"2"},"option"),"Subheading"),a.createElement("option",t({value:"0"},"option"),"Normal")),a.createElement("select",t({className:"ql-font"},"select"),a.createElement("option",t(void 0,"option")),a.createElement("option",t({value:"serif"},"option")),a.createElement("option",t({value:"monospace"},"option")))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-bold","aria-label":"Bold"},"button")),a.createElement("button",t({type:"button",className:"ql-italic","aria-label":"Italic"},"button")),a.createElement("button",t({type:"button",className:"ql-underline","aria-label":"Underline"},"button"))),a.createElement("span",n,a.createElement("select",t({className:"ql-color"},"select")),a.createElement("select",t({className:"ql-background"},"select"))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"},"button")),a.createElement("button",t({type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"},"button")),a.createElement("select",t({className:"ql-align"},"select"),a.createElement("option",t({defaultValue:!0},"option")),a.createElement("option",t({value:"center"},"option")),a.createElement("option",t({value:"right"},"option")),a.createElement("option",t({value:"justify"},"option")))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-link","aria-label":"Insert Link"},"button")),a.createElement("button",t({type:"button",className:"ql-image","aria-label":"Insert Image"},"button")),a.createElement("button",t({type:"button",className:"ql-code-block","aria-label":"Insert Code Block"},"button"))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-clean","aria-label":"Remove Styles"},"button"))))}(),v=(0,C.v6)({ref:s,className:"p-editor-content",style:o.style},r("content")),b=a.createElement("div",v),f=(0,C.v6)({id:o.id,ref:i,className:p},w.getOtherProps(o),r("root"));return a.createElement("div",f,h,b)})));N.displayName="Editor";var S=n(3631),_=n(579);const q=e=>{let{name:t,data:n,value:a,onTextChange:l,height:o="320px",inputClass:r,col:i=12,label:s,required:u,extraClassName:c,errorMessage:d}=e;return(0,_.jsx)(S.A,{col:i,label:s,name:t,required:u,extraClassName:c,data:n,errorMessage:d,children:(0,_.jsx)("div",{className:"custom-editor",children:(0,_.jsx)(N,{value:a||(null===n||void 0===n?void 0:n[t]),onTextChange:e=>l&&l({...e,name:t,value:e.htmlValue}),style:{height:o},className:"w-full ".concat(r||""," ").concat(d?"p-invalid":"")})})})};var R=n(8085),D=n(2920),M=n(7602),k=n(6411);const B=e=>{var t,n;let{data:l,setData:r,id:i,loading:s}=e;const[u,d]=(0,a.useState)(!1),[m,p]=(0,a.useState)([]),v=(0,c.wA)();(0,a.useEffect)((()=>{v((0,D.Zi)())}),[v]),(0,a.useEffect)((()=>{i&&u&&p(null===l||void 0===l?void 0:l.membershipPlan)}),[null===l||void 0===l?void 0:l.membershipPlan,u,i]);let{allMembershipPlan:b}=(0,c.d4)((e=>e.membershipPlan));b=null===(t=b)||void 0===t||null===(n=t.filter((e=>{var t;return(null===(t=e.membershipType)||void 0===t?void 0:t._id)===l.membershipType})))||void 0===n?void 0:n.map((e=>({name:e.name,_id:e._id,category:e.category,noofMembers:e.noOfMembers?e.noOfMembers:null})));return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(o.Ay,{col:"12",title:"Agreement Plan",children:[(0,_.jsx)(o.Fq,{buttonTitle:"Add",onClick:()=>d(!0),extraClass:"justify-content-end gap-2",children:(0,_.jsx)("div",{children:(0,_.jsx)(h.Ay,{label:"Remove All",onClick:()=>{r((e=>({...e,membershipPlan:[]}))),p([])}})})}),(0,_.jsx)(M.A,{data:null===l||void 0===l?void 0:l.membershipPlan,columns:[{field:"name",header:"Item Name"},{field:"category",header:"Category"},{field:"noOfMembers",header:"No. of Members"}],showSelectionElement:!1,onDelete:e=>{(0,R.QV)((()=>{r((t=>{var n;return{...t,membershipPlan:null===l||void 0===l||null===(n=l.membershipPlan)||void 0===n?void 0:n.filter((t=>t._id!==(null===e||void 0===e?void 0:e._id)))}}))}),"Do you want to delete this Agreement Plan ?","center")}})]}),(0,_.jsx)(k.A,{title:"Add Agreement Plan",visible:u,onCancel:()=>{d("")},loading:s,onSave:()=>{r((e=>({...e,membershipPlan:m}))),d(!1)},width:"auto",children:(0,_.jsx)(o.a,{children:u&&(0,_.jsx)(M.A,{convertToboolean:!1,data:b,columns:[{selectionMode:"multiple",headerStyle:""},{field:"name",header:" Name"},{field:"category",header:"Category"},{field:"noOfMembers",header:"No of Members"}],selectedRow:m,setSelectedRow:p})})})]})},L=()=>{const e=(0,s.W6)(),t=(0,c.wA)(),{id:n}=(0,s.g)(),y=(0,c.d4)((e=>e.loader.isLoading)),[C,x]=(0,a.useState)({category:"",subCategory:"",club:"",name:"",membershipType:"",agreementTemplate:"",assessedFee:[],services:[],autoPay:"",oftenClientCharged:"",timePeriod:0,noOfAutopays:"",whenClientCharged:"",date:"",afterSixPayments:"",sellOnline:"",onlineDescription:"",oneTimePlan:"",membershipPlan:[]});(0,a.useEffect)((()=>{t((0,u.TX)()),t((0,d.aM)()),t((0,m.i4)()),t((0,f.eA)())}),[t]),(0,a.useEffect)((()=>{t((0,v.eO)()),localStorage.removeItem("gjsProject")}),[t]);const{allAssessedFeesDropdown:j}=(0,c.d4)((e=>e.assessedFees)),{allAgreementTemplatesDropdown:P}=(0,c.d4)((e=>e.agreement));let{agreementCategoryDropdown:E,allAgreementCategories:w}=(0,c.d4)((e=>e.agreement));const[O,T]=(0,a.useState)([]),{clubsDropdown:A}=(0,c.d4)((e=>e.clubs)),{MembershipTypesDropdown:N}=(0,c.d4)((e=>e.membershipTypes)),S=e=>{let{name:t,value:n}=e;const a=(0,r.A)(t,n,C);if("category"===t){var l,o;x((e=>({...e,[t]:n,formErrors:a})));const e=(null===(l=w.find((e=>e._id===n)))||void 0===l||null===(o=l.subCategories)||void 0===o?void 0:o.map((e=>({name:e,value:e}))))||[];T(e)}x((e=>({...e,[t]:n,formErrors:a})))};return(0,a.useEffect)((()=>{n&&t((0,D.gZ)(n,null,(e=>{var t,n,a,l;x({category:e.category,subCategory:e.subCategory,club:e.club,name:e.name,membershipType:null===e||void 0===e||null===(t=e.membershipType)||void 0===t?void 0:t._id,agreementTemplate:e.agreementTemplate,assessedFee:null===e||void 0===e||null===(n=e.assessedFee)||void 0===n?void 0:n.id,services:e.services,autoPay:e.autoPay,oftenClientCharged:e.oftenClientCharged,timePeriod:e.timePeriod,noOfAutopays:e.noOfAutopays,whenClientCharged:e.whenClientCharged,date:e.date,afterSixPayments:e.afterSixPayments,sellOnline:e.sellOnline,onlineDescription:e.onlineDescription,oneTimePlan:e.oneTimePlan,membershipPlan:e.membershipPlan});const o=(null===(a=w.find((t=>t._id===e.category)))||void 0===a||null===(l=a.subCategories)||void 0===l?void 0:l.map((e=>({name:e,value:e}))))||[];T(o)})))}),[n,t]),(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(l.A,{backText:"Agreement Plan",children:[(0,_.jsx)(o.Ay,{col:"12",title:"General",children:(0,_.jsxs)(o.a,{children:[(0,_.jsx)(i.BR,{name:"category",options:E,onChange:S,data:C,required:!0}),(0,_.jsx)(i.BR,{name:"subCategory",options:O,onChange:S,data:C,required:!0}),(0,_.jsx)(i.wi,{name:"name",data:C,onChange:S,required:!0}),(0,_.jsx)(i.BR,{name:"club",options:A,onChange:S,data:C,required:!0}),(0,_.jsx)(i.BR,{name:"membershipType",options:N,onChange:S,data:C,required:!0}),(0,_.jsx)(i.BR,{name:"agreementTemplate",options:P,onChange:S,data:C}),(0,_.jsx)(i.BR,{label:"Is this a one time plan ?",name:"oneTimePlan",options:p.r4,onChange:S,data:C})]})}),(0,_.jsx)(o.Ay,{col:"12",title:"Assessed Fees",children:(0,_.jsx)(b.A,{name:"assessedFee",selected:null===C||void 0===C?void 0:C.assessedFee,sourceData:j,onPickListChange:S})}),(0,_.jsx)(g.A,{data:C,setData:x,id:n,loading:y,name:"Add Services"}),(0,_.jsx)(o.Ay,{col:"12",title:"Contract Options",children:(0,_.jsxs)(o.a,{children:[(0,_.jsx)(i.BR,{name:"autoPay",options:p.iB,onChange:S,data:C}),"set_schedule"===(null===C||void 0===C?void 0:C.autoPay)&&(0,_.jsx)(i.BR,{name:"oftenClientCharged",label:"How Often will Clients Be Charged",options:p.eH,onChange:S,data:C}),(null===C||void 0===C?void 0:C.autoPay)&&(0,_.jsx)(i.Bt,{name:"timePeriod",data:C,onChange:S,col:"4",suffix:"Month"}),"no_of_autopays"===(null===C||void 0===C?void 0:C.oftenClientCharged)&&(0,_.jsx)(i.wi,{name:"noOfAutopays",label:"Number of AutoPays",data:C,onChange:S,col:"4",keyfilter:"int"}),"set_schedule"===(null===C||void 0===C?void 0:C.autoPay)&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.BR,{name:"whenClientCharged",label:"When will Clients Be Charged",options:p.Yl,onChange:S,data:C}),"specific_date"===(null===C||void 0===C?void 0:C.whenClientCharged)&&(0,_.jsx)(i.wN,{name:"date",data:C,onChange:S}),"no_of_autopays"===(null===C||void 0===C?void 0:C.oftenClientCharged)&&(0,_.jsx)(i.BR,{name:"afterSixPayments",label:" What happens after ".concat(null===C||void 0===C?void 0:C.noOfAutopays," payments"),options:p.Ol,onChange:S,data:C})]}),("pricing_options_run_out"===(null===C||void 0===C?void 0:C.autoPay)||"set_schedule"===(null===C||void 0===C?void 0:C.autoPay))&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.BR,{name:"sellOnline",options:p.r4,onChange:S,data:C}),"true"===(null===C||void 0===C?void 0:C.sellOnline)&&(0,_.jsx)(q,{name:"onlineDescription",onTextChange:S,data:C})]})]})}),(0,_.jsx)(B,{data:C,setData:x,id:n,loading:y,type:"discount"}),(0,_.jsxs)(h.zp,{children:[(0,_.jsx)(h.Ay,{label:"Save",className:"mx-2",onClick:()=>{(0,R.nV)(C,x,["services"])&&t(n?(0,D.Y2)(n,C,e):(0,D.Rd)(C,e))},loading:y}),(0,_.jsx)(h.Ti,{label:"Cancel",onClick:()=>e.goBack()})]})]})})}}}]);
//# sourceMappingURL=635.779de363.chunk.js.map