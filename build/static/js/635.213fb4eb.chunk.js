"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[635],{7635:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var a=n(5043),l=n(5050),r=n(3549),o=n(6038),i=n(666),s=n(1688),u=n(2399),c=n(9456),d=n(1221),m=n(7374),p=n(7994),h=n(438),v=n(6911),g=n(7545),b=n(8701),f=n(2028),y=n(4504),C=n(1828),x=n(4052);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function j(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==E(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===E(t)?t:String(t)}var O=C.x.extend({defaultProps:{__TYPE:"Editor",id:null,value:null,style:null,className:null,placeholder:null,readOnly:!1,modules:null,formats:null,theme:"snow",showHeader:!0,headerTemplate:null,onTextChange:null,onSelectionChange:null,onLoad:null,maxLength:null,children:void 0}});function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){var a,l,r;a=e,l=t,r=n[t],(l=j(l))in a?Object.defineProperty(a,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[l]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){try{return Quill}catch(e){return null}}(),T=a.memo(a.forwardRef((function(e,t){var l=a.useContext(x.UM),r=O.getProps(e,l),o=O.setMetaData({props:r}).ptm,i=a.useRef(null),s=a.useRef(null),u=a.useRef(null),c=a.useRef(null),d=a.useRef(!1);(0,f.uU)((function(){if(!d.current){var e={modules:w({toolbar:!!r.showHeader&&u.current},r.modules),placeholder:r.placeholder,readOnly:r.readOnly,theme:r.theme,formats:r.formats};A?(c.current=new Quill(s.current,e),m(),c.current&&c.current.getModule("toolbar")&&r.onLoad&&r.onLoad(c.current)):n.e(175).then(n.t.bind(n,4175,23)).then((function(t){t&&y.DV.isExist(s.current)&&(t.default?c.current=new t.default(s.current,e):c.current=new t(s.current,e),m())})).then((function(){c.current&&c.current.getModule("toolbar")&&r.onLoad&&r.onLoad(c.current)})),d.current=!0}}));var m=function(){r.value&&c.current.setContents(c.current.clipboard.convert(r.value)),c.current.on("text-change",(function(e,t,n){var a=s.current.children[0],l=a?a.innerHTML:null,o=c.current.getText();if("<p><br></p>"===l&&(l=null),"api"===n){var i=s.current.children[0],u=document.createElement("div");if(u.innerHTML=r.value||"",y.DV.isEqualElement(i,u))return}if(r.maxLength){var d=c.current.getLength();d>r.maxLength&&c.current.deleteText(r.maxLength,d)}r.onTextChange&&r.onTextChange({htmlValue:l,textValue:o,delta:e,source:n})})),c.current.on("selection-change",(function(e,t,n){r.onSelectionChange&&r.onSelectionChange({range:e,oldRange:t,source:n})}))};(0,f.w5)((function(){c.current&&!c.current.hasFocus()&&(r.value?c.current.setContents(c.current.clipboard.convert(r.value)):c.current.setText(""))}),[r.value]),a.useImperativeHandle(t,(function(){return{props:r,getQuill:function(){return c.current},getElement:function(){return i.current},getContent:function(){return s.current},getToolbar:function(){return u.current}}}));var p=(0,y.xW)("p-component p-editor-container",r.className),h=function(){var e=(0,y.v6)({ref:u,className:"p-editor-toolbar"},o("toolbar"));if(!1===r.showHeader)return null;if(r.headerTemplate)return a.createElement("div",e,r.headerTemplate);var t=function(e,t){return(0,y.v6)(e&&w({},e),o(t))},n=(0,y.v6)({className:"ql-formats"},o("formats"));return a.createElement("div",e,a.createElement("span",n,a.createElement("select",t({className:"ql-header",defaultValue:"0"},"select"),a.createElement("option",t({value:"1"},"option"),"Heading"),a.createElement("option",t({value:"2"},"option"),"Subheading"),a.createElement("option",t({value:"0"},"option"),"Normal")),a.createElement("select",t({className:"ql-font"},"select"),a.createElement("option",t(void 0,"option")),a.createElement("option",t({value:"serif"},"option")),a.createElement("option",t({value:"monospace"},"option")))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-bold","aria-label":"Bold"},"button")),a.createElement("button",t({type:"button",className:"ql-italic","aria-label":"Italic"},"button")),a.createElement("button",t({type:"button",className:"ql-underline","aria-label":"Underline"},"button"))),a.createElement("span",n,a.createElement("select",t({className:"ql-color"},"select")),a.createElement("select",t({className:"ql-background"},"select"))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-list",value:"ordered","aria-label":"Ordered List"},"button")),a.createElement("button",t({type:"button",className:"ql-list",value:"bullet","aria-label":"Unordered List"},"button")),a.createElement("select",t({className:"ql-align"},"select"),a.createElement("option",t({defaultValue:!0},"option")),a.createElement("option",t({value:"center"},"option")),a.createElement("option",t({value:"right"},"option")),a.createElement("option",t({value:"justify"},"option")))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-link","aria-label":"Insert Link"},"button")),a.createElement("button",t({type:"button",className:"ql-image","aria-label":"Insert Image"},"button")),a.createElement("button",t({type:"button",className:"ql-code-block","aria-label":"Insert Code Block"},"button"))),a.createElement("span",n,a.createElement("button",t({type:"button",className:"ql-clean","aria-label":"Remove Styles"},"button"))))}(),v=(0,y.v6)({ref:s,className:"p-editor-content",style:r.style},o("content")),g=a.createElement("div",v),b=(0,y.v6)({id:r.id,ref:i,className:p},O.getOtherProps(r),o("root"));return a.createElement("div",b,h,g)})));T.displayName="Editor";var N=n(3631),S=n(579);const B=e=>{let{name:t,data:n,value:a,onTextChange:l,height:r="320px",inputClass:o,col:i=12,label:s,required:u,extraClassName:c,errorMessage:d}=e;return(0,S.jsx)(N.A,{col:i,label:s,name:t,required:u,extraClassName:c,data:n,errorMessage:d,children:(0,S.jsx)("div",{className:"custom-editor",children:(0,S.jsx)(T,{value:a||(null===n||void 0===n?void 0:n[t]),onTextChange:e=>l&&l({...e,name:t,value:e.htmlValue}),style:{height:r},className:"w-full ".concat(o||""," ").concat(d?"p-invalid":"")})})})};var D=n(8085),_=n(2920),q=n(7602),R=n(6411);const L=e=>{var t,n;let{data:l,setData:o,id:i,loading:s}=e;const[u,d]=(0,a.useState)(!1),[m,h]=(0,a.useState)([]),v=(0,c.wA)();(0,a.useEffect)((()=>{v((0,_.Zi)())}),[v]),(0,a.useEffect)((()=>{i&&u&&h(null===l||void 0===l?void 0:l.membershipPlan)}),[null===l||void 0===l?void 0:l.membershipPlan,u,i]);let{allMembershipPlan:g}=(0,c.d4)((e=>e.membershipPlan));g=null===(t=g)||void 0===t||null===(n=t.filter((e=>{var t;return(null===(t=e.membershipType)||void 0===t?void 0:t._id)===l.membershipType})))||void 0===n?void 0:n.map((e=>({name:e.name,_id:e._id,category:e.category,noofMembers:e.noOfMembers?e.noOfMembers:null})));return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)(r.Ay,{col:"12",title:"Agreement Plan",children:[(0,S.jsx)(r.Fq,{buttonTitle:"Add",onClick:()=>d(!0),extraClass:"justify-content-end gap-2",children:(0,S.jsx)("div",{children:(0,S.jsx)(p.Ay,{label:"Remove All",onClick:()=>{o((e=>({...e,membershipPlan:[]}))),h([])}})})}),(0,S.jsx)(q.A,{data:null===l||void 0===l?void 0:l.membershipPlan,columns:[{field:"name",header:"Item Name"},{field:"category",header:"Category"},{field:"noOfMembers",header:"No. of Members"}],showSelectionElement:!1,onDelete:e=>{(0,D.QV)((()=>{o((t=>{var n;return{...t,membershipPlan:null===l||void 0===l||null===(n=l.membershipPlan)||void 0===n?void 0:n.filter((t=>t._id!==(null===e||void 0===e?void 0:e._id)))}}))}),"Do you want to delete this Agreement Plan ?","center")}})]}),(0,S.jsx)(R.A,{title:"Add Agreement Plan",visible:u,onCancel:()=>{d("")},loading:s,onSave:()=>{o((e=>({...e,membershipPlan:m}))),d(!1)},width:"auto",children:(0,S.jsx)(r.a,{children:u&&(0,S.jsx)(q.A,{convertToboolean:!1,data:g,columns:[{selectionMode:"multiple",headerStyle:""},{field:"name",header:" Name"},{field:"category",header:"Category"},{field:"noOfMembers",header:"No of Members"}],selectedRow:m,setSelectedRow:h})})})]})};var k=n(1047);const M=()=>{const e=(0,s.W6)(),t=(0,c.wA)(),{id:n}=(0,s.g)(),f=(0,c.d4)((e=>e.loader.isLoading)),[y,C]=(0,a.useState)({category:"",subCategory:"",club:"",name:"",membershipType:"",agreementTemplate:"",isOneTimePlan:!0,assessedFee:[],services:[],autoPay:"ON_SET_SCHEDULE",howOftenWillClientsBeCharged:"",timePeriod:0,noOfAutopays:"",whenWillClientsBeCharged:"",date:"",whatHappensAfterAutopayPayments:"",sellOnline:"",onlineDescription:"",oneTimePlan:"",agreementPlans:[],isActive:!0});(0,a.useEffect)((()=>{t((0,u.TX)()),t((0,d.i4)()),t((0,g.eA)())}),[t]),(0,a.useEffect)((()=>{t((0,h.eO)())}),[t]);const x=(0,c.d4)((e=>e.settings.agreement.assessedFeesDropdown)),{allAgreementTemplatesDropdown:E}=(0,c.d4)((e=>e.agreement));let{agreementCategoryDropdown:j,allAgreementCategories:O}=(0,c.d4)((e=>e.agreement));const[P,w]=(0,a.useState)([]),A=(0,c.d4)((e=>e.settings.members.membershipTypesDropdown)),{clubsDropdown:T}=(0,k.A)(),N=e=>{let{name:t,value:n}=e;const a=(0,o.A)(t,n,y);if("category"===t){var l,r;C((e=>({...e,[t]:n,formErrors:a})));const e=(null===(l=O.find((e=>e._id===n)))||void 0===l||null===(r=l.subCategories)||void 0===r?void 0:r.map((e=>({name:e,value:e}))))||[];w(e)}C((e=>({...e,[t]:n,formErrors:a})))};return(0,a.useEffect)((()=>{n&&t((0,_.gZ)(n,null,(e=>{var t,n,a,l;C({category:e.category,subCategory:e.subCategory,club:e.club,name:e.name,membershipType:null===e||void 0===e||null===(t=e.membershipType)||void 0===t?void 0:t._id,agreementTemplate:e.agreementTemplate,assessedFee:null===e||void 0===e||null===(n=e.assessedFee)||void 0===n?void 0:n.id,services:e.services,autoPay:e.autoPay,howOftenWillClientsBeCharged:e.howOftenWillClientsBeCharged,timePeriod:e.timePeriod,noOfAutopays:e.noOfAutopays,whenWillClientsBeCharged:e.whenWillClientsBeCharged,date:e.date,whatHappensAfterAutopayPayments:e.whatHappensAfterAutopayPayments,sellOnline:e.sellOnline,onlineDescription:e.onlineDescription,oneTimePlan:e.oneTimePlan,agreementPlans:e.agreementPlans,isActive:e.isActive});const r=(null===(a=O.find((t=>t._id===e.category)))||void 0===a||null===(l=a.subCategories)||void 0===l?void 0:l.map((e=>({name:e,value:e}))))||[];w(r)})))}),[n,t]),(0,S.jsx)(S.Fragment,{children:(0,S.jsxs)(l.A,{backText:"Agreement Plan",children:[(0,S.jsx)(r.Ay,{col:"12",title:"General",children:(0,S.jsxs)(r.a,{children:[(0,S.jsx)(i.BR,{name:"category",options:j,onChange:N,data:y,required:!0}),(0,S.jsx)(i.BR,{name:"subCategory",options:P,onChange:N,data:y,required:!0}),(0,S.jsx)(i.wi,{name:"name",data:y,onChange:N,required:!0}),(0,S.jsx)(i.BR,{name:"club",options:T,onChange:N,data:y,required:!0}),(0,S.jsx)(i.BR,{name:"membershipType",options:A,onChange:N,data:y,required:!0}),(0,S.jsx)(i.BR,{name:"agreementTemplate",options:E,onChange:N,data:y}),(0,S.jsx)(i.BR,{label:"Is this a one time plan ?",name:"oneTimePlan",options:m.r4,onChange:N,data:y}),(0,S.jsx)(i.o4,{name:"isActive",data:y,onChange:N})]})}),(0,S.jsx)(r.Ay,{col:"12",title:"Assessed Fees",children:(0,S.jsx)(v.A,{name:"assessedFee",selected:null===y||void 0===y?void 0:y.assessedFee,sourceData:x,onPickListChange:N})}),(0,S.jsx)(b.A,{data:y,setData:C,id:n,loading:f,name:"Add Services"}),(0,S.jsx)(r.Ay,{col:"12",title:"Contract Options",children:(0,S.jsxs)(r.a,{children:[(0,S.jsx)(i.BR,{name:"autoPay",options:m.iB,onChange:N,data:y}),"ON_SET_SCHEDULE"===(null===y||void 0===y?void 0:y.autoPay)&&(0,S.jsx)(i.BR,{name:"howOftenWillClientsBeCharged",label:"How Often will Clients Be Charged",options:m.eH,onChange:N,data:y}),(null===y||void 0===y?void 0:y.autoPay)&&(0,S.jsx)(i.Bt,{name:"timePeriod",data:y,onChange:N,col:"4",suffix:"Month"}),"NO_OF_AUTOPAYS"===(null===y||void 0===y?void 0:y.howOftenWillClientsBeCharged)&&(0,S.jsx)(i.wi,{name:"noOfAutopays",label:"Number of AutoPays",data:y,onChange:N,col:"4",keyfilter:"int"}),"ON_SET_SCHEDULE"===(null===y||void 0===y?void 0:y.autoPay)&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(i.BR,{name:"whenWillClientsBeCharged",label:"When will Clients Be Charged",options:m.Yl,onChange:N,data:y}),"SPECIFIC_DATE"===(null===y||void 0===y?void 0:y.whenWillClientsBeCharged)&&(0,S.jsx)(i.wN,{name:"date",data:y,onChange:N}),"NO_OF_AUTOPAYS"===(null===y||void 0===y?void 0:y.howOftenWillClientsBeCharged)&&(0,S.jsx)(i.BR,{name:"whatHappensAfterAutopayPayments",label:" What happens after ".concat(null===y||void 0===y?void 0:y.noOfAutopays," payments"),options:m.Ol,onChange:N,data:y})]}),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(i.BR,{name:"sellOnline",options:m.r4,onChange:N,data:y}),(null===y||void 0===y?void 0:y.sellOnline)&&(0,S.jsx)(B,{name:"onlineDescription",onTextChange:N,data:y})]})]})}),(0,S.jsx)(L,{data:y,setData:C,id:n,loading:f,type:"discount"}),(0,S.jsxs)(p.zp,{children:[(0,S.jsx)(p.Ay,{label:"Save",className:"mx-2",onClick:()=>{let a=["services"];"SPECIFIC_DATE"!==(null===y||void 0===y?void 0:y.whenWillClientsBeCharged)&&(a=[...a,"date"]),(0,D.nV)(y,C,a)&&t(n?(0,_.Y2)(n,y,e):(0,_.Rd)(y,e))},loading:f}),(0,S.jsx)(p.Ti,{label:"Cancel",onClick:()=>e.goBack()})]})]})})}}}]);
//# sourceMappingURL=635.213fb4eb.chunk.js.map