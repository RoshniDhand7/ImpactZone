"use strict";(self.webpackChunkimpact_zone_frontend=self.webpackChunkimpact_zone_frontend||[]).push([[975],{7931:(e,a,t)=>{t.d(a,{Xs:()=>d,bV:()=>A,br:()=>p,gc:()=>f,kx:()=>g,m6:()=>u,mp:()=>E});var i=t(6178),c=t.n(i),s=t(7128),n=t(5659),r=t(346),o=t(7504),l=t(2392),m=t(8085);const d=(e,a)=>async t=>{a&&a(!0);const i={employee:e},c=await(0,s.A)("get",n.A.MANAGE_EMPLOYEE_CERTIFICATES,{},i);c.success&&c.data&&t({type:r.g.CHANGE_MANAGE_EMPLOYEE_CERTIFICATES,payload:c.data}),a&&a(!1)},u=function(e,a,t){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return async r=>{var o;if(a(!0),null!==(o=e.certificate)&&void 0!==o&&o.length){let a=await(0,m.Zn)(e.certificate);e.certificate=a[0].path,e.certificateName=a[0].originalname,e.certificateSize=a[0].size}else e.certificate="";const d={...e,acquiredDate:c()(e.acquiredDate).format("MM/DD/YYYY"),expirationDate:c()(e.expirationDate).format("MM/DD/YYYY")},u=await(0,s.A)("post",n.A.MANAGE_EMPLOYEE_CERTIFICATES,d);u.success&&(i?t.replace("/settings/employee/manage-employee/edit/".concat(u.data._id,"/").concat(i)):t.goBack(),r((0,l.P)({severity:"success",summary:u.message}))),a(!1)}},f=(e,a)=>async t=>{t((0,o.rb)());const i=await(0,s.A)("get",n.A.MANAGE_EMPLOYEE_CERTIFICATES+e);i.success&&i.data&&a&&a(i.data),t((0,o.iG)())},p=function(e,a,t,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return async o=>{var d;if(t(!0),null!==(d=a.certificate)&&void 0!==d&&d.length){let e=await(0,m.Zn)(a.certificate);a.certificate=e[0].path,a.certificateName=e[0].originalname,a.certificateSize=e[0].size}else a.certificate="";const u={...a,acquiredDate:c()(a.acquiredDate).format("MM/DD/YYYY"),expirationDate:c()(a.expirationDate).format("MM/DD/YYYY")},f=await(0,s.A)("put",n.A.MANAGE_EMPLOYEE_CERTIFICATES+e,u);f.success&&(r?i.replace("/settings/employee/manage-employee/edit/".concat(f.data._id,"/").concat(r)):i.goBack(),o((0,l.P)({severity:"success",summary:f.message}))),t(!1)}},E=(e,a)=>async t=>{const i=await(0,s.A)("delete",n.A.MANAGE_EMPLOYEE_CERTIFICATES+e);i.success?(t((0,l.P)({severity:"success",summary:i.message})),a()):t((0,l.P)({severity:"error",summary:i.message}))},g=(e,a,t)=>async i=>{a&&a(!0);const c=await(0,s.A)("get",n.A.NOTES,"",{employee:e});c.success&&c.data&&t&&t(c.data),a&&a(!1)},A=(e,a,t)=>async i=>{a(!0);const c=await(0,s.A)("post",n.A.NOTES,e);c.success?(i((0,l.P)({severity:"success",summary:c.message})),t()):i((0,l.P)({severity:"error",summary:c.message})),a(!1)}},8975:(e,a,t)=>{t.r(a),t.d(a,{default:()=>f});var i=t(5043),c=t(5050),s=t(3549),n=t(666),r=t(9456),o=t(1688),l=t(7994),m=t(7931),d=t(6548),u=t(579);const f=()=>{const{id:e,employeeId:a}=(0,o.g)(),t=(0,r.wA)(),f=(0,o.W6)(),[p,E]=(0,i.useState)({name:"",certificationNumber:"",issuer:"",acquiredDate:"",expirationDate:"",certificate:[],employee:"",certificateSize:"",certificateName:""});(0,i.useEffect)((()=>{e?t((0,m.gc)(e,(e=>{E({name:e.name,certificationNumber:e.certificationNumber,issuer:e.issuer,acquiredDate:e.acquiredDate?new Date:"",expirationDate:e.expirationDate?new Date:"",certificate:e.certificate?[e.certificate]:[],description:e.description,employee:a,certificateName:null!==e&&void 0!==e&&e.certificateName?null===e||void 0===e?void 0:e.certificateName:"",certificateSize:null!==e&&void 0!==e&&e.certificateSize?null===e||void 0===e?void 0:e.certificateSize:""})}))):E({...p,employee:a})}),[e,t]);const[g,A]=(0,i.useState)(!1),y=e=>{let{name:a,value:t}=e;E((e=>({...e,[a]:t})))};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(c.A,{backText:"Certifications",children:[(0,u.jsx)(s.Ay,{col:"12",title:"Personal",children:(0,u.jsxs)(s.a,{children:[(0,u.jsx)(n.wi,{name:"name",data:p,onChange:y}),(0,u.jsx)(n.wi,{name:"certificationNumber",data:p,onChange:y}),(0,u.jsx)(n.wi,{name:"issuer",data:p,onChange:y}),(0,u.jsx)(n.wN,{name:"acquiredDate",data:p,onChange:y}),(0,u.jsx)(n.wN,{name:"expirationDate",data:p,onChange:y}),(0,u.jsx)(n.Ky,{name:"description",data:p,onChange:y}),(0,u.jsx)(d.A,{data:p,onFilesChange:y,name:"certificate",label:"Upload Certificate",accept:"image/*,.pdf",disabled:!1,col:"6",uploadType:"Image/Pdf",originalName:null===p||void 0===p?void 0:p.certificateName,fileSize:p.certificateSize})]})}),(0,u.jsxs)(l.zp,{children:[(0,u.jsx)(l.Ay,{label:"Save",className:"mx-2",loading:g,onClick:()=>{t(e?(0,m.br)(e,p,A,f):(0,m.m6)(p,A,f))}}),(0,u.jsx)(l.Ti,{label:"Cancel",onClick:()=>f.replace("/settings/employee")})]})]})})}}}]);
//# sourceMappingURL=975.d43bb4b7.chunk.js.map